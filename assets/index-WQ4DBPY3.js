(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function J0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qy={exports:{}},du={},By={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ko=Symbol.for("react.element"),Y0=Symbol.for("react.portal"),X0=Symbol.for("react.fragment"),Z0=Symbol.for("react.strict_mode"),eT=Symbol.for("react.profiler"),tT=Symbol.for("react.provider"),nT=Symbol.for("react.context"),rT=Symbol.for("react.forward_ref"),sT=Symbol.for("react.suspense"),iT=Symbol.for("react.memo"),oT=Symbol.for("react.lazy"),em=Symbol.iterator;function aT(t){return t===null||typeof t!="object"?null:(t=em&&t[em]||t["@@iterator"],typeof t=="function"?t:null)}var $y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hy=Object.assign,Wy={};function fi(t,e,n){this.props=t,this.context=e,this.refs=Wy,this.updater=n||$y}fi.prototype.isReactComponent={};fi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gy(){}Gy.prototype=fi.prototype;function yd(t,e,n){this.props=t,this.context=e,this.refs=Wy,this.updater=n||$y}var vd=yd.prototype=new Gy;vd.constructor=yd;Hy(vd,fi.prototype);vd.isPureReactComponent=!0;var tm=Array.isArray,Ky=Object.prototype.hasOwnProperty,_d={current:null},Qy={key:!0,ref:!0,__self:!0,__source:!0};function Jy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ky.call(e,r)&&!Qy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ko,type:t,key:i,ref:o,props:s,_owner:_d.current}}function lT(t,e){return{$$typeof:Ko,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ed(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ko}function uT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nm=/\/+/g;function fc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uT(""+t.key):e.toString(36)}function Ja(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ko:case Y0:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+fc(o,0):r,tm(s)?(n="",t!=null&&(n=t.replace(nm,"$&/")+"/"),Ja(s,e,n,"",function(h){return h})):s!=null&&(Ed(s)&&(s=lT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(nm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",tm(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+fc(i,l);o+=Ja(i,e,n,u,s)}else if(u=aT(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+fc(i,l++),o+=Ja(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sa(t,e,n){if(t==null)return t;var r=[],s=0;return Ja(t,r,"","",function(i){return e.call(n,i,s++)}),r}function cT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},Ya={transition:null},hT={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:Ya,ReactCurrentOwner:_d};function Yy(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Sa,forEach:function(t,e,n){Sa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sa(t,function(){e++}),e},toArray:function(t){return Sa(t,function(e){return e})||[]},only:function(t){if(!Ed(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=fi;he.Fragment=X0;he.Profiler=eT;he.PureComponent=yd;he.StrictMode=Z0;he.Suspense=sT;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hT;he.act=Yy;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Hy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=_d.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ky.call(e,u)&&!Qy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Ko,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:nT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tT,_context:t},t.Consumer=t};he.createElement=Jy;he.createFactory=function(t){var e=Jy.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:rT,render:t}};he.isValidElement=Ed;he.lazy=function(t){return{$$typeof:oT,_payload:{_status:-1,_result:t},_init:cT}};he.memo=function(t,e){return{$$typeof:iT,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Ya.transition;Ya.transition={};try{t()}finally{Ya.transition=e}};he.unstable_act=Yy;he.useCallback=function(t,e){return Tt.current.useCallback(t,e)};he.useContext=function(t){return Tt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Tt.current.useEffect(t,e)};he.useId=function(){return Tt.current.useId()};he.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Tt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};he.useRef=function(t){return Tt.current.useRef(t)};he.useState=function(t){return Tt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Tt.current.useTransition()};he.version="18.3.1";By.exports=he;var z=By.exports;const dT=J0(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT=z,pT=Symbol.for("react.element"),mT=Symbol.for("react.fragment"),gT=Object.prototype.hasOwnProperty,yT=fT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vT={key:!0,ref:!0,__self:!0,__source:!0};function Xy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gT.call(e,r)&&!vT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:pT,type:t,key:i,ref:o,props:s,_owner:yT.current}}du.Fragment=mT;du.jsx=Xy;du.jsxs=Xy;qy.exports=du;var d=qy.exports,Zc={},Zy={exports:{}},Ut={},ev={exports:{}},tv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,K){var R=j.length;j.push(K);e:for(;0<R;){var H=R-1>>>1,J=j[H];if(0<s(J,K))j[H]=K,j[R]=J,R=H;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var K=j[0],R=j.pop();if(R!==K){j[0]=R;e:for(var H=0,J=j.length,ie=J>>>1;H<ie;){var ue=2*(H+1)-1,Re=j[ue],Ve=ue+1,je=j[Ve];if(0>s(Re,R))Ve<J&&0>s(je,Re)?(j[H]=je,j[Ve]=R,H=Ve):(j[H]=Re,j[ue]=R,H=ue);else if(Ve<J&&0>s(je,R))j[H]=je,j[Ve]=R,H=Ve;else break e}}return K}function s(j,K){var R=j.sortIndex-K.sortIndex;return R!==0?R:j.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,g=3,S=!1,k=!1,b=!1,O=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(j){for(var K=n(h);K!==null;){if(K.callback===null)r(h);else if(K.startTime<=j)r(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(h)}}function x(j){if(b=!1,C(j),!k)if(n(u)!==null)k=!0,F(U);else{var K=n(h);K!==null&&$(x,K.startTime-j)}}function U(j,K){k=!1,b&&(b=!1,T(y),y=-1),S=!0;var R=g;try{for(C(K),m=n(u);m!==null&&(!(m.expirationTime>K)||j&&!A());){var H=m.callback;if(typeof H=="function"){m.callback=null,g=m.priorityLevel;var J=H(m.expirationTime<=K);K=t.unstable_now(),typeof J=="function"?m.callback=J:m===n(u)&&r(u),C(K)}else r(u);m=n(u)}if(m!==null)var ie=!0;else{var ue=n(h);ue!==null&&$(x,ue.startTime-K),ie=!1}return ie}finally{m=null,g=R,S=!1}}var V=!1,_=null,y=-1,E=5,N=-1;function A(){return!(t.unstable_now()-N<E)}function P(){if(_!==null){var j=t.unstable_now();N=j;var K=!0;try{K=_(!0,j)}finally{K?I():(V=!1,_=null)}}else V=!1}var I;if(typeof v=="function")I=function(){v(P)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,M=W.port2;W.port1.onmessage=P,I=function(){M.postMessage(null)}}else I=function(){O(P,0)};function F(j){_=j,V||(V=!0,I())}function $(j,K){y=O(function(){j(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){k||S||(k=!0,F(U))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(j){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var R=g;g=K;try{return j()}finally{g=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,K){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var R=g;g=j;try{return K()}finally{g=R}},t.unstable_scheduleCallback=function(j,K,R){var H=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?H+R:H):R=H,j){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=R+J,j={id:p++,callback:K,priorityLevel:j,startTime:R,expirationTime:J,sortIndex:-1},R>H?(j.sortIndex=R,e(h,j),n(u)===null&&j===n(h)&&(b?(T(y),y=-1):b=!0,$(x,R-H))):(j.sortIndex=J,e(u,j),k||S||(k=!0,F(U))),j},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(j){var K=g;return function(){var R=g;g=K;try{return j.apply(this,arguments)}finally{g=R}}}})(tv);ev.exports=tv;var _T=ev.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET=z,Ft=_T;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nv=new Set,Io={};function hs(t,e){Ys(t,e),Ys(t+"Capture",e)}function Ys(t,e){for(Io[t]=e,t=0;t<e.length;t++)nv.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eh=Object.prototype.hasOwnProperty,wT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rm={},sm={};function TT(t){return eh.call(sm,t)?!0:eh.call(rm,t)?!1:wT.test(t)?sm[t]=!0:(rm[t]=!0,!1)}function IT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ST(t,e,n,r){if(e===null||typeof e>"u"||IT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var wd=/[\-:]([a-z])/g;function Td(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wd,Td);lt[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wd,Td);lt[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wd,Td);lt[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function Id(t,e,n,r){var s=lt.hasOwnProperty(e)?lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ST(e,n,s,r)&&(n=null),r||s===null?TT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bn=ET.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Aa=Symbol.for("react.element"),As=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),Sd=Symbol.for("react.strict_mode"),th=Symbol.for("react.profiler"),rv=Symbol.for("react.provider"),sv=Symbol.for("react.context"),Ad=Symbol.for("react.forward_ref"),nh=Symbol.for("react.suspense"),rh=Symbol.for("react.suspense_list"),Cd=Symbol.for("react.memo"),er=Symbol.for("react.lazy"),iv=Symbol.for("react.offscreen"),im=Symbol.iterator;function Bi(t){return t===null||typeof t!="object"?null:(t=im&&t[im]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,pc;function Zi(t){if(pc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pc=e&&e[1]||""}return`
`+pc+t}var mc=!1;function gc(t,e){if(!t||mc)return"";mc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{mc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zi(t):""}function AT(t){switch(t.tag){case 5:return Zi(t.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return t=gc(t.type,!1),t;case 11:return t=gc(t.type.render,!1),t;case 1:return t=gc(t.type,!0),t;default:return""}}function sh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case As:return"Portal";case th:return"Profiler";case Sd:return"StrictMode";case nh:return"Suspense";case rh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sv:return(t.displayName||"Context")+".Consumer";case rv:return(t._context.displayName||"Context")+".Provider";case Ad:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cd:return e=t.displayName||null,e!==null?e:sh(t.type)||"Memo";case er:e=t._payload,t=t._init;try{return sh(t(e))}catch{}}return null}function CT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sh(e);case 8:return e===Sd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ov(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NT(t){var e=ov(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ca(t){t._valueTracker||(t._valueTracker=NT(t))}function av(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ov(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ih(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function om(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lv(t,e){e=e.checked,e!=null&&Id(t,"checked",e,!1)}function oh(t,e){lv(t,e);var n=Sr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ah(t,e.type,n):e.hasOwnProperty("defaultValue")&&ah(t,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function am(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ah(t,e,n){(e!=="number"||vl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eo=Array.isArray;function Os(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function lh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(eo(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sr(n)}}function uv(t,e){var n=Sr(e.value),r=Sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function um(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Na,hv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Na=Na||document.createElement("div"),Na.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Na.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function So(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RT=["Webkit","ms","Moz","O"];Object.keys(oo).forEach(function(t){RT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oo[e]=oo[t]})});function dv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oo.hasOwnProperty(t)&&oo[t]?(""+e).trim():e+"px"}function fv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=dv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var PT=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ch(t,e){if(e){if(PT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function hh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dh=null;function Nd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fh=null,Ms=null,Fs=null;function cm(t){if(t=Yo(t)){if(typeof fh!="function")throw Error(G(280));var e=t.stateNode;e&&(e=yu(e),fh(t.stateNode,t.type,e))}}function pv(t){Ms?Fs?Fs.push(t):Fs=[t]:Ms=t}function mv(){if(Ms){var t=Ms,e=Fs;if(Fs=Ms=null,cm(t),e)for(t=0;t<e.length;t++)cm(e[t])}}function gv(t,e){return t(e)}function yv(){}var yc=!1;function vv(t,e,n){if(yc)return t(e,n);yc=!0;try{return gv(t,e,n)}finally{yc=!1,(Ms!==null||Fs!==null)&&(yv(),mv())}}function Ao(t,e){var n=t.stateNode;if(n===null)return null;var r=yu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var ph=!1;if(jn)try{var $i={};Object.defineProperty($i,"passive",{get:function(){ph=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{ph=!1}function kT(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var ao=!1,_l=null,El=!1,mh=null,xT={onError:function(t){ao=!0,_l=t}};function bT(t,e,n,r,s,i,o,l,u){ao=!1,_l=null,kT.apply(xT,arguments)}function DT(t,e,n,r,s,i,o,l,u){if(bT.apply(this,arguments),ao){if(ao){var h=_l;ao=!1,_l=null}else throw Error(G(198));El||(El=!0,mh=h)}}function ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _v(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hm(t){if(ds(t)!==t)throw Error(G(188))}function VT(t){var e=t.alternate;if(!e){if(e=ds(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return hm(s),t;if(i===r)return hm(s),e;i=i.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function Ev(t){return t=VT(t),t!==null?wv(t):null}function wv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wv(t);if(e!==null)return e;t=t.sibling}return null}var Tv=Ft.unstable_scheduleCallback,dm=Ft.unstable_cancelCallback,jT=Ft.unstable_shouldYield,LT=Ft.unstable_requestPaint,Fe=Ft.unstable_now,OT=Ft.unstable_getCurrentPriorityLevel,Rd=Ft.unstable_ImmediatePriority,Iv=Ft.unstable_UserBlockingPriority,wl=Ft.unstable_NormalPriority,MT=Ft.unstable_LowPriority,Sv=Ft.unstable_IdlePriority,fu=null,_n=null;function FT(t){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(fu,t,void 0,(t.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:qT,UT=Math.log,zT=Math.LN2;function qT(t){return t>>>=0,t===0?32:31-(UT(t)/zT|0)|0}var Ra=64,Pa=4194304;function to(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=to(l):(i&=o,i!==0&&(r=to(i)))}else o=n&~s,o!==0?r=to(o):i!==0&&(r=to(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-on(e),s=1<<n,r|=t[n],e&=~s;return r}function BT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $T(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-on(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=BT(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function gh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Av(){var t=Ra;return Ra<<=1,!(Ra&4194240)&&(Ra=64),t}function vc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-on(e),t[e]=n}function HT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-on(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Pd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-on(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function Cv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nv,kd,Rv,Pv,kv,yh=!1,ka=[],cr=null,hr=null,dr=null,Co=new Map,No=new Map,nr=[],WT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fm(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Co.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":No.delete(e.pointerId)}}function Hi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yo(e),e!==null&&kd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GT(t,e,n,r,s){switch(e){case"focusin":return cr=Hi(cr,t,e,n,r,s),!0;case"dragenter":return hr=Hi(hr,t,e,n,r,s),!0;case"mouseover":return dr=Hi(dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Co.set(i,Hi(Co.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,No.set(i,Hi(No.get(i)||null,t,e,n,r,s)),!0}return!1}function xv(t){var e=Hr(t.target);if(e!==null){var n=ds(e);if(n!==null){if(e=n.tag,e===13){if(e=_v(n),e!==null){t.blockedOn=e,kv(t.priority,function(){Rv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dh=r,n.target.dispatchEvent(r),dh=null}else return e=Yo(n),e!==null&&kd(e),t.blockedOn=n,!1;e.shift()}return!0}function pm(t,e,n){Xa(t)&&n.delete(e)}function KT(){yh=!1,cr!==null&&Xa(cr)&&(cr=null),hr!==null&&Xa(hr)&&(hr=null),dr!==null&&Xa(dr)&&(dr=null),Co.forEach(pm),No.forEach(pm)}function Wi(t,e){t.blockedOn===e&&(t.blockedOn=null,yh||(yh=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,KT)))}function Ro(t){function e(s){return Wi(s,t)}if(0<ka.length){Wi(ka[0],t);for(var n=1;n<ka.length;n++){var r=ka[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cr!==null&&Wi(cr,t),hr!==null&&Wi(hr,t),dr!==null&&Wi(dr,t),Co.forEach(e),No.forEach(e),n=0;n<nr.length;n++)r=nr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<nr.length&&(n=nr[0],n.blockedOn===null);)xv(n),n.blockedOn===null&&nr.shift()}var Us=Bn.ReactCurrentBatchConfig,Il=!0;function QT(t,e,n,r){var s=ve,i=Us.transition;Us.transition=null;try{ve=1,xd(t,e,n,r)}finally{ve=s,Us.transition=i}}function JT(t,e,n,r){var s=ve,i=Us.transition;Us.transition=null;try{ve=4,xd(t,e,n,r)}finally{ve=s,Us.transition=i}}function xd(t,e,n,r){if(Il){var s=vh(t,e,n,r);if(s===null)Rc(t,e,r,Sl,n),fm(t,r);else if(GT(s,t,e,n,r))r.stopPropagation();else if(fm(t,r),e&4&&-1<WT.indexOf(t)){for(;s!==null;){var i=Yo(s);if(i!==null&&Nv(i),i=vh(t,e,n,r),i===null&&Rc(t,e,r,Sl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Rc(t,e,r,null,n)}}var Sl=null;function vh(t,e,n,r){if(Sl=null,t=Nd(r),t=Hr(t),t!==null)if(e=ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_v(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sl=t,null}function bv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OT()){case Rd:return 1;case Iv:return 4;case wl:case MT:return 16;case Sv:return 536870912;default:return 16}default:return 16}}var ar=null,bd=null,Za=null;function Dv(){if(Za)return Za;var t,e=bd,n=e.length,r,s="value"in ar?ar.value:ar.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Za=s.slice(t,1<r?1-r:void 0)}function el(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xa(){return!0}function mm(){return!1}function zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xa:mm,this.isPropagationStopped=mm,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xa)},persist:function(){},isPersistent:xa}),e}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dd=zt(pi),Jo=be({},pi,{view:0,detail:0}),YT=zt(Jo),_c,Ec,Gi,pu=be({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gi&&(Gi&&t.type==="mousemove"?(_c=t.screenX-Gi.screenX,Ec=t.screenY-Gi.screenY):Ec=_c=0,Gi=t),_c)},movementY:function(t){return"movementY"in t?t.movementY:Ec}}),gm=zt(pu),XT=be({},pu,{dataTransfer:0}),ZT=zt(XT),eI=be({},Jo,{relatedTarget:0}),wc=zt(eI),tI=be({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),nI=zt(tI),rI=be({},pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sI=zt(rI),iI=be({},pi,{data:0}),ym=zt(iI),oI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lI[t])?!!e[t]:!1}function Vd(){return uI}var cI=be({},Jo,{key:function(t){if(t.key){var e=oI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=el(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vd,charCode:function(t){return t.type==="keypress"?el(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?el(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hI=zt(cI),dI=be({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vm=zt(dI),fI=be({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vd}),pI=zt(fI),mI=be({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),gI=zt(mI),yI=be({},pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vI=zt(yI),_I=[9,13,27,32],jd=jn&&"CompositionEvent"in window,lo=null;jn&&"documentMode"in document&&(lo=document.documentMode);var EI=jn&&"TextEvent"in window&&!lo,Vv=jn&&(!jd||lo&&8<lo&&11>=lo),_m=" ",Em=!1;function jv(t,e){switch(t){case"keyup":return _I.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ns=!1;function wI(t,e){switch(t){case"compositionend":return Lv(e);case"keypress":return e.which!==32?null:(Em=!0,_m);case"textInput":return t=e.data,t===_m&&Em?null:t;default:return null}}function TI(t,e){if(Ns)return t==="compositionend"||!jd&&jv(t,e)?(t=Dv(),Za=bd=ar=null,Ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vv&&e.locale!=="ko"?null:e.data;default:return null}}var II={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!II[t.type]:e==="textarea"}function Ov(t,e,n,r){pv(r),e=Al(e,"onChange"),0<e.length&&(n=new Dd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var uo=null,Po=null;function SI(t){Kv(t,0)}function mu(t){var e=ks(t);if(av(e))return t}function AI(t,e){if(t==="change")return e}var Mv=!1;if(jn){var Tc;if(jn){var Ic="oninput"in document;if(!Ic){var Tm=document.createElement("div");Tm.setAttribute("oninput","return;"),Ic=typeof Tm.oninput=="function"}Tc=Ic}else Tc=!1;Mv=Tc&&(!document.documentMode||9<document.documentMode)}function Im(){uo&&(uo.detachEvent("onpropertychange",Fv),Po=uo=null)}function Fv(t){if(t.propertyName==="value"&&mu(Po)){var e=[];Ov(e,Po,t,Nd(t)),vv(SI,e)}}function CI(t,e,n){t==="focusin"?(Im(),uo=e,Po=n,uo.attachEvent("onpropertychange",Fv)):t==="focusout"&&Im()}function NI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mu(Po)}function RI(t,e){if(t==="click")return mu(e)}function PI(t,e){if(t==="input"||t==="change")return mu(e)}function kI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:kI;function ko(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!eh.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function Sm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Am(t,e){var n=Sm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sm(n)}}function Uv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zv(){for(var t=window,e=vl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vl(t.document)}return e}function Ld(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xI(t){var e=zv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Uv(n.ownerDocument.documentElement,n)){if(r!==null&&Ld(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Am(n,i);var o=Am(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bI=jn&&"documentMode"in document&&11>=document.documentMode,Rs=null,_h=null,co=null,Eh=!1;function Cm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Eh||Rs==null||Rs!==vl(r)||(r=Rs,"selectionStart"in r&&Ld(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),co&&ko(co,r)||(co=r,r=Al(_h,"onSelect"),0<r.length&&(e=new Dd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rs)))}function ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ps={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},Sc={},qv={};jn&&(qv=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function gu(t){if(Sc[t])return Sc[t];if(!Ps[t])return t;var e=Ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qv)return Sc[t]=e[n];return t}var Bv=gu("animationend"),$v=gu("animationiteration"),Hv=gu("animationstart"),Wv=gu("transitionend"),Gv=new Map,Nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(t,e){Gv.set(t,e),hs(e,[t])}for(var Ac=0;Ac<Nm.length;Ac++){var Cc=Nm[Ac],DI=Cc.toLowerCase(),VI=Cc[0].toUpperCase()+Cc.slice(1);br(DI,"on"+VI)}br(Bv,"onAnimationEnd");br($v,"onAnimationIteration");br(Hv,"onAnimationStart");br("dblclick","onDoubleClick");br("focusin","onFocus");br("focusout","onBlur");br(Wv,"onTransitionEnd");Ys("onMouseEnter",["mouseout","mouseover"]);Ys("onMouseLeave",["mouseout","mouseover"]);Ys("onPointerEnter",["pointerout","pointerover"]);Ys("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jI=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function Rm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,DT(r,e,void 0,t),t.currentTarget=null}function Kv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Rm(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Rm(s,l,h),i=u}}}if(El)throw t=mh,El=!1,mh=null,t}function Ae(t,e){var n=e[Ah];n===void 0&&(n=e[Ah]=new Set);var r=t+"__bubble";n.has(r)||(Qv(e,t,2,!1),n.add(r))}function Nc(t,e,n){var r=0;e&&(r|=4),Qv(n,t,r,e)}var Da="_reactListening"+Math.random().toString(36).slice(2);function xo(t){if(!t[Da]){t[Da]=!0,nv.forEach(function(n){n!=="selectionchange"&&(jI.has(n)||Nc(n,!1,t),Nc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Da]||(e[Da]=!0,Nc("selectionchange",!1,e))}}function Qv(t,e,n,r){switch(bv(e)){case 1:var s=QT;break;case 4:s=JT;break;default:s=xd}n=s.bind(null,e,n,t),s=void 0,!ph||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Rc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Hr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}vv(function(){var h=i,p=Nd(n),m=[];e:{var g=Gv.get(t);if(g!==void 0){var S=Dd,k=t;switch(t){case"keypress":if(el(n)===0)break e;case"keydown":case"keyup":S=hI;break;case"focusin":k="focus",S=wc;break;case"focusout":k="blur",S=wc;break;case"beforeblur":case"afterblur":S=wc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=ZT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=pI;break;case Bv:case $v:case Hv:S=nI;break;case Wv:S=gI;break;case"scroll":S=YT;break;case"wheel":S=vI;break;case"copy":case"cut":case"paste":S=sI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=vm}var b=(e&4)!==0,O=!b&&t==="scroll",T=b?g!==null?g+"Capture":null:g;b=[];for(var v=h,C;v!==null;){C=v;var x=C.stateNode;if(C.tag===5&&x!==null&&(C=x,T!==null&&(x=Ao(v,T),x!=null&&b.push(bo(v,x,C)))),O)break;v=v.return}0<b.length&&(g=new S(g,k,null,n,p),m.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==dh&&(k=n.relatedTarget||n.fromElement)&&(Hr(k)||k[Ln]))break e;if((S||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,S?(k=n.relatedTarget||n.toElement,S=h,k=k?Hr(k):null,k!==null&&(O=ds(k),k!==O||k.tag!==5&&k.tag!==6)&&(k=null)):(S=null,k=h),S!==k)){if(b=gm,x="onMouseLeave",T="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=vm,x="onPointerLeave",T="onPointerEnter",v="pointer"),O=S==null?g:ks(S),C=k==null?g:ks(k),g=new b(x,v+"leave",S,n,p),g.target=O,g.relatedTarget=C,x=null,Hr(p)===h&&(b=new b(T,v+"enter",k,n,p),b.target=C,b.relatedTarget=O,x=b),O=x,S&&k)t:{for(b=S,T=k,v=0,C=b;C;C=_s(C))v++;for(C=0,x=T;x;x=_s(x))C++;for(;0<v-C;)b=_s(b),v--;for(;0<C-v;)T=_s(T),C--;for(;v--;){if(b===T||T!==null&&b===T.alternate)break t;b=_s(b),T=_s(T)}b=null}else b=null;S!==null&&Pm(m,g,S,b,!1),k!==null&&O!==null&&Pm(m,O,k,b,!0)}}e:{if(g=h?ks(h):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var U=AI;else if(wm(g))if(Mv)U=PI;else{U=NI;var V=CI}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=RI);if(U&&(U=U(t,h))){Ov(m,U,n,p);break e}V&&V(t,g,h),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&ah(g,"number",g.value)}switch(V=h?ks(h):window,t){case"focusin":(wm(V)||V.contentEditable==="true")&&(Rs=V,_h=h,co=null);break;case"focusout":co=_h=Rs=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,Cm(m,n,p);break;case"selectionchange":if(bI)break;case"keydown":case"keyup":Cm(m,n,p)}var _;if(jd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ns?jv(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Vv&&n.locale!=="ko"&&(Ns||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ns&&(_=Dv()):(ar=p,bd="value"in ar?ar.value:ar.textContent,Ns=!0)),V=Al(h,y),0<V.length&&(y=new ym(y,t,null,n,p),m.push({event:y,listeners:V}),_?y.data=_:(_=Lv(n),_!==null&&(y.data=_)))),(_=EI?wI(t,n):TI(t,n))&&(h=Al(h,"onBeforeInput"),0<h.length&&(p=new ym("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=_))}Kv(m,e)})}function bo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Al(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ao(t,n),i!=null&&r.unshift(bo(t,i,s)),i=Ao(t,e),i!=null&&r.push(bo(t,i,s))),t=t.return}return r}function _s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Ao(n,i),u!=null&&o.unshift(bo(n,u,l))):s||(u=Ao(n,i),u!=null&&o.push(bo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var LI=/\r\n?/g,OI=/\u0000|\uFFFD/g;function km(t){return(typeof t=="string"?t:""+t).replace(LI,`
`).replace(OI,"")}function Va(t,e,n){if(e=km(e),km(t)!==e&&n)throw Error(G(425))}function Cl(){}var wh=null,Th=null;function Ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sh=typeof setTimeout=="function"?setTimeout:void 0,MI=typeof clearTimeout=="function"?clearTimeout:void 0,xm=typeof Promise=="function"?Promise:void 0,FI=typeof queueMicrotask=="function"?queueMicrotask:typeof xm<"u"?function(t){return xm.resolve(null).then(t).catch(UI)}:Sh;function UI(t){setTimeout(function(){throw t})}function Pc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ro(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ro(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mi=Math.random().toString(36).slice(2),vn="__reactFiber$"+mi,Do="__reactProps$"+mi,Ln="__reactContainer$"+mi,Ah="__reactEvents$"+mi,zI="__reactListeners$"+mi,qI="__reactHandles$"+mi;function Hr(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ln]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bm(t);t!==null;){if(n=t[vn])return n;t=bm(t)}return e}t=n,n=t.parentNode}return null}function Yo(t){return t=t[vn]||t[Ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function yu(t){return t[Do]||null}var Ch=[],xs=-1;function Dr(t){return{current:t}}function Ne(t){0>xs||(t.current=Ch[xs],Ch[xs]=null,xs--)}function Ie(t,e){xs++,Ch[xs]=t.current,t.current=e}var Ar={},yt=Dr(Ar),kt=Dr(!1),Zr=Ar;function Xs(t,e){var n=t.type.contextTypes;if(!n)return Ar;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xt(t){return t=t.childContextTypes,t!=null}function Nl(){Ne(kt),Ne(yt)}function Dm(t,e,n){if(yt.current!==Ar)throw Error(G(168));Ie(yt,e),Ie(kt,n)}function Jv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,CT(t)||"Unknown",s));return be({},n,r)}function Rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ar,Zr=yt.current,Ie(yt,t),Ie(kt,kt.current),!0}function Vm(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=Jv(t,e,Zr),r.__reactInternalMemoizedMergedChildContext=t,Ne(kt),Ne(yt),Ie(yt,t)):Ne(kt),Ie(kt,n)}var Rn=null,vu=!1,kc=!1;function Yv(t){Rn===null?Rn=[t]:Rn.push(t)}function BI(t){vu=!0,Yv(t)}function Vr(){if(!kc&&Rn!==null){kc=!0;var t=0,e=ve;try{var n=Rn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rn=null,vu=!1}catch(s){throw Rn!==null&&(Rn=Rn.slice(t+1)),Tv(Rd,Vr),s}finally{ve=e,kc=!1}}return null}var bs=[],Ds=0,Pl=null,kl=0,Ht=[],Wt=0,es=null,kn=1,xn="";function qr(t,e){bs[Ds++]=kl,bs[Ds++]=Pl,Pl=t,kl=e}function Xv(t,e,n){Ht[Wt++]=kn,Ht[Wt++]=xn,Ht[Wt++]=es,es=t;var r=kn;t=xn;var s=32-on(r)-1;r&=~(1<<s),n+=1;var i=32-on(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kn=1<<32-on(e)+s|n<<s|r,xn=i+t}else kn=1<<i|n<<s|r,xn=t}function Od(t){t.return!==null&&(qr(t,1),Xv(t,1,0))}function Md(t){for(;t===Pl;)Pl=bs[--Ds],bs[Ds]=null,kl=bs[--Ds],bs[Ds]=null;for(;t===es;)es=Ht[--Wt],Ht[Wt]=null,xn=Ht[--Wt],Ht[Wt]=null,kn=Ht[--Wt],Ht[Wt]=null}var Mt=null,jt=null,Pe=!1,nn=null;function Zv(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,jt=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=es!==null?{id:kn,overflow:xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,jt=null,!0):!1;default:return!1}}function Nh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rh(t){if(Pe){var e=jt;if(e){var n=e;if(!jm(t,e)){if(Nh(t))throw Error(G(418));e=fr(n.nextSibling);var r=Mt;e&&jm(t,e)?Zv(r,n):(t.flags=t.flags&-4097|2,Pe=!1,Mt=t)}}else{if(Nh(t))throw Error(G(418));t.flags=t.flags&-4097|2,Pe=!1,Mt=t}}}function Lm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function ja(t){if(t!==Mt)return!1;if(!Pe)return Lm(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ih(t.type,t.memoizedProps)),e&&(e=jt)){if(Nh(t))throw e_(),Error(G(418));for(;e;)Zv(t,e),e=fr(e.nextSibling)}if(Lm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Mt?fr(t.stateNode.nextSibling):null;return!0}function e_(){for(var t=jt;t;)t=fr(t.nextSibling)}function Zs(){jt=Mt=null,Pe=!1}function Fd(t){nn===null?nn=[t]:nn.push(t)}var $I=Bn.ReactCurrentBatchConfig;function Ki(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function La(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Om(t){var e=t._init;return e(t._payload)}function t_(t){function e(T,v){if(t){var C=T.deletions;C===null?(T.deletions=[v],T.flags|=16):C.push(v)}}function n(T,v){if(!t)return null;for(;v!==null;)e(T,v),v=v.sibling;return null}function r(T,v){for(T=new Map;v!==null;)v.key!==null?T.set(v.key,v):T.set(v.index,v),v=v.sibling;return T}function s(T,v){return T=yr(T,v),T.index=0,T.sibling=null,T}function i(T,v,C){return T.index=C,t?(C=T.alternate,C!==null?(C=C.index,C<v?(T.flags|=2,v):C):(T.flags|=2,v)):(T.flags|=1048576,v)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,v,C,x){return v===null||v.tag!==6?(v=Oc(C,T.mode,x),v.return=T,v):(v=s(v,C),v.return=T,v)}function u(T,v,C,x){var U=C.type;return U===Cs?p(T,v,C.props.children,x,C.key):v!==null&&(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===er&&Om(U)===v.type)?(x=s(v,C.props),x.ref=Ki(T,v,C),x.return=T,x):(x=al(C.type,C.key,C.props,null,T.mode,x),x.ref=Ki(T,v,C),x.return=T,x)}function h(T,v,C,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==C.containerInfo||v.stateNode.implementation!==C.implementation?(v=Mc(C,T.mode,x),v.return=T,v):(v=s(v,C.children||[]),v.return=T,v)}function p(T,v,C,x,U){return v===null||v.tag!==7?(v=Yr(C,T.mode,x,U),v.return=T,v):(v=s(v,C),v.return=T,v)}function m(T,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Oc(""+v,T.mode,C),v.return=T,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Aa:return C=al(v.type,v.key,v.props,null,T.mode,C),C.ref=Ki(T,null,v),C.return=T,C;case As:return v=Mc(v,T.mode,C),v.return=T,v;case er:var x=v._init;return m(T,x(v._payload),C)}if(eo(v)||Bi(v))return v=Yr(v,T.mode,C,null),v.return=T,v;La(T,v)}return null}function g(T,v,C,x){var U=v!==null?v.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return U!==null?null:l(T,v,""+C,x);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Aa:return C.key===U?u(T,v,C,x):null;case As:return C.key===U?h(T,v,C,x):null;case er:return U=C._init,g(T,v,U(C._payload),x)}if(eo(C)||Bi(C))return U!==null?null:p(T,v,C,x,null);La(T,C)}return null}function S(T,v,C,x,U){if(typeof x=="string"&&x!==""||typeof x=="number")return T=T.get(C)||null,l(v,T,""+x,U);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Aa:return T=T.get(x.key===null?C:x.key)||null,u(v,T,x,U);case As:return T=T.get(x.key===null?C:x.key)||null,h(v,T,x,U);case er:var V=x._init;return S(T,v,C,V(x._payload),U)}if(eo(x)||Bi(x))return T=T.get(C)||null,p(v,T,x,U,null);La(v,x)}return null}function k(T,v,C,x){for(var U=null,V=null,_=v,y=v=0,E=null;_!==null&&y<C.length;y++){_.index>y?(E=_,_=null):E=_.sibling;var N=g(T,_,C[y],x);if(N===null){_===null&&(_=E);break}t&&_&&N.alternate===null&&e(T,_),v=i(N,v,y),V===null?U=N:V.sibling=N,V=N,_=E}if(y===C.length)return n(T,_),Pe&&qr(T,y),U;if(_===null){for(;y<C.length;y++)_=m(T,C[y],x),_!==null&&(v=i(_,v,y),V===null?U=_:V.sibling=_,V=_);return Pe&&qr(T,y),U}for(_=r(T,_);y<C.length;y++)E=S(_,T,y,C[y],x),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?y:E.key),v=i(E,v,y),V===null?U=E:V.sibling=E,V=E);return t&&_.forEach(function(A){return e(T,A)}),Pe&&qr(T,y),U}function b(T,v,C,x){var U=Bi(C);if(typeof U!="function")throw Error(G(150));if(C=U.call(C),C==null)throw Error(G(151));for(var V=U=null,_=v,y=v=0,E=null,N=C.next();_!==null&&!N.done;y++,N=C.next()){_.index>y?(E=_,_=null):E=_.sibling;var A=g(T,_,N.value,x);if(A===null){_===null&&(_=E);break}t&&_&&A.alternate===null&&e(T,_),v=i(A,v,y),V===null?U=A:V.sibling=A,V=A,_=E}if(N.done)return n(T,_),Pe&&qr(T,y),U;if(_===null){for(;!N.done;y++,N=C.next())N=m(T,N.value,x),N!==null&&(v=i(N,v,y),V===null?U=N:V.sibling=N,V=N);return Pe&&qr(T,y),U}for(_=r(T,_);!N.done;y++,N=C.next())N=S(_,T,y,N.value,x),N!==null&&(t&&N.alternate!==null&&_.delete(N.key===null?y:N.key),v=i(N,v,y),V===null?U=N:V.sibling=N,V=N);return t&&_.forEach(function(P){return e(T,P)}),Pe&&qr(T,y),U}function O(T,v,C,x){if(typeof C=="object"&&C!==null&&C.type===Cs&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Aa:e:{for(var U=C.key,V=v;V!==null;){if(V.key===U){if(U=C.type,U===Cs){if(V.tag===7){n(T,V.sibling),v=s(V,C.props.children),v.return=T,T=v;break e}}else if(V.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===er&&Om(U)===V.type){n(T,V.sibling),v=s(V,C.props),v.ref=Ki(T,V,C),v.return=T,T=v;break e}n(T,V);break}else e(T,V);V=V.sibling}C.type===Cs?(v=Yr(C.props.children,T.mode,x,C.key),v.return=T,T=v):(x=al(C.type,C.key,C.props,null,T.mode,x),x.ref=Ki(T,v,C),x.return=T,T=x)}return o(T);case As:e:{for(V=C.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===C.containerInfo&&v.stateNode.implementation===C.implementation){n(T,v.sibling),v=s(v,C.children||[]),v.return=T,T=v;break e}else{n(T,v);break}else e(T,v);v=v.sibling}v=Mc(C,T.mode,x),v.return=T,T=v}return o(T);case er:return V=C._init,O(T,v,V(C._payload),x)}if(eo(C))return k(T,v,C,x);if(Bi(C))return b(T,v,C,x);La(T,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,v!==null&&v.tag===6?(n(T,v.sibling),v=s(v,C),v.return=T,T=v):(n(T,v),v=Oc(C,T.mode,x),v.return=T,T=v),o(T)):n(T,v)}return O}var ei=t_(!0),n_=t_(!1),xl=Dr(null),bl=null,Vs=null,Ud=null;function zd(){Ud=Vs=bl=null}function qd(t){var e=xl.current;Ne(xl),t._currentValue=e}function Ph(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zs(t,e){bl=t,Ud=Vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(Ud!==t)if(t={context:t,memoizedValue:e,next:null},Vs===null){if(bl===null)throw Error(G(308));Vs=t,bl.dependencies={lanes:0,firstContext:t}}else Vs=Vs.next=t;return e}var Wr=null;function Bd(t){Wr===null?Wr=[t]:Wr.push(t)}function r_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Bd(e)):(n.next=s.next,s.next=n),e.interleaved=n,On(t,r)}function On(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var tr=!1;function $d(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,On(t,n)}return s=r.interleaved,s===null?(e.next=e,Bd(r)):(e.next=s.next,s.next=e),r.interleaved=e,On(t,n)}function tl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pd(t,n)}}function Mm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dl(t,e,n,r){var s=t.updateQueue;tr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=h=u=null,l=i;do{var g=l.lane,S=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,b=l;switch(g=e,S=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){m=k.call(S,m,g);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,g=typeof k=="function"?k.call(S,m,g):k,g==null)break e;m=be({},m,g);break e;case 2:tr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=S,u=m):p=p.next=S,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ns|=o,t.lanes=o,t.memoizedState=m}}function Fm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var Xo={},En=Dr(Xo),Vo=Dr(Xo),jo=Dr(Xo);function Gr(t){if(t===Xo)throw Error(G(174));return t}function Hd(t,e){switch(Ie(jo,e),Ie(Vo,t),Ie(En,Xo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uh(e,t)}Ne(En),Ie(En,e)}function ti(){Ne(En),Ne(Vo),Ne(jo)}function i_(t){Gr(jo.current);var e=Gr(En.current),n=uh(e,t.type);e!==n&&(Ie(Vo,t),Ie(En,n))}function Wd(t){Vo.current===t&&(Ne(En),Ne(Vo))}var ke=Dr(0);function Vl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xc=[];function Gd(){for(var t=0;t<xc.length;t++)xc[t]._workInProgressVersionPrimary=null;xc.length=0}var nl=Bn.ReactCurrentDispatcher,bc=Bn.ReactCurrentBatchConfig,ts=0,xe=null,Je=null,nt=null,jl=!1,ho=!1,Lo=0,HI=0;function ht(){throw Error(G(321))}function Kd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function Qd(t,e,n,r,s,i){if(ts=i,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nl.current=t===null||t.memoizedState===null?QI:JI,t=n(r,s),ho){i=0;do{if(ho=!1,Lo=0,25<=i)throw Error(G(301));i+=1,nt=Je=null,e.updateQueue=null,nl.current=YI,t=n(r,s)}while(ho)}if(nl.current=Ll,e=Je!==null&&Je.next!==null,ts=0,nt=Je=xe=null,jl=!1,e)throw Error(G(300));return t}function Jd(){var t=Lo!==0;return Lo=0,t}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?xe.memoizedState=nt=t:nt=nt.next=t,nt}function Yt(){if(Je===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=nt===null?xe.memoizedState:nt.next;if(e!==null)nt=e,Je=t;else{if(t===null)throw Error(G(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},nt===null?xe.memoizedState=nt=t:nt=nt.next=t}return nt}function Oo(t,e){return typeof e=="function"?e(t):e}function Dc(t){var e=Yt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=Je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var p=h.lane;if((ts&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,xe.lanes|=p,ns|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,hn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,xe.lanes|=i,ns|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vc(t){var e=Yt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);hn(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function o_(){}function a_(t,e){var n=xe,r=Yt(),s=e(),i=!hn(r.memoizedState,s);if(i&&(r.memoizedState=s,Pt=!0),r=r.queue,Yd(c_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,Mo(9,u_.bind(null,n,r,s,e),void 0,null),rt===null)throw Error(G(349));ts&30||l_(n,e,s)}return s}function l_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function u_(t,e,n,r){e.value=n,e.getSnapshot=r,h_(e)&&d_(t)}function c_(t,e,n){return n(function(){h_(e)&&d_(t)})}function h_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function d_(t){var e=On(t,1);e!==null&&an(e,t,1,-1)}function Um(t){var e=gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},e.queue=t,t=t.dispatch=KI.bind(null,xe,t),[e.memoizedState,t]}function Mo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function f_(){return Yt().memoizedState}function rl(t,e,n,r){var s=gn();xe.flags|=t,s.memoizedState=Mo(1|e,n,void 0,r===void 0?null:r)}function _u(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,r!==null&&Kd(r,o.deps)){s.memoizedState=Mo(e,n,i,r);return}}xe.flags|=t,s.memoizedState=Mo(1|e,n,i,r)}function zm(t,e){return rl(8390656,8,t,e)}function Yd(t,e){return _u(2048,8,t,e)}function p_(t,e){return _u(4,2,t,e)}function m_(t,e){return _u(4,4,t,e)}function g_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function y_(t,e,n){return n=n!=null?n.concat([t]):null,_u(4,4,g_.bind(null,e,t),n)}function Xd(){}function v_(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function __(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function E_(t,e,n){return ts&21?(hn(n,e)||(n=Av(),xe.lanes|=n,ns|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function WI(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=bc.transition;bc.transition={};try{t(!1),e()}finally{ve=n,bc.transition=r}}function w_(){return Yt().memoizedState}function GI(t,e,n){var r=gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},T_(t))I_(e,n);else if(n=r_(t,e,n,r),n!==null){var s=wt();an(n,t,r,s),S_(n,e,r)}}function KI(t,e,n){var r=gr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(T_(t))I_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,hn(l,o)){var u=e.interleaved;u===null?(s.next=s,Bd(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=r_(t,e,s,r),n!==null&&(s=wt(),an(n,t,r,s),S_(n,e,r))}}function T_(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function I_(t,e){ho=jl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function S_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pd(t,n)}}var Ll={readContext:Jt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},QI={readContext:Jt,useCallback:function(t,e){return gn().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:zm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rl(4194308,4,g_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rl(4194308,4,t,e)},useInsertionEffect:function(t,e){return rl(4,2,t,e)},useMemo:function(t,e){var n=gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=GI.bind(null,xe,t),[r.memoizedState,t]},useRef:function(t){var e=gn();return t={current:t},e.memoizedState=t},useState:Um,useDebugValue:Xd,useDeferredValue:function(t){return gn().memoizedState=t},useTransition:function(){var t=Um(!1),e=t[0];return t=WI.bind(null,t[1]),gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xe,s=gn();if(Pe){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),rt===null)throw Error(G(349));ts&30||l_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,zm(c_.bind(null,r,i,t),[t]),r.flags|=2048,Mo(9,u_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=gn(),e=rt.identifierPrefix;if(Pe){var n=xn,r=kn;n=(r&~(1<<32-on(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=HI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},JI={readContext:Jt,useCallback:v_,useContext:Jt,useEffect:Yd,useImperativeHandle:y_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:__,useReducer:Dc,useRef:f_,useState:function(){return Dc(Oo)},useDebugValue:Xd,useDeferredValue:function(t){var e=Yt();return E_(e,Je.memoizedState,t)},useTransition:function(){var t=Dc(Oo)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:o_,useSyncExternalStore:a_,useId:w_,unstable_isNewReconciler:!1},YI={readContext:Jt,useCallback:v_,useContext:Jt,useEffect:Yd,useImperativeHandle:y_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:__,useReducer:Vc,useRef:f_,useState:function(){return Vc(Oo)},useDebugValue:Xd,useDeferredValue:function(t){var e=Yt();return Je===null?e.memoizedState=t:E_(e,Je.memoizedState,t)},useTransition:function(){var t=Vc(Oo)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:o_,useSyncExternalStore:a_,useId:w_,unstable_isNewReconciler:!1};function en(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Eu={isMounted:function(t){return(t=t._reactInternals)?ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=gr(t),i=Vn(r,s);i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,s),e!==null&&(an(e,t,s,r),tl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=gr(t),i=Vn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,s),e!==null&&(an(e,t,s,r),tl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=gr(t),s=Vn(n,r);s.tag=2,e!=null&&(s.callback=e),e=pr(t,s,r),e!==null&&(an(e,t,r,n),tl(e,t,r))}};function qm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ko(n,r)||!ko(s,i):!0}function A_(t,e,n){var r=!1,s=Ar,i=e.contextType;return typeof i=="object"&&i!==null?i=Jt(i):(s=xt(e)?Zr:yt.current,r=e.contextTypes,i=(r=r!=null)?Xs(t,s):Ar),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Bm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Eu.enqueueReplaceState(e,e.state,null)}function xh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},$d(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Jt(i):(i=xt(e)?Zr:yt.current,s.context=Xs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(kh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Eu.enqueueReplaceState(s,s.state,null),Dl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ni(t,e){try{var n="",r=e;do n+=AT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var XI=typeof WeakMap=="function"?WeakMap:Map;function C_(t,e,n){n=Vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ml||(Ml=!0,qh=r),bh(t,e)},n}function N_(t,e,n){n=Vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bh(t,e),typeof r!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $m(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new XI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=dS.bind(null,t,e,n),e.then(t,t))}function Hm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vn(-1,1),e.tag=2,pr(n,e,1))),n.lanes|=1),t)}var ZI=Bn.ReactCurrentOwner,Pt=!1;function Et(t,e,n,r){e.child=t===null?n_(e,null,n,r):ei(e,t.child,n,r)}function Gm(t,e,n,r,s){n=n.render;var i=e.ref;return zs(e,s),r=Qd(t,e,n,r,i,s),n=Jd(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(Pe&&n&&Od(e),e.flags|=1,Et(t,e,r,s),e.child)}function Km(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!af(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,R_(t,e,i,r,s)):(t=al(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ko,n(o,r)&&t.ref===e.ref)return Mn(t,e,s)}return e.flags|=1,t=yr(i,r),t.ref=e.ref,t.return=e,e.child=t}function R_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ko(i,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,Mn(t,e,s)}return Dh(t,e,n,r,s)}function P_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Ls,Vt),Vt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Ls,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(Ls,Vt),Vt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(Ls,Vt),Vt|=r;return Et(t,e,s,n),e.child}function k_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dh(t,e,n,r,s){var i=xt(n)?Zr:yt.current;return i=Xs(e,i),zs(e,s),n=Qd(t,e,n,r,i,s),r=Jd(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(Pe&&r&&Od(e),e.flags|=1,Et(t,e,n,s),e.child)}function Qm(t,e,n,r,s){if(xt(n)){var i=!0;Rl(e)}else i=!1;if(zs(e,s),e.stateNode===null)sl(t,e),A_(e,n,r),xh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Jt(h):(h=xt(n)?Zr:yt.current,h=Xs(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Bm(e,o,r,h),tr=!1;var g=e.memoizedState;o.state=g,Dl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||kt.current||tr?(typeof p=="function"&&(kh(e,n,p,r),u=e.memoizedState),(l=tr||qm(e,n,l,r,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,s_(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:en(e.type,l),o.props=h,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Jt(u):(u=xt(n)?Zr:yt.current,u=Xs(e,u));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Bm(e,o,r,u),tr=!1,g=e.memoizedState,o.state=g,Dl(e,r,o,s);var k=e.memoizedState;l!==m||g!==k||kt.current||tr?(typeof S=="function"&&(kh(e,n,S,r),k=e.memoizedState),(h=tr||qm(e,n,h,r,g,k,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Vh(t,e,n,r,i,s)}function Vh(t,e,n,r,s,i){k_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Vm(e,n,!1),Mn(t,e,i);r=e.stateNode,ZI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ei(e,t.child,null,i),e.child=ei(e,null,l,i)):Et(t,e,l,i),e.memoizedState=r.state,s&&Vm(e,n,!0),e.child}function x_(t){var e=t.stateNode;e.pendingContext?Dm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dm(t,e.context,!1),Hd(t,e.containerInfo)}function Jm(t,e,n,r,s){return Zs(),Fd(s),e.flags|=256,Et(t,e,n,r),e.child}var jh={dehydrated:null,treeContext:null,retryLane:0};function Lh(t){return{baseLanes:t,cachePool:null,transitions:null}}function b_(t,e,n){var r=e.pendingProps,s=ke.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(ke,s&1),t===null)return Rh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Iu(o,r,0,null),t=Yr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Lh(n),e.memoizedState=jh,t):Zd(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return eS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=yr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=yr(l,i):(i=Yr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Lh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=jh,r}return i=t.child,t=i.sibling,r=yr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zd(t,e){return e=Iu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oa(t,e,n,r){return r!==null&&Fd(r),ei(e,t.child,null,n),t=Zd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=jc(Error(G(422))),Oa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Iu({mode:"visible",children:r.children},s,0,null),i=Yr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ei(e,t.child,null,o),e.child.memoizedState=Lh(o),e.memoizedState=jh,i);if(!(e.mode&1))return Oa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(G(419)),r=jc(i,r,void 0),Oa(t,e,o,r)}if(l=(o&t.childLanes)!==0,Pt||l){if(r=rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,On(t,s),an(r,t,s,-1))}return of(),r=jc(Error(G(421))),Oa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,jt=fr(s.nextSibling),Mt=e,Pe=!0,nn=null,t!==null&&(Ht[Wt++]=kn,Ht[Wt++]=xn,Ht[Wt++]=es,kn=t.id,xn=t.overflow,es=e),e=Zd(e,r.children),e.flags|=4096,e)}function Ym(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ph(t.return,e,n)}function Lc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function D_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Et(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ym(t,n,e);else if(t.tag===19)Ym(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Vl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Lc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Lc(e,!0,n,null,i);break;case"together":Lc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ns|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tS(t,e,n){switch(e.tag){case 3:x_(e),Zs();break;case 5:i_(e);break;case 1:xt(e.type)&&Rl(e);break;case 4:Hd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(xl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?b_(t,e,n):(Ie(ke,ke.current&1),t=Mn(t,e,n),t!==null?t.sibling:null);Ie(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return D_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,P_(t,e,n)}return Mn(t,e,n)}var V_,Oh,j_,L_;V_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Oh=function(){};j_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gr(En.current);var i=null;switch(n){case"input":s=ih(t,s),r=ih(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=lh(t,s),r=lh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cl)}ch(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Io.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Io.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ae("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};L_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qi(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nS(t,e,n){var r=e.pendingProps;switch(Md(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return xt(e.type)&&Nl(),dt(e),null;case 3:return r=e.stateNode,ti(),Ne(kt),Ne(yt),Gd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(Hh(nn),nn=null))),Oh(t,e),dt(e),null;case 5:Wd(e);var s=Gr(jo.current);if(n=e.type,t!==null&&e.stateNode!=null)j_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return dt(e),null}if(t=Gr(En.current),ja(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[vn]=e,r[Do]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<no.length;s++)Ae(no[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":om(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":lm(r,i),Ae("invalid",r)}ch(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Va(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Va(r.textContent,l,t),s=["children",""+l]):Io.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Ca(r),am(r,i,!0);break;case"textarea":Ca(r),um(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Cl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vn]=e,t[Do]=r,V_(t,e,!1,!1),e.stateNode=t;e:{switch(o=hh(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),s=r;break;case"iframe":case"object":case"embed":Ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<no.length;s++)Ae(no[s],t);s=r;break;case"source":Ae("error",t),s=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),s=r;break;case"details":Ae("toggle",t),s=r;break;case"input":om(t,r),s=ih(t,r),Ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":lm(t,r),s=lh(t,r),Ae("invalid",t);break;default:s=r}ch(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?fv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&hv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&So(t,u):typeof u=="number"&&So(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Io.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ae("scroll",t):u!=null&&Id(t,i,u,o))}switch(n){case"input":Ca(t),am(t,r,!1);break;case"textarea":Ca(t),um(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Os(t,!!r.multiple,i,!1):r.defaultValue!=null&&Os(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Cl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)L_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Gr(jo.current),Gr(En.current),ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(i=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:Va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Va(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return dt(e),null;case 13:if(Ne(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&jt!==null&&e.mode&1&&!(e.flags&128))e_(),Zs(),e.flags|=98560,i=!1;else if(i=ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[vn]=e}else Zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else nn!==null&&(Hh(nn),nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Ye===0&&(Ye=3):of())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return ti(),Oh(t,e),t===null&&xo(e.stateNode.containerInfo),dt(e),null;case 10:return qd(e.type._context),dt(e),null;case 17:return xt(e.type)&&Nl(),dt(e),null;case 19:if(Ne(ke),i=e.memoizedState,i===null)return dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Qi(i,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vl(t),o!==null){for(e.flags|=128,Qi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(ke,ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>ri&&(e.flags|=128,r=!0,Qi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Vl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return dt(e),null}else 2*Fe()-i.renderingStartTime>ri&&n!==1073741824&&(e.flags|=128,r=!0,Qi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=ke.current,Ie(ke,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return sf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function rS(t,e){switch(Md(e),e.tag){case 1:return xt(e.type)&&Nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ti(),Ne(kt),Ne(yt),Gd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wd(e),null;case 13:if(Ne(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(ke),null;case 4:return ti(),null;case 10:return qd(e.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Ma=!1,mt=!1,sS=typeof WeakSet=="function"?WeakSet:Set,Z=null;function js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function Mh(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var Xm=!1;function iS(t,e){if(wh=Il,t=zv(),Ld(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var S;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)g=m,m=S;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=o),g===i&&++p===r&&(u=o),(S=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Th={focusedElem:t,selectionRange:n},Il=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,O=k.memoizedState,T=e.stateNode,v=T.getSnapshotBeforeUpdate(e.elementType===e.type?b:en(e.type,b),O);T.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(x){Oe(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return k=Xm,Xm=!1,k}function fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mh(e,n,i)}s=s.next}while(s!==r)}}function wu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function O_(t){var e=t.alternate;e!==null&&(t.alternate=null,O_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[Do],delete e[Ah],delete e[zI],delete e[qI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function M_(t){return t.tag===5||t.tag===3||t.tag===4}function Zm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cl));else if(r!==4&&(t=t.child,t!==null))for(Uh(t,e,n),t=t.sibling;t!==null;)Uh(t,e,n),t=t.sibling}function zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zh(t,e,n),t=t.sibling;t!==null;)zh(t,e,n),t=t.sibling}var st=null,tn=!1;function Yn(t,e,n){for(n=n.child;n!==null;)F_(t,e,n),n=n.sibling}function F_(t,e,n){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(fu,n)}catch{}switch(n.tag){case 5:mt||js(n,e);case 6:var r=st,s=tn;st=null,Yn(t,e,n),st=r,tn=s,st!==null&&(tn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(tn?(t=st,n=n.stateNode,t.nodeType===8?Pc(t.parentNode,n):t.nodeType===1&&Pc(t,n),Ro(t)):Pc(st,n.stateNode));break;case 4:r=st,s=tn,st=n.stateNode.containerInfo,tn=!0,Yn(t,e,n),st=r,tn=s;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Mh(n,e,o),s=s.next}while(s!==r)}Yn(t,e,n);break;case 1:if(!mt&&(js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Oe(n,e,l)}Yn(t,e,n);break;case 21:Yn(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,Yn(t,e,n),mt=r):Yn(t,e,n);break;default:Yn(t,e,n)}}function eg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sS),e.forEach(function(r){var s=pS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,tn=!1;break e;case 3:st=l.stateNode.containerInfo,tn=!0;break e;case 4:st=l.stateNode.containerInfo,tn=!0;break e}l=l.return}if(st===null)throw Error(G(160));F_(i,o,s),st=null,tn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Oe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U_(e,t),e=e.sibling}function U_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),mn(t),r&4){try{fo(3,t,t.return),wu(3,t)}catch(b){Oe(t,t.return,b)}try{fo(5,t,t.return)}catch(b){Oe(t,t.return,b)}}break;case 1:Zt(e,t),mn(t),r&512&&n!==null&&js(n,n.return);break;case 5:if(Zt(e,t),mn(t),r&512&&n!==null&&js(n,n.return),t.flags&32){var s=t.stateNode;try{So(s,"")}catch(b){Oe(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&lv(s,i),hh(l,o);var h=hh(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?fv(s,m):p==="dangerouslySetInnerHTML"?hv(s,m):p==="children"?So(s,m):Id(s,p,m,h)}switch(l){case"input":oh(s,i);break;case"textarea":uv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Os(s,!!i.multiple,S,!1):g!==!!i.multiple&&(i.defaultValue!=null?Os(s,!!i.multiple,i.defaultValue,!0):Os(s,!!i.multiple,i.multiple?[]:"",!1))}s[Do]=i}catch(b){Oe(t,t.return,b)}}break;case 6:if(Zt(e,t),mn(t),r&4){if(t.stateNode===null)throw Error(G(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Oe(t,t.return,b)}}break;case 3:if(Zt(e,t),mn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ro(e.containerInfo)}catch(b){Oe(t,t.return,b)}break;case 4:Zt(e,t),mn(t);break;case 13:Zt(e,t),mn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(nf=Fe())),r&4&&eg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(h=mt)||p,Zt(e,t),mt=h):Zt(e,t),mn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Z=t,p=t.child;p!==null;){for(m=Z=p;Z!==null;){switch(g=Z,S=g.child,g.tag){case 0:case 11:case 14:case 15:fo(4,g,g.return);break;case 1:js(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(b){Oe(r,n,b)}}break;case 5:js(g,g.return);break;case 22:if(g.memoizedState!==null){ng(m);continue}}S!==null?(S.return=g,Z=S):ng(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=dv("display",o))}catch(b){Oe(t,t.return,b)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(b){Oe(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Zt(e,t),mn(t),r&4&&eg(t);break;case 21:break;default:Zt(e,t),mn(t)}}function mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(M_(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(So(s,""),r.flags&=-33);var i=Zm(t);zh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Zm(t);Uh(t,l,o);break;default:throw Error(G(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oS(t,e,n){Z=t,z_(t)}function z_(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ma;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||mt;l=Ma;var h=mt;if(Ma=o,(mt=u)&&!h)for(Z=s;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?rg(s):u!==null?(u.return=o,Z=u):rg(s);for(;i!==null;)Z=i,z_(i),i=i.sibling;Z=s,Ma=l,mt=h}tg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):tg(t)}}function tg(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||wu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:en(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Fm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Ro(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}mt||e.flags&512&&Fh(e)}catch(g){Oe(e,e.return,g)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function ng(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function rg(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wu(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Oe(e,s,u)}}var i=e.return;try{Fh(e)}catch(u){Oe(e,i,u)}break;case 5:var o=e.return;try{Fh(e)}catch(u){Oe(e,o,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){Z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Z=l;break}Z=e.return}}var aS=Math.ceil,Ol=Bn.ReactCurrentDispatcher,ef=Bn.ReactCurrentOwner,Qt=Bn.ReactCurrentBatchConfig,ge=0,rt=null,$e=null,at=0,Vt=0,Ls=Dr(0),Ye=0,Fo=null,ns=0,Tu=0,tf=0,po=null,Nt=null,nf=0,ri=1/0,Nn=null,Ml=!1,qh=null,mr=null,Fa=!1,lr=null,Fl=0,mo=0,Bh=null,il=-1,ol=0;function wt(){return ge&6?Fe():il!==-1?il:il=Fe()}function gr(t){return t.mode&1?ge&2&&at!==0?at&-at:$I.transition!==null?(ol===0&&(ol=Av()),ol):(t=ve,t!==0||(t=window.event,t=t===void 0?16:bv(t.type)),t):1}function an(t,e,n,r){if(50<mo)throw mo=0,Bh=null,Error(G(185));Qo(t,n,r),(!(ge&2)||t!==rt)&&(t===rt&&(!(ge&2)&&(Tu|=n),Ye===4&&rr(t,at)),bt(t,r),n===1&&ge===0&&!(e.mode&1)&&(ri=Fe()+500,vu&&Vr()))}function bt(t,e){var n=t.callbackNode;$T(t,e);var r=Tl(t,t===rt?at:0);if(r===0)n!==null&&dm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dm(n),e===1)t.tag===0?BI(sg.bind(null,t)):Yv(sg.bind(null,t)),FI(function(){!(ge&6)&&Vr()}),n=null;else{switch(Cv(r)){case 1:n=Rd;break;case 4:n=Iv;break;case 16:n=wl;break;case 536870912:n=Sv;break;default:n=wl}n=Q_(n,q_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function q_(t,e){if(il=-1,ol=0,ge&6)throw Error(G(327));var n=t.callbackNode;if(qs()&&t.callbackNode!==n)return null;var r=Tl(t,t===rt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ul(t,r);else{e=r;var s=ge;ge|=2;var i=$_();(rt!==t||at!==e)&&(Nn=null,ri=Fe()+500,Jr(t,e));do try{cS();break}catch(l){B_(t,l)}while(!0);zd(),Ol.current=i,ge=s,$e!==null?e=0:(rt=null,at=0,e=Ye)}if(e!==0){if(e===2&&(s=gh(t),s!==0&&(r=s,e=$h(t,s))),e===1)throw n=Fo,Jr(t,0),rr(t,r),bt(t,Fe()),n;if(e===6)rr(t,r);else{if(s=t.current.alternate,!(r&30)&&!lS(s)&&(e=Ul(t,r),e===2&&(i=gh(t),i!==0&&(r=i,e=$h(t,i))),e===1))throw n=Fo,Jr(t,0),rr(t,r),bt(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Br(t,Nt,Nn);break;case 3:if(rr(t,r),(r&130023424)===r&&(e=nf+500-Fe(),10<e)){if(Tl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Sh(Br.bind(null,t,Nt,Nn),e);break}Br(t,Nt,Nn);break;case 4:if(rr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-on(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aS(r/1960))-r,10<r){t.timeoutHandle=Sh(Br.bind(null,t,Nt,Nn),r);break}Br(t,Nt,Nn);break;case 5:Br(t,Nt,Nn);break;default:throw Error(G(329))}}}return bt(t,Fe()),t.callbackNode===n?q_.bind(null,t):null}function $h(t,e){var n=po;return t.current.memoizedState.isDehydrated&&(Jr(t,e).flags|=256),t=Ul(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&Hh(e)),t}function Hh(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function lS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rr(t,e){for(e&=~tf,e&=~Tu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-on(e),r=1<<n;t[n]=-1,e&=~r}}function sg(t){if(ge&6)throw Error(G(327));qs();var e=Tl(t,0);if(!(e&1))return bt(t,Fe()),null;var n=Ul(t,e);if(t.tag!==0&&n===2){var r=gh(t);r!==0&&(e=r,n=$h(t,r))}if(n===1)throw n=Fo,Jr(t,0),rr(t,e),bt(t,Fe()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Br(t,Nt,Nn),bt(t,Fe()),null}function rf(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(ri=Fe()+500,vu&&Vr())}}function rs(t){lr!==null&&lr.tag===0&&!(ge&6)&&qs();var e=ge;ge|=1;var n=Qt.transition,r=ve;try{if(Qt.transition=null,ve=1,t)return t()}finally{ve=r,Qt.transition=n,ge=e,!(ge&6)&&Vr()}}function sf(){Vt=Ls.current,Ne(Ls)}function Jr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,MI(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Md(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nl();break;case 3:ti(),Ne(kt),Ne(yt),Gd();break;case 5:Wd(r);break;case 4:ti();break;case 13:Ne(ke);break;case 19:Ne(ke);break;case 10:qd(r.type._context);break;case 22:case 23:sf()}n=n.return}if(rt=t,$e=t=yr(t.current,null),at=Vt=e,Ye=0,Fo=null,tf=Tu=ns=0,Nt=po=null,Wr!==null){for(e=0;e<Wr.length;e++)if(n=Wr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Wr=null}return t}function B_(t,e){do{var n=$e;try{if(zd(),nl.current=Ll,jl){for(var r=xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jl=!1}if(ts=0,nt=Je=xe=null,ho=!1,Lo=0,ef.current=null,n===null||n.return===null){Ye=1,Fo=e,$e=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=at,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=Hm(o);if(S!==null){S.flags&=-257,Wm(S,o,l,i,e),S.mode&1&&$m(i,h,e),e=S,u=h;var k=e.updateQueue;if(k===null){var b=new Set;b.add(u),e.updateQueue=b}else k.add(u);break e}else{if(!(e&1)){$m(i,h,e),of();break e}u=Error(G(426))}}else if(Pe&&l.mode&1){var O=Hm(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Wm(O,o,l,i,e),Fd(ni(u,l));break e}}i=u=ni(u,l),Ye!==4&&(Ye=2),po===null?po=[i]:po.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=C_(i,u,e);Mm(i,T);break e;case 1:l=u;var v=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(mr===null||!mr.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=N_(i,l,e);Mm(i,x);break e}}i=i.return}while(i!==null)}W_(n)}catch(U){e=U,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function $_(){var t=Ol.current;return Ol.current=Ll,t===null?Ll:t}function of(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),rt===null||!(ns&268435455)&&!(Tu&268435455)||rr(rt,at)}function Ul(t,e){var n=ge;ge|=2;var r=$_();(rt!==t||at!==e)&&(Nn=null,Jr(t,e));do try{uS();break}catch(s){B_(t,s)}while(!0);if(zd(),ge=n,Ol.current=r,$e!==null)throw Error(G(261));return rt=null,at=0,Ye}function uS(){for(;$e!==null;)H_($e)}function cS(){for(;$e!==null&&!jT();)H_($e)}function H_(t){var e=K_(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?W_(t):$e=e,ef.current=null}function W_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rS(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,$e=null;return}}else if(n=nS(n,e,Vt),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Ye===0&&(Ye=5)}function Br(t,e,n){var r=ve,s=Qt.transition;try{Qt.transition=null,ve=1,hS(t,e,n,r)}finally{Qt.transition=s,ve=r}return null}function hS(t,e,n,r){do qs();while(lr!==null);if(ge&6)throw Error(G(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(HT(t,i),t===rt&&($e=rt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fa||(Fa=!0,Q_(wl,function(){return qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=ve;ve=1;var l=ge;ge|=4,ef.current=null,iS(t,n),U_(n,t),xI(Th),Il=!!wh,Th=wh=null,t.current=n,oS(n),LT(),ge=l,ve=o,Qt.transition=i}else t.current=n;if(Fa&&(Fa=!1,lr=t,Fl=s),i=t.pendingLanes,i===0&&(mr=null),FT(n.stateNode),bt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ml)throw Ml=!1,t=qh,qh=null,t;return Fl&1&&t.tag!==0&&qs(),i=t.pendingLanes,i&1?t===Bh?mo++:(mo=0,Bh=t):mo=0,Vr(),null}function qs(){if(lr!==null){var t=Cv(Fl),e=Qt.transition,n=ve;try{if(Qt.transition=null,ve=16>t?16:t,lr===null)var r=!1;else{if(t=lr,lr=null,Fl=0,ge&6)throw Error(G(331));var s=ge;for(ge|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Z=h;Z!==null;){var p=Z;switch(p.tag){case 0:case 11:case 15:fo(8,p,i)}var m=p.child;if(m!==null)m.return=p,Z=m;else for(;Z!==null;){p=Z;var g=p.sibling,S=p.return;if(O_(p),p===h){Z=null;break}if(g!==null){g.return=S,Z=g;break}Z=S}}}var k=i.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var O=b.sibling;b.sibling=null,b=O}while(b!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fo(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,Z=T;break e}Z=i.return}}var v=t.current;for(Z=v;Z!==null;){o=Z;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Z=C;else e:for(o=v;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wu(9,l)}}catch(U){Oe(l,l.return,U)}if(l===o){Z=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,Z=x;break e}Z=l.return}}if(ge=s,Vr(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(fu,t)}catch{}r=!0}return r}finally{ve=n,Qt.transition=e}}return!1}function ig(t,e,n){e=ni(n,e),e=C_(t,e,1),t=pr(t,e,1),e=wt(),t!==null&&(Qo(t,1,e),bt(t,e))}function Oe(t,e,n){if(t.tag===3)ig(t,t,n);else for(;e!==null;){if(e.tag===3){ig(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mr===null||!mr.has(r))){t=ni(n,t),t=N_(e,t,1),e=pr(e,t,1),t=wt(),e!==null&&(Qo(e,1,t),bt(e,t));break}}e=e.return}}function dS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(at&n)===n&&(Ye===4||Ye===3&&(at&130023424)===at&&500>Fe()-nf?Jr(t,0):tf|=n),bt(t,e)}function G_(t,e){e===0&&(t.mode&1?(e=Pa,Pa<<=1,!(Pa&130023424)&&(Pa=4194304)):e=1);var n=wt();t=On(t,e),t!==null&&(Qo(t,e,n),bt(t,n))}function fS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),G_(t,n)}function pS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),G_(t,n)}var K_;K_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,tS(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,Pe&&e.flags&1048576&&Xv(e,kl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sl(t,e),t=e.pendingProps;var s=Xs(e,yt.current);zs(e,n),s=Qd(null,e,r,t,s,n);var i=Jd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(i=!0,Rl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$d(e),s.updater=Eu,e.stateNode=s,s._reactInternals=e,xh(e,r,t,n),e=Vh(null,e,r,!0,i,n)):(e.tag=0,Pe&&i&&Od(e),Et(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=gS(r),t=en(r,t),s){case 0:e=Dh(null,e,r,t,n);break e;case 1:e=Qm(null,e,r,t,n);break e;case 11:e=Gm(null,e,r,t,n);break e;case 14:e=Km(null,e,r,en(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Dh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Qm(t,e,r,s,n);case 3:e:{if(x_(e),t===null)throw Error(G(387));r=e.pendingProps,i=e.memoizedState,s=i.element,s_(t,e),Dl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ni(Error(G(423)),e),e=Jm(t,e,r,n,s);break e}else if(r!==s){s=ni(Error(G(424)),e),e=Jm(t,e,r,n,s);break e}else for(jt=fr(e.stateNode.containerInfo.firstChild),Mt=e,Pe=!0,nn=null,n=n_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zs(),r===s){e=Mn(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return i_(e),t===null&&Rh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ih(r,s)?o=null:i!==null&&Ih(r,i)&&(e.flags|=32),k_(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&Rh(e),null;case 13:return b_(t,e,n);case 4:return Hd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ei(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Gm(t,e,r,s,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ie(xl,r._currentValue),r._currentValue=o,i!==null)if(hn(i.value,o)){if(i.children===s.children&&!kt.current){e=Mn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Vn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ph(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ph(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Et(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zs(e,n),s=Jt(s),r=r(s),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,s=en(r,e.pendingProps),s=en(r.type,s),Km(t,e,r,s,n);case 15:return R_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),sl(t,e),e.tag=1,xt(r)?(t=!0,Rl(e)):t=!1,zs(e,n),A_(e,r,s),xh(e,r,s,n),Vh(null,e,r,!0,t,n);case 19:return D_(t,e,n);case 22:return P_(t,e,n)}throw Error(G(156,e.tag))};function Q_(t,e){return Tv(t,e)}function mS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new mS(t,e,n,r)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gS(t){if(typeof t=="function")return af(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ad)return 11;if(t===Cd)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function al(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")af(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cs:return Yr(n.children,s,i,e);case Sd:o=8,s|=8;break;case th:return t=Kt(12,n,e,s|2),t.elementType=th,t.lanes=i,t;case nh:return t=Kt(13,n,e,s),t.elementType=nh,t.lanes=i,t;case rh:return t=Kt(19,n,e,s),t.elementType=rh,t.lanes=i,t;case iv:return Iu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rv:o=10;break e;case sv:o=9;break e;case Ad:o=11;break e;case Cd:o=14;break e;case er:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Yr(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function Iu(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=iv,t.lanes=n,t.stateNode={isHidden:!1},t}function Oc(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function Mc(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vc(0),this.expirationTimes=vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lf(t,e,n,r,s,i,o,l,u){return t=new yS(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$d(i),t}function vS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:As,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function J_(t){if(!t)return Ar;t=t._reactInternals;e:{if(ds(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(xt(n))return Jv(t,n,e)}return e}function Y_(t,e,n,r,s,i,o,l,u){return t=lf(n,r,!0,t,s,i,o,l,u),t.context=J_(null),n=t.current,r=wt(),s=gr(n),i=Vn(r,s),i.callback=e??null,pr(n,i,s),t.current.lanes=s,Qo(t,s,r),bt(t,r),t}function Su(t,e,n,r){var s=e.current,i=wt(),o=gr(s);return n=J_(n),e.context===null?e.context=n:e.pendingContext=n,e=Vn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pr(s,e,o),t!==null&&(an(t,s,o,i),tl(t,s,o)),o}function zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function og(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function uf(t,e){og(t,e),(t=t.alternate)&&og(t,e)}function _S(){return null}var X_=typeof reportError=="function"?reportError:function(t){console.error(t)};function cf(t){this._internalRoot=t}Au.prototype.render=cf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Su(t,e,null,null)};Au.prototype.unmount=cf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rs(function(){Su(null,t,null,null)}),e[Ln]=null}};function Au(t){this._internalRoot=t}Au.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nr.length&&e!==0&&e<nr[n].priority;n++);nr.splice(n,0,t),n===0&&xv(t)}};function hf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ag(){}function ES(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=zl(o);i.call(h)}}var o=Y_(e,r,t,0,null,!1,!1,"",ag);return t._reactRootContainer=o,t[Ln]=o.current,xo(t.nodeType===8?t.parentNode:t),rs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=zl(u);l.call(h)}}var u=lf(t,0,!1,null,null,!1,!1,"",ag);return t._reactRootContainer=u,t[Ln]=u.current,xo(t.nodeType===8?t.parentNode:t),rs(function(){Su(e,u,n,r)}),u}function Nu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=zl(o);l.call(u)}}Su(e,o,t,s)}else o=ES(n,e,t,s,r);return zl(o)}Nv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=to(e.pendingLanes);n!==0&&(Pd(e,n|1),bt(e,Fe()),!(ge&6)&&(ri=Fe()+500,Vr()))}break;case 13:rs(function(){var r=On(t,1);if(r!==null){var s=wt();an(r,t,1,s)}}),uf(t,1)}};kd=function(t){if(t.tag===13){var e=On(t,134217728);if(e!==null){var n=wt();an(e,t,134217728,n)}uf(t,134217728)}};Rv=function(t){if(t.tag===13){var e=gr(t),n=On(t,e);if(n!==null){var r=wt();an(n,t,e,r)}uf(t,e)}};Pv=function(){return ve};kv=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};fh=function(t,e,n){switch(e){case"input":if(oh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yu(r);if(!s)throw Error(G(90));av(r),oh(r,s)}}}break;case"textarea":uv(t,n);break;case"select":e=n.value,e!=null&&Os(t,!!n.multiple,e,!1)}};gv=rf;yv=rs;var wS={usingClientEntryPoint:!1,Events:[Yo,ks,yu,pv,mv,rf]},Ji={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TS={bundleType:Ji.bundleType,version:Ji.version,rendererPackageName:Ji.rendererPackageName,rendererConfig:Ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ev(t),t===null?null:t.stateNode},findFiberByHostInstance:Ji.findFiberByHostInstance||_S,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ua.isDisabled&&Ua.supportsFiber)try{fu=Ua.inject(TS),_n=Ua}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wS;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hf(e))throw Error(G(200));return vS(t,e,null,n)};Ut.createRoot=function(t,e){if(!hf(t))throw Error(G(299));var n=!1,r="",s=X_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=lf(t,1,!1,null,null,n,!1,r,s),t[Ln]=e.current,xo(t.nodeType===8?t.parentNode:t),new cf(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=Ev(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return rs(t)};Ut.hydrate=function(t,e,n){if(!Cu(e))throw Error(G(200));return Nu(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!hf(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=X_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Y_(e,null,t,1,n??null,s,!1,i,o),t[Ln]=e.current,xo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Au(e)};Ut.render=function(t,e,n){if(!Cu(e))throw Error(G(200));return Nu(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!Cu(t))throw Error(G(40));return t._reactRootContainer?(rs(function(){Nu(null,null,t,!1,function(){t._reactRootContainer=null,t[Ln]=null})}),!0):!1};Ut.unstable_batchedUpdates=rf;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cu(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Nu(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function Z_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z_)}catch(t){console.error(t)}}Z_(),Zy.exports=Ut;var IS=Zy.exports,lg=IS;Zc.createRoot=lg.createRoot,Zc.hydrateRoot=lg.hydrateRoot;const SS=()=>{};var ug={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},AS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(g=64)),r.push(n[p],n[m],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new CS;const g=i<<2|l>>4;if(r.push(g),h!==64){const S=l<<4&240|h>>2;if(r.push(S),m!==64){const k=h<<6&192|m;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NS=function(t){const e=eE(t);return tE.encodeByteArray(e,!0)},ql=function(t){return NS(t).replace(/\./g,"")},nE=function(t){try{return tE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=()=>RS().__FIREBASE_DEFAULTS__,kS=()=>{if(typeof process>"u"||typeof ug>"u")return;const t=ug.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nE(t[1]);return e&&JSON.parse(e)},Ru=()=>{try{return SS()||PS()||kS()||xS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rE=t=>{var e,n;return(n=(e=Ru())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},bS=t=>{const e=rE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sE=()=>{var t;return(t=Ru())==null?void 0:t.config},iE=t=>{var e;return(e=Ru())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ql(JSON.stringify(n)),ql(JSON.stringify(o)),""].join(".")}const go={};function jS(){const t={prod:[],emulator:[]};for(const e of Object.keys(go))go[e]?t.emulator.push(e):t.prod.push(e);return t}function LS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cg=!1;function aE(t,e){if(typeof window>"u"||typeof document>"u"||!gi(window.location.host)||go[t]===e||go[t]||cg)return;go[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=jS().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,S){g.setAttribute("width","24"),g.setAttribute("id",S),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{cg=!0,o()},g}function p(g,S){g.setAttribute("id",S),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=LS(r),S=n("text"),k=document.getElementById(S)||document.createElement("span"),b=n("learnmore"),O=document.getElementById(b)||document.createElement("a"),T=n("preprendIcon"),v=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;l(C),p(O,b);const x=h();u(v,T),C.append(v,k,O,x),document.body.appendChild(C)}i?(k.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function MS(){var e;const t=(e=Ru())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function US(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qS(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BS(){return!MS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $S(){try{return typeof indexedDB=="object"}catch{return!1}}function HS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="FirebaseError";class $n extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WS,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zo.prototype.create)}}class Zo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?GS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new $n(s,l,r)}}function GS(t,e){return t.replace(KS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const KS=/\{\$([^}]+)}/g;function QS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ss(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(hg(i)&&hg(o)){if(!ss(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function hg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JS(t,e){const n=new YS(t,e);return n.subscribe.bind(n)}class YS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Fc),s.error===void 0&&(s.error=Fc),s.complete===void 0&&(s.complete=Fc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t){return t&&t._delegate?t._delegate:t}class is{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tA(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eA(t){return t===$r?void 0:t}function tA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const rA={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},sA=de.INFO,iA={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},oA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=iA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class df{constructor(e){this.name=e,this._logLevel=sA,this._logHandler=oA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const aA=(t,e)=>e.some(n=>t instanceof n);let dg,fg;function lA(){return dg||(dg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uA(){return fg||(fg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lE=new WeakMap,Wh=new WeakMap,uE=new WeakMap,Uc=new WeakMap,ff=new WeakMap;function cA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(vr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lE.set(n,t)}).catch(()=>{}),ff.set(e,t),e}function hA(t){if(Wh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Wh.set(t,e)}let Gh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dA(t){Gh=t(Gh)}function fA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zc(this),e,...n);return uE.set(r,e.sort?e.sort():[e]),vr(r)}:uA().includes(t)?function(...e){return t.apply(zc(this),e),vr(lE.get(this))}:function(...e){return vr(t.apply(zc(this),e))}}function pA(t){return typeof t=="function"?fA(t):(t instanceof IDBTransaction&&hA(t),aA(t,lA())?new Proxy(t,Gh):t)}function vr(t){if(t instanceof IDBRequest)return cA(t);if(Uc.has(t))return Uc.get(t);const e=pA(t);return e!==t&&(Uc.set(t,e),ff.set(e,t)),e}const zc=t=>ff.get(t);function mA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=vr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(vr(o.result),u.oldVersion,u.newVersion,vr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const gA=["get","getKey","getAll","getAllKeys","count"],yA=["put","add","delete","clear"],qc=new Map;function pg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qc.get(e))return qc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=yA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||gA.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return qc.set(e,i),i}dA(t=>({...t,get:(e,n,r)=>pg(e,n)||t.get(e,n,r),has:(e,n)=>!!pg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_A(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _A(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kh="@firebase/app",mg="0.14.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new df("@firebase/app"),EA="@firebase/app-compat",wA="@firebase/analytics-compat",TA="@firebase/analytics",IA="@firebase/app-check-compat",SA="@firebase/app-check",AA="@firebase/auth",CA="@firebase/auth-compat",NA="@firebase/database",RA="@firebase/data-connect",PA="@firebase/database-compat",kA="@firebase/functions",xA="@firebase/functions-compat",bA="@firebase/installations",DA="@firebase/installations-compat",VA="@firebase/messaging",jA="@firebase/messaging-compat",LA="@firebase/performance",OA="@firebase/performance-compat",MA="@firebase/remote-config",FA="@firebase/remote-config-compat",UA="@firebase/storage",zA="@firebase/storage-compat",qA="@firebase/firestore",BA="@firebase/ai",$A="@firebase/firestore-compat",HA="firebase",WA="12.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="[DEFAULT]",GA={[Kh]:"fire-core",[EA]:"fire-core-compat",[TA]:"fire-analytics",[wA]:"fire-analytics-compat",[SA]:"fire-app-check",[IA]:"fire-app-check-compat",[AA]:"fire-auth",[CA]:"fire-auth-compat",[NA]:"fire-rtdb",[RA]:"fire-data-connect",[PA]:"fire-rtdb-compat",[kA]:"fire-fn",[xA]:"fire-fn-compat",[bA]:"fire-iid",[DA]:"fire-iid-compat",[VA]:"fire-fcm",[jA]:"fire-fcm-compat",[LA]:"fire-perf",[OA]:"fire-perf-compat",[MA]:"fire-rc",[FA]:"fire-rc-compat",[UA]:"fire-gcs",[zA]:"fire-gcs-compat",[qA]:"fire-fst",[$A]:"fire-fst-compat",[BA]:"fire-vertex","fire-js":"fire-js",[HA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new Map,KA=new Map,Jh=new Map;function gg(t,e){try{t.container.addComponent(e)}catch(n){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function si(t){const e=t.name;if(Jh.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;Jh.set(e,t);for(const n of Bl.values())gg(n,t);for(const n of KA.values())gg(n,t);return!0}function pf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new Zo("app","Firebase",QA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=WA;function cE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Qh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw _r.create("bad-app-name",{appName:String(s)});if(n||(n=sE()),!n)throw _r.create("no-options");const i=Bl.get(s);if(i){if(ss(n,i.options)&&ss(r,i.config))return i;throw _r.create("duplicate-app",{appName:s})}const o=new nA(s);for(const u of Jh.values())o.addComponent(u);const l=new JA(n,r,o);return Bl.set(s,l),l}function hE(t=Qh){const e=Bl.get(t);if(!e&&t===Qh&&sE())return cE();if(!e)throw _r.create("no-app",{appName:t});return e}function Er(t,e,n){let r=GA[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(o.join(" "));return}si(new is(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebase-heartbeat-database",XA=1,Uo="firebase-heartbeat-store";let Bc=null;function dE(){return Bc||(Bc=mA(YA,XA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Uo)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),Bc}async function ZA(t){try{const n=(await dE()).transaction(Uo),r=await n.objectStore(Uo).get(fE(t));return await n.done,r}catch(e){if(e instanceof $n)Fn.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fn.warn(n.message)}}}async function yg(t,e){try{const r=(await dE()).transaction(Uo,"readwrite");await r.objectStore(Uo).put(e,fE(t)),await r.done}catch(n){if(n instanceof $n)Fn.warn(n.message);else{const r=_r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fn.warn(r.message)}}}function fE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=1024,t1=30;class n1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new s1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>t1){const o=i1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vg(),{heartbeatsToSend:r,unsentEntries:s}=r1(this._heartbeatsCache.heartbeats),i=ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Fn.warn(n),""}}}function vg(){return new Date().toISOString().substring(0,10)}function r1(t,e=e1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),_g(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_g(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class s1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $S()?HS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _g(t){return ql(JSON.stringify({version:2,heartbeats:t})).length}function i1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){si(new is("platform-logger",e=>new vA(e),"PRIVATE")),si(new is("heartbeat",e=>new n1(e),"PRIVATE")),Er(Kh,mg,t),Er(Kh,mg,"esm2020"),Er("fire-js","")}o1("");function pE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const a1=pE,mE=new Zo("auth","Firebase",pE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new df("@firebase/auth");function l1(t,...e){$l.logLevel<=de.WARN&&$l.warn(`Auth (${yi}): ${t}`,...e)}function ll(t,...e){$l.logLevel<=de.ERROR&&$l.error(`Auth (${yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw gf(t,...e)}function ln(t,...e){return gf(t,...e)}function mf(t,e,n){const r={...a1(),[e]:n};return new Zo("auth","Firebase",r).create(e,{appName:t.name})}function Xr(t){return mf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function u1(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&An(t,"argument-error"),mf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mE.create(t,...e)}function re(t,e,...n){if(!t)throw gf(e,...n)}function bn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ll(e),new Error(e)}function Un(t,e){t||bn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function c1(){return Eg()==="http:"||Eg()==="https:"}function Eg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(c1()||US()||"connection"in navigator)?navigator.onLine:!0}function d1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n){this.shortDelay=e,this.longDelay=n,Un(n>e,"Short delay should be less than long delay!"),this.isMobile=OS()||zS()}get(){return h1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t,e){Un(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],m1=new ta(3e4,6e4);function vf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function vi(t,e,n,r,s={}){return yE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ea({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:u,...i};return FS()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&gi(t.emulatorConfig.host)&&(h.credentials="include"),gE.fetch()(await vE(t,t.config.apiHost,n,l),h)})}async function yE(t,e,n){t._canInitEmulator=!1;const r={...f1,...e};try{const s=new y1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw za(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw za(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw za(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw za(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw mf(t,p,h);An(t,p)}}catch(s){if(s instanceof $n)throw s;An(t,"network-request-failed",{message:String(s)})}}async function g1(t,e,n,r,s={}){const i=await vi(t,e,n,r,s);return"mfaPendingCredential"in i&&An(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function vE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?yf(t.config,s):`${t.config.apiScheme}://${s}`;return p1.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class y1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ln(this.auth,"network-request-failed")),m1.get())})}}function za(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ln(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v1(t,e){return vi(t,"POST","/v1/accounts:delete",e)}async function Hl(t,e){return vi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _1(t,e=!1){const n=ut(t),r=await n.getIdToken(e),s=_f(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:yo($c(s.auth_time)),issuedAtTime:yo($c(s.iat)),expirationTime:yo($c(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $c(t){return Number(t)*1e3}function _f(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ll("JWT malformed, contained fewer than 3 sections"),null;try{const s=nE(n);return s?JSON.parse(s):(ll("Failed to decode base64 JWT payload"),null)}catch(s){return ll("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function wg(t){const e=_f(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $n&&E1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function E1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yo(this.lastLoginAt),this.creationTime=yo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t){var m;const e=t.auth,n=await t.getIdToken(),r=await zo(t,Hl(e,{idToken:n}));re(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?_E(s.providerUserInfo):[],o=I1(t.providerData,i),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),h=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Xh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function T1(t){const e=ut(t);await Wl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I1(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function _E(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(t,e){const n=await yE(t,{},async()=>{const r=ea({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await vE(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&gi(t.emulatorConfig.host)&&(u.credentials="include"),gE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function A1(t,e){return vi(t,"POST","/v2/accounts:revokeToken",vf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=wg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await S1(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Bs;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bs,this.toJSON())}_performRefresh(){return bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new w1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await zo(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _1(this,e)}reload(){return T1(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await zo(this,v1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:S,providerData:k,stsTokenManager:b}=n;re(m&&b,e,"internal-error");const O=Bs.fromJSON(this.name,b);re(typeof m=="string",e,"internal-error"),Xn(r,e.name),Xn(s,e.name),re(typeof g=="boolean",e,"internal-error"),re(typeof S=="boolean",e,"internal-error"),Xn(i,e.name),Xn(o,e.name),Xn(l,e.name),Xn(u,e.name),Xn(h,e.name),Xn(p,e.name);const T=new sn({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:S,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:O,createdAt:h,lastLoginAt:p});return k&&Array.isArray(k)&&(T.providerData=k.map(v=>({...v}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Bs;s.updateFromServerResponse(n);const i=new sn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?_E(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Bs;l.updateFromIdToken(r);const u=new sn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Xh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new Map;function Dn(t){Un(t instanceof Function,"Expected a class definition");let e=Tg.get(t);return e?(Un(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EE.type="NONE";const Ig=EE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t,e,n){return`firebase:${t}:${e}:${n}`}class $s{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ul(this.userKey,s.apiKey,i),this.fullPersistenceKey=ul("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hl(this.auth,{idToken:e}).catch(()=>{});return n?sn._fromGetAccountInfoResponse(this.auth,n,e):null}return sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $s(Dn(Ig),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Dn(Ig);const o=ul(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){let m;if(typeof p=="string"){const g=await Hl(e,{idToken:p}).catch(()=>{});if(!g)break;m=await sn._fromGetAccountInfoResponse(e,g,p)}else m=sn._fromJSON(e,p);h!==i&&(l=m),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new $s(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new $s(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CE(e))return"Blackberry";if(NE(e))return"Webos";if(TE(e))return"Safari";if((e.includes("chrome/")||IE(e))&&!e.includes("edge/"))return"Chrome";if(AE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wE(t=vt()){return/firefox\//i.test(t)}function TE(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IE(t=vt()){return/crios\//i.test(t)}function SE(t=vt()){return/iemobile/i.test(t)}function AE(t=vt()){return/android/i.test(t)}function CE(t=vt()){return/blackberry/i.test(t)}function NE(t=vt()){return/webos/i.test(t)}function Ef(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function C1(t=vt()){var e;return Ef(t)&&!!((e=window.navigator)!=null&&e.standalone)}function N1(){return qS()&&document.documentMode===10}function RE(t=vt()){return Ef(t)||AE(t)||NE(t)||CE(t)||/windows phone/i.test(t)||SE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t,e=[]){let n;switch(t){case"Browser":n=Sg(vt());break;case"Worker":n=`${Sg(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(t,e={}){return vi(t,"GET","/v2/passwordPolicy",vf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=6;class x1{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??k1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ag(this),this.idTokenSubscription=new Ag(this),this.beforeStateQueue=new R1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await $s.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hl(this,{idToken:e}),r=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=d1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(Xr(this));const n=e?ut(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P1(this),n=new x1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await A1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dn(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await $s.create(this,[Dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&l1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Pu(t){return ut(t)}class Ag{constructor(e){this.auth=e,this.observer=null,this.addObserver=JS(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function D1(t){wf=t}function V1(t){return wf.loadJS(t)}function j1(){return wf.gapiScript}function L1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t,e){const n=pf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ss(i,e??{}))return s;An(s,"already-initialized")}return n.initialize({options:e})}function M1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function F1(t,e,n){const r=Pu(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=kE(e),{host:o,port:l}=U1(e),u=l===null?"":`:${l}`,h={url:`${i}//${o}${u}/`},p=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(ss(h,r.config.emulator)&&ss(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,gi(o)?(oE(`${i}//${o}${u}`),aE("Auth",!0)):z1()}function kE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function U1(t){const e=kE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Cg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Cg(o)}}}function Cg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function z1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bn("not implemented")}_getIdTokenResponse(e){return bn("not implemented")}_linkToIdToken(e,n){return bn("not implemented")}_getReauthenticationResolver(e){return bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t,e){return g1(t,"POST","/v1/accounts:signInWithIdp",vf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="http://localhost";class os extends xE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new os(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hs(e,n)}buildRequest(){const e={requestUri:q1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ea(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends Tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends na{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends na{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Pn.credential(n,r)}catch{return null}}}Pn.GOOGLE_SIGN_IN_METHOD="google.com";Pn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends na{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends na{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return or.credential(n,r)}catch{return null}}}or.TWITTER_SIGN_IN_METHOD="twitter.com";or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await sn._fromIdTokenResponse(e,r,s),o=Ng(r);return new ii({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ng(r);return new ii({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ng(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends $n{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Gl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Gl(e,n,r,s)}}function bE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Gl._fromErrorAndOperation(t,i,e,r):i})}async function B1(t,e,n=!1){const r=await zo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ii._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $1(t,e,n=!1){const{auth:r}=t;if(rn(r.app))return Promise.reject(Xr(r));const s="reauthenticate";try{const i=await zo(t,bE(r,s,e,t),n);re(i.idToken,r,"internal-error");const o=_f(i.idToken);re(o,r,"internal-error");const{sub:l}=o;return re(t.uid===l,r,"user-mismatch"),ii._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&An(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(t,e,n=!1){if(rn(t.app))return Promise.reject(Xr(t));const r="signIn",s=await bE(t,r,e),i=await ii._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function W1(t,e,n,r){return ut(t).onIdTokenChanged(e,n,r)}function G1(t,e,n){return ut(t).beforeAuthStateChanged(e,n)}function K1(t,e,n,r){return ut(t).onAuthStateChanged(e,n,r)}function Q1(t){return ut(t).signOut()}const Kl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kl,"1"),this.storage.removeItem(Kl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=1e3,Y1=10;class VE extends DE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);N1()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Y1):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},J1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VE.type="LOCAL";const X1=VE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE extends DE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jE.type="SESSION";const LE=jE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ku(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),u=await Z1(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ku.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=If("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function tC(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function nC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function sC(){return OE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="firebaseLocalStorageDb",iC=1,Ql="firebaseLocalStorage",FE="fbase_key";class ra{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xu(t,e){return t.transaction([Ql],e?"readwrite":"readonly").objectStore(Ql)}function oC(){const t=indexedDB.deleteDatabase(ME);return new ra(t).toPromise()}function Zh(){const t=indexedDB.open(ME,iC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ql,{keyPath:FE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ql)?e(r):(r.close(),await oC(),e(await Zh()))})})}async function Rg(t,e,n){const r=xu(t,!0).put({[FE]:e,value:n});return new ra(r).toPromise()}async function aC(t,e){const n=xu(t,!1).get(e),r=await new ra(n).toPromise();return r===void 0?null:r.value}function Pg(t,e){const n=xu(t,!0).delete(e);return new ra(n).toPromise()}const lC=800,uC=3;class UE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ku._getInstance(sC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await nC(),!this.activeServiceWorker)return;this.sender=new eC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zh();return await Rg(e,Kl,"1"),await Pg(e,Kl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>aC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=xu(s,!1).getAll();return new ra(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UE.type="LOCAL";const cC=UE;new ta(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t,e){return e?Dn(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends xE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hC(t){return H1(t.auth,new Sf(t),t.bypassAuthState)}function dC(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),$1(n,new Sf(t),t.bypassAuthState)}async function fC(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),B1(n,new Sf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hC;case"linkViaPopup":case"linkViaRedirect":return fC;case"reauthViaPopup":case"reauthViaRedirect":return dC;default:An(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new ta(2e3,1e4);async function mC(t,e,n){if(rn(t.app))return Promise.reject(ln(t,"operation-not-supported-in-this-environment"));const r=Pu(t);u1(t,e,Tf);const s=zE(r,n);return new Kr(r,"signInViaPopup",e,s).executeNotNull()}class Kr extends qE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Kr.currentPopupAction&&Kr.currentPopupAction.cancel(),Kr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Un(this.filter.length===1,"Popup operations only handle one event");const e=If();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pC.get())};e()}}Kr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="pendingRedirect",cl=new Map;class yC extends qE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cl.get(this.auth._key());if(!e){try{const r=await vC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cl.set(this.auth._key(),e)}return this.bypassAuthState||cl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vC(t,e){const n=wC(e),r=EC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _C(t,e){cl.set(t._key(),e)}function EC(t){return Dn(t._redirectPersistence)}function wC(t){return ul(gC,t.config.apiKey,t.name)}async function TC(t,e,n=!1){if(rn(t.app))return Promise.reject(Xr(t));const r=Pu(t),s=zE(r,e),o=await new yC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=10*60*1e3;class SC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!BE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ln(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IC&&this.cachedEventUids.clear(),this.cachedEventUids.has(kg(e))}saveEventToCache(e){this.cachedEventUids.add(kg(e)),this.lastProcessedEventTime=Date.now()}}function kg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function BE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(t,e={}){return vi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RC=/^https?/;async function PC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CC(t);for(const n of e)try{if(kC(n))return}catch{}An(t,"unauthorized-domain")}function kC(t){const e=Yh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!RC.test(n))return!1;if(NC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new ta(3e4,6e4);function xg(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bC(t){return new Promise((e,n)=>{var s,i,o;function r(){xg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xg(),n(ln(t,"network-request-failed"))},timeout:xC.get()})}if((i=(s=wn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=wn().gapi)!=null&&o.load)r();else{const l=L1("iframefcb");return wn()[l]=()=>{gapi.load?r():n(ln(t,"network-request-failed"))},V1(`${j1()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw hl=null,e})}let hl=null;function DC(t){return hl=hl||bC(t),hl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=new ta(5e3,15e3),jC="__/auth/iframe",LC="emulator/auth/iframe",OC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FC(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yf(e,LC):`https://${t.config.authDomain}/${jC}`,r={apiKey:e.apiKey,appName:t.name,v:yi},s=MC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ea(r).slice(1)}`}async function UC(t){const e=await DC(t),n=wn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:FC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ln(t,"network-request-failed"),l=wn().setTimeout(()=>{i(o)},VC.get());function u(){wn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qC=500,BC=600,$C="_blank",HC="http://localhost";class bg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WC(t,e,n,r=qC,s=BC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...zC,width:r.toString(),height:s.toString(),top:i,left:o},h=vt().toLowerCase();n&&(l=IE(h)?$C:n),wE(h)&&(e=e||HC,u.scrollbars="yes");const p=Object.entries(u).reduce((g,[S,k])=>`${g}${S}=${k},`,"");if(C1(h)&&l!=="_self")return GC(e||"",l),new bg(null);const m=window.open(e||"",l,p);re(m,t,"popup-blocked");try{m.focus()}catch{}return new bg(m)}function GC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="__/auth/handler",QC="emulator/auth/handler",JC=encodeURIComponent("fac");async function Dg(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yi,eventId:s};if(e instanceof Tf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof na){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const u=await t._getAppCheckToken(),h=u?`#${JC}=${encodeURIComponent(u)}`:"";return`${YC(t)}?${ea(l).slice(1)}${h}`}function YC({config:t}){return t.emulator?yf(t,QC):`https://${t.authDomain}/${KC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc="webStorageSupport";class XC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LE,this._completeRedirectFn=TC,this._overrideRedirectResult=_C}async _openPopup(e,n,r,s){var o;Un((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Dg(e,n,r,Yh(),s);return WC(e,i,If())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Dg(e,n,r,Yh(),s);return tC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Un(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UC(e),r=new SC(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hc,{type:Hc},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Hc];i!==void 0&&n(!!i),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RE()||TE()||Ef()}}const ZC=XC;var Vg="@firebase/auth",jg="1.12.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nN(t){si(new is("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PE(t)},h=new b1(r,s,i,u);return M1(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),si(new is("auth-internal",e=>{const n=Pu(e.getProvider("auth").getImmediate());return(r=>new eN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(Vg,jg,tN(t)),Er(Vg,jg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=5*60,sN=iE("authIdTokenMaxAge")||rN;let Lg=null;const iN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sN)return;const s=n==null?void 0:n.token;Lg!==s&&(Lg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function oN(t=hE()){const e=pf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=O1(t,{popupRedirectResolver:ZC,persistence:[cC,X1,LE]}),r=iE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=iN(i.toString());G1(n,o,()=>o(n.currentUser)),W1(n,l=>o(l))}}const s=rE("auth");return s&&F1(n,`http://${s}`),n}function aN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}D1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ln("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",aN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nN("Browser");var lN="firebase",uN="12.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(lN,uN,"app");var Og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,$E;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function E(){}E.prototype=y.prototype,_.F=y.prototype,_.prototype=new E,_.prototype.constructor=_,_.D=function(N,A,P){for(var I=Array(arguments.length-2),W=2;W<arguments.length;W++)I[W-2]=arguments[W];return y.prototype[A].apply(N,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,E){E||(E=0);const N=Array(16);if(typeof y=="string")for(var A=0;A<16;++A)N[A]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(A=0;A<16;++A)N[A]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=_.g[0],E=_.g[1],A=_.g[2];let P=_.g[3],I;I=y+(P^E&(A^P))+N[0]+3614090360&4294967295,y=E+(I<<7&4294967295|I>>>25),I=P+(A^y&(E^A))+N[1]+3905402710&4294967295,P=y+(I<<12&4294967295|I>>>20),I=A+(E^P&(y^E))+N[2]+606105819&4294967295,A=P+(I<<17&4294967295|I>>>15),I=E+(y^A&(P^y))+N[3]+3250441966&4294967295,E=A+(I<<22&4294967295|I>>>10),I=y+(P^E&(A^P))+N[4]+4118548399&4294967295,y=E+(I<<7&4294967295|I>>>25),I=P+(A^y&(E^A))+N[5]+1200080426&4294967295,P=y+(I<<12&4294967295|I>>>20),I=A+(E^P&(y^E))+N[6]+2821735955&4294967295,A=P+(I<<17&4294967295|I>>>15),I=E+(y^A&(P^y))+N[7]+4249261313&4294967295,E=A+(I<<22&4294967295|I>>>10),I=y+(P^E&(A^P))+N[8]+1770035416&4294967295,y=E+(I<<7&4294967295|I>>>25),I=P+(A^y&(E^A))+N[9]+2336552879&4294967295,P=y+(I<<12&4294967295|I>>>20),I=A+(E^P&(y^E))+N[10]+4294925233&4294967295,A=P+(I<<17&4294967295|I>>>15),I=E+(y^A&(P^y))+N[11]+2304563134&4294967295,E=A+(I<<22&4294967295|I>>>10),I=y+(P^E&(A^P))+N[12]+1804603682&4294967295,y=E+(I<<7&4294967295|I>>>25),I=P+(A^y&(E^A))+N[13]+4254626195&4294967295,P=y+(I<<12&4294967295|I>>>20),I=A+(E^P&(y^E))+N[14]+2792965006&4294967295,A=P+(I<<17&4294967295|I>>>15),I=E+(y^A&(P^y))+N[15]+1236535329&4294967295,E=A+(I<<22&4294967295|I>>>10),I=y+(A^P&(E^A))+N[1]+4129170786&4294967295,y=E+(I<<5&4294967295|I>>>27),I=P+(E^A&(y^E))+N[6]+3225465664&4294967295,P=y+(I<<9&4294967295|I>>>23),I=A+(y^E&(P^y))+N[11]+643717713&4294967295,A=P+(I<<14&4294967295|I>>>18),I=E+(P^y&(A^P))+N[0]+3921069994&4294967295,E=A+(I<<20&4294967295|I>>>12),I=y+(A^P&(E^A))+N[5]+3593408605&4294967295,y=E+(I<<5&4294967295|I>>>27),I=P+(E^A&(y^E))+N[10]+38016083&4294967295,P=y+(I<<9&4294967295|I>>>23),I=A+(y^E&(P^y))+N[15]+3634488961&4294967295,A=P+(I<<14&4294967295|I>>>18),I=E+(P^y&(A^P))+N[4]+3889429448&4294967295,E=A+(I<<20&4294967295|I>>>12),I=y+(A^P&(E^A))+N[9]+568446438&4294967295,y=E+(I<<5&4294967295|I>>>27),I=P+(E^A&(y^E))+N[14]+3275163606&4294967295,P=y+(I<<9&4294967295|I>>>23),I=A+(y^E&(P^y))+N[3]+4107603335&4294967295,A=P+(I<<14&4294967295|I>>>18),I=E+(P^y&(A^P))+N[8]+1163531501&4294967295,E=A+(I<<20&4294967295|I>>>12),I=y+(A^P&(E^A))+N[13]+2850285829&4294967295,y=E+(I<<5&4294967295|I>>>27),I=P+(E^A&(y^E))+N[2]+4243563512&4294967295,P=y+(I<<9&4294967295|I>>>23),I=A+(y^E&(P^y))+N[7]+1735328473&4294967295,A=P+(I<<14&4294967295|I>>>18),I=E+(P^y&(A^P))+N[12]+2368359562&4294967295,E=A+(I<<20&4294967295|I>>>12),I=y+(E^A^P)+N[5]+4294588738&4294967295,y=E+(I<<4&4294967295|I>>>28),I=P+(y^E^A)+N[8]+2272392833&4294967295,P=y+(I<<11&4294967295|I>>>21),I=A+(P^y^E)+N[11]+1839030562&4294967295,A=P+(I<<16&4294967295|I>>>16),I=E+(A^P^y)+N[14]+4259657740&4294967295,E=A+(I<<23&4294967295|I>>>9),I=y+(E^A^P)+N[1]+2763975236&4294967295,y=E+(I<<4&4294967295|I>>>28),I=P+(y^E^A)+N[4]+1272893353&4294967295,P=y+(I<<11&4294967295|I>>>21),I=A+(P^y^E)+N[7]+4139469664&4294967295,A=P+(I<<16&4294967295|I>>>16),I=E+(A^P^y)+N[10]+3200236656&4294967295,E=A+(I<<23&4294967295|I>>>9),I=y+(E^A^P)+N[13]+681279174&4294967295,y=E+(I<<4&4294967295|I>>>28),I=P+(y^E^A)+N[0]+3936430074&4294967295,P=y+(I<<11&4294967295|I>>>21),I=A+(P^y^E)+N[3]+3572445317&4294967295,A=P+(I<<16&4294967295|I>>>16),I=E+(A^P^y)+N[6]+76029189&4294967295,E=A+(I<<23&4294967295|I>>>9),I=y+(E^A^P)+N[9]+3654602809&4294967295,y=E+(I<<4&4294967295|I>>>28),I=P+(y^E^A)+N[12]+3873151461&4294967295,P=y+(I<<11&4294967295|I>>>21),I=A+(P^y^E)+N[15]+530742520&4294967295,A=P+(I<<16&4294967295|I>>>16),I=E+(A^P^y)+N[2]+3299628645&4294967295,E=A+(I<<23&4294967295|I>>>9),I=y+(A^(E|~P))+N[0]+4096336452&4294967295,y=E+(I<<6&4294967295|I>>>26),I=P+(E^(y|~A))+N[7]+1126891415&4294967295,P=y+(I<<10&4294967295|I>>>22),I=A+(y^(P|~E))+N[14]+2878612391&4294967295,A=P+(I<<15&4294967295|I>>>17),I=E+(P^(A|~y))+N[5]+4237533241&4294967295,E=A+(I<<21&4294967295|I>>>11),I=y+(A^(E|~P))+N[12]+1700485571&4294967295,y=E+(I<<6&4294967295|I>>>26),I=P+(E^(y|~A))+N[3]+2399980690&4294967295,P=y+(I<<10&4294967295|I>>>22),I=A+(y^(P|~E))+N[10]+4293915773&4294967295,A=P+(I<<15&4294967295|I>>>17),I=E+(P^(A|~y))+N[1]+2240044497&4294967295,E=A+(I<<21&4294967295|I>>>11),I=y+(A^(E|~P))+N[8]+1873313359&4294967295,y=E+(I<<6&4294967295|I>>>26),I=P+(E^(y|~A))+N[15]+4264355552&4294967295,P=y+(I<<10&4294967295|I>>>22),I=A+(y^(P|~E))+N[6]+2734768916&4294967295,A=P+(I<<15&4294967295|I>>>17),I=E+(P^(A|~y))+N[13]+1309151649&4294967295,E=A+(I<<21&4294967295|I>>>11),I=y+(A^(E|~P))+N[4]+4149444226&4294967295,y=E+(I<<6&4294967295|I>>>26),I=P+(E^(y|~A))+N[11]+3174756917&4294967295,P=y+(I<<10&4294967295|I>>>22),I=A+(y^(P|~E))+N[2]+718787259&4294967295,A=P+(I<<15&4294967295|I>>>17),I=E+(P^(A|~y))+N[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,_.g[2]=_.g[2]+A&4294967295,_.g[3]=_.g[3]+P&4294967295}r.prototype.v=function(_,y){y===void 0&&(y=_.length);const E=y-this.blockSize,N=this.C;let A=this.h,P=0;for(;P<y;){if(A==0)for(;P<=E;)s(this,_,P),P+=this.blockSize;if(typeof _=="string"){for(;P<y;)if(N[A++]=_.charCodeAt(P++),A==this.blockSize){s(this,N),A=0;break}}else for(;P<y;)if(N[A++]=_[P++],A==this.blockSize){s(this,N),A=0;break}}this.h=A,this.o+=y},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;y=this.o*8;for(var E=_.length-8;E<_.length;++E)_[E]=y&255,y/=256;for(this.v(_),_=Array(16),y=0,E=0;E<4;++E)for(let N=0;N<32;N+=8)_[y++]=this.g[E]>>>N&255;return _};function i(_,y){var E=l;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=y(_)}function o(_,y){this.h=y;const E=[];let N=!0;for(let A=_.length-1;A>=0;A--){const P=_[A]|0;N&&P==y||(E[A]=P,N=!1)}this.g=E}var l={};function u(_){return-128<=_&&_<128?i(_,function(y){return new o([y|0],y<0?-1:0)}):new o([_|0],_<0?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return m;if(_<0)return O(h(-_));const y=[];let E=1;for(let N=0;_>=E;N++)y[N]=_/E|0,E*=4294967296;return new o(y,0)}function p(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return O(p(_.substring(1),y));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=h(Math.pow(y,8));let N=m;for(let P=0;P<_.length;P+=8){var A=Math.min(8,_.length-P);const I=parseInt(_.substring(P,P+A),y);A<8?(A=h(Math.pow(y,A)),N=N.j(A).add(h(I))):(N=N.j(E),N=N.add(h(I)))}return N}var m=u(0),g=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-O(this).m();let _=0,y=1;for(let E=0;E<this.g.length;E++){const N=this.i(E);_+=(N>=0?N:4294967296+N)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(k(this))return"0";if(b(this))return"-"+O(this).toString(_);const y=h(Math.pow(_,6));var E=this;let N="";for(;;){const A=x(E,y).g;E=T(E,A.j(y));let P=((E.g.length>0?E.g[0]:E.h)>>>0).toString(_);if(E=A,k(E))return P+N;for(;P.length<6;)P="0"+P;N=P+N}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function k(_){if(_.h!=0)return!1;for(let y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function b(_){return _.h==-1}t.l=function(_){return _=T(this,_),b(_)?-1:k(_)?0:1};function O(_){const y=_.g.length,E=[];for(let N=0;N<y;N++)E[N]=~_.g[N];return new o(E,~_.h).add(g)}t.abs=function(){return b(this)?O(this):this},t.add=function(_){const y=Math.max(this.g.length,_.g.length),E=[];let N=0;for(let A=0;A<=y;A++){let P=N+(this.i(A)&65535)+(_.i(A)&65535),I=(P>>>16)+(this.i(A)>>>16)+(_.i(A)>>>16);N=I>>>16,P&=65535,I&=65535,E[A]=I<<16|P}return new o(E,E[E.length-1]&-2147483648?-1:0)};function T(_,y){return _.add(O(y))}t.j=function(_){if(k(this)||k(_))return m;if(b(this))return b(_)?O(this).j(O(_)):O(O(this).j(_));if(b(_))return O(this.j(O(_)));if(this.l(S)<0&&_.l(S)<0)return h(this.m()*_.m());const y=this.g.length+_.g.length,E=[];for(var N=0;N<2*y;N++)E[N]=0;for(N=0;N<this.g.length;N++)for(let A=0;A<_.g.length;A++){const P=this.i(N)>>>16,I=this.i(N)&65535,W=_.i(A)>>>16,M=_.i(A)&65535;E[2*N+2*A]+=I*M,v(E,2*N+2*A),E[2*N+2*A+1]+=P*M,v(E,2*N+2*A+1),E[2*N+2*A+1]+=I*W,v(E,2*N+2*A+1),E[2*N+2*A+2]+=P*W,v(E,2*N+2*A+2)}for(_=0;_<y;_++)E[_]=E[2*_+1]<<16|E[2*_];for(_=y;_<2*y;_++)E[_]=0;return new o(E,0)};function v(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function C(_,y){this.g=_,this.h=y}function x(_,y){if(k(y))throw Error("division by zero");if(k(_))return new C(m,m);if(b(_))return y=x(O(_),y),new C(O(y.g),O(y.h));if(b(y))return y=x(_,O(y)),new C(O(y.g),y.h);if(_.g.length>30){if(b(_)||b(y))throw Error("slowDivide_ only works with positive integers.");for(var E=g,N=y;N.l(_)<=0;)E=U(E),N=U(N);var A=V(E,1),P=V(N,1);for(N=V(N,2),E=V(E,2);!k(N);){var I=P.add(N);I.l(_)<=0&&(A=A.add(E),P=I),N=V(N,1),E=V(E,1)}return y=T(_,A.j(y)),new C(A,y)}for(A=m;_.l(y)>=0;){for(E=Math.max(1,Math.floor(_.m()/y.m())),N=Math.ceil(Math.log(E)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),P=h(E),I=P.j(y);b(I)||I.l(_)>0;)E-=N,P=h(E),I=P.j(y);k(P)&&(P=g),A=A.add(P),_=T(_,I)}return new C(A,_)}t.B=function(_){return x(this,_).h},t.and=function(_){const y=Math.max(this.g.length,_.g.length),E=[];for(let N=0;N<y;N++)E[N]=this.i(N)&_.i(N);return new o(E,this.h&_.h)},t.or=function(_){const y=Math.max(this.g.length,_.g.length),E=[];for(let N=0;N<y;N++)E[N]=this.i(N)|_.i(N);return new o(E,this.h|_.h)},t.xor=function(_){const y=Math.max(this.g.length,_.g.length),E=[];for(let N=0;N<y;N++)E[N]=this.i(N)^_.i(N);return new o(E,this.h^_.h)};function U(_){const y=_.g.length+1,E=[];for(let N=0;N<y;N++)E[N]=_.i(N)<<1|_.i(N-1)>>>31;return new o(E,_.h)}function V(_,y){const E=y>>5;y%=32;const N=_.g.length-E,A=[];for(let P=0;P<N;P++)A[P]=y>0?_.i(P+E)>>>y|_.i(P+E+1)<<32-y:_.i(P+E);return new o(A,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$E=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,wr=o}).apply(typeof Og<"u"?Og:typeof self<"u"?self:typeof window<"u"?window:{});var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HE,ro,WE,dl,ed,GE,KE,QE;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof qa=="object"&&qa];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var f=r;a=a.split(".");for(var w=0;w<a.length-1;w++){var D=a[w];if(!(D in f))break e;f=f[D]}a=a[a.length-1],w=f[a],c=c(w),c!=w&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(c){var f=[],w;for(w in c)Object.prototype.hasOwnProperty.call(c,w)&&f.push([w,c[w]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,f){return a.call.apply(a.bind,arguments)}function h(a,c,f){return h=u,h.apply(null,arguments)}function p(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var w=f.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function m(a,c){function f(){}f.prototype=c.prototype,a.Z=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(w,D,L){for(var Q=Array(arguments.length-2),le=2;le<arguments.length;le++)Q[le-2]=arguments[le];return c.prototype[D].apply(w,Q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function S(a){const c=a.length;if(c>0){const f=Array(c);for(let w=0;w<c;w++)f[w]=a[w];return f}return[]}function k(a,c){for(let w=1;w<arguments.length;w++){const D=arguments[w];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=a.length||0;const L=D.length||0;a.length=f+L;for(let Q=0;Q<L;Q++)a[f+Q]=D[Q]}else a.push(D)}}class b{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function O(a){o.setTimeout(()=>{throw a},0)}function T(){var a=_;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class v{constructor(){this.h=this.g=null}add(c,f){const w=C.get();w.set(c,f),this.h?this.h.next=w:this.g=w,this.h=w}}var C=new b(()=>new x,a=>a.reset());class x{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let U,V=!1,_=new v,y=()=>{const a=Promise.resolve(void 0);U=()=>{a.then(E)}};function E(){for(var a;a=T();){try{a.h.call(a.g)}catch(f){O(f)}var c=C;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}V=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,c),o.removeEventListener("test",f,c)}catch{}return a}();function I(a){return/^[\s\xa0]*$/.test(a)}function W(a,c){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}m(W,A),W.prototype.init=function(a,c){const f=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var M="closure_listenable_"+(Math.random()*1e6|0),F=0;function $(a,c,f,w,D){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!w,this.ha=D,this.key=++F,this.da=this.fa=!1}function j(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function K(a,c,f){for(const w in a)c.call(f,a[w],w,a)}function R(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function H(a){const c={};for(const f in a)c[f]=a[f];return c}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(a,c){let f,w;for(let D=1;D<arguments.length;D++){w=arguments[D];for(f in w)a[f]=w[f];for(let L=0;L<J.length;L++)f=J[L],Object.prototype.hasOwnProperty.call(w,f)&&(a[f]=w[f])}}function ue(a){this.src=a,this.g={},this.h=0}ue.prototype.add=function(a,c,f,w,D){const L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);const Q=Ve(a,c,w,D);return Q>-1?(c=a[Q],f||(c.fa=!1)):(c=new $(c,this.src,L,!!w,D),c.fa=f,a.push(c)),c};function Re(a,c){const f=c.type;if(f in a.g){var w=a.g[f],D=Array.prototype.indexOf.call(w,c,void 0),L;(L=D>=0)&&Array.prototype.splice.call(w,D,1),L&&(j(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Ve(a,c,f,w){for(let D=0;D<a.length;++D){const L=a[D];if(!L.da&&L.listener==c&&L.capture==!!f&&L.ha==w)return D}return-1}var je="closure_lm_"+(Math.random()*1e6|0),St={};function qt(a,c,f,w,D){if(Array.isArray(c)){for(let L=0;L<c.length;L++)qt(a,c[L],f,w,D);return null}return f=ae(f),a&&a[M]?a.J(c,f,l(w)?!!w.capture:!1,D):Xt(a,c,f,!1,w,D)}function Xt(a,c,f,w,D,L){if(!c)throw Error("Invalid event type");const Q=l(D)?!!D.capture:!!D;let le=Ee(a);if(le||(a[je]=le=new ue(a)),f=le.add(c,f,w,Q,L),f.proxy)return f;if(w=Bt(),f.proxy=w,w.src=a,w.listener=f,a.addEventListener)P||(D=Q),D===void 0&&(D=!1),a.addEventListener(c.toString(),w,D);else if(a.attachEvent)a.attachEvent(Ue(c.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Bt(){function a(f){return c.call(a.src,a.listener,f)}const c=Ke;return a}function $t(a,c,f,w,D){if(Array.isArray(c))for(var L=0;L<c.length;L++)$t(a,c[L],f,w,D);else w=l(w)?!!w.capture:!!w,f=ae(f),a&&a[M]?(a=a.i,L=String(c).toString(),L in a.g&&(c=a.g[L],f=Ve(c,f,w,D),f>-1&&(j(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete a.g[L],a.h--)))):a&&(a=Ee(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Ve(c,f,w,D)),(f=a>-1?c[a]:null)&&At(f))}function At(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[M])Re(c.i,a);else{var f=a.type,w=a.proxy;c.removeEventListener?c.removeEventListener(f,w,a.capture):c.detachEvent?c.detachEvent(Ue(f),w):c.addListener&&c.removeListener&&c.removeListener(w),(f=Ee(c))?(Re(f,a),f.h==0&&(f.src=null,c[je]=null)):j(a)}}}function Ue(a){return a in St?St[a]:St[a]="on"+a}function Ke(a,c){if(a.da)a=!0;else{c=new W(c,this);const f=a.listener,w=a.ha||a.src;a.fa&&At(a),a=f.call(w,c)}return a}function Ee(a){return a=a[je],a instanceof ue?a:null}var we="__closure_events_fn_"+(Math.random()*1e9>>>0);function ae(a){return typeof a=="function"?a:(a[we]||(a[we]=function(c){return a.handleEvent(c)}),a[we])}function ee(){N.call(this),this.i=new ue(this),this.M=this,this.G=null}m(ee,N),ee.prototype[M]=!0,ee.prototype.removeEventListener=function(a,c,f,w){$t(this,a,c,f,w)};function ce(a,c){var f,w=a.G;if(w)for(f=[];w;w=w.G)f.push(w);if(a=a.M,w=c.type||c,typeof c=="string")c=new A(c,a);else if(c instanceof A)c.target=c.target||a;else{var D=c;c=new A(w,a),ie(c,D)}D=!0;let L,Q;if(f)for(Q=f.length-1;Q>=0;Q--)L=c.g=f[Q],D=ze(L,w,!0,c)&&D;if(L=c.g=a,D=ze(L,w,!0,c)&&D,D=ze(L,w,!1,c)&&D,f)for(Q=0;Q<f.length;Q++)L=c.g=f[Q],D=ze(L,w,!1,c)&&D}ee.prototype.N=function(){if(ee.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const f=a.g[c];for(let w=0;w<f.length;w++)j(f[w]);delete a.g[c],a.h--}}this.G=null},ee.prototype.J=function(a,c,f,w){return this.i.add(String(a),c,!1,f,w)},ee.prototype.K=function(a,c,f,w){return this.i.add(String(a),c,!0,f,w)};function ze(a,c,f,w){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let D=!0;for(let L=0;L<c.length;++L){const Q=c[L];if(Q&&!Q.da&&Q.capture==f){const le=Q.listener,Qe=Q.ha||Q.src;Q.fa&&Re(a.i,Q),D=le.call(Qe,w)!==!1&&D}}return D&&!w.defaultPrevented}function Ai(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function Ci(a){a.g=Ai(()=>{a.g=null,a.i&&(a.i=!1,Ci(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class A0 extends N{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Ci(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ni(a){N.call(this),this.h=a,this.g={}}m(Ni,N);var ap=[];function lp(a){K(a.g,function(c,f){this.g.hasOwnProperty(f)&&At(c)},a),a.g={}}Ni.prototype.N=function(){Ni.Z.N.call(this),lp(this)},Ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ju=o.JSON.stringify,C0=o.JSON.parse,N0=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function up(){}function cp(){}var Ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yu(){A.call(this,"d")}m(Yu,A);function Xu(){A.call(this,"c")}m(Xu,A);var Or={},hp=null;function fa(){return hp=hp||new ee}Or.Ia="serverreachability";function dp(a){A.call(this,Or.Ia,a)}m(dp,A);function Pi(a){const c=fa();ce(c,new dp(c))}Or.STAT_EVENT="statevent";function fp(a,c){A.call(this,Or.STAT_EVENT,a),this.stat=c}m(fp,A);function _t(a){const c=fa();ce(c,new fp(c,a))}Or.Ja="timingevent";function pp(a,c){A.call(this,Or.Ja,a),this.size=c}m(pp,A);function ki(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function xi(){this.g=!0}xi.prototype.ua=function(){this.g=!1};function R0(a,c,f,w,D,L){a.info(function(){if(a.g)if(L){var Q="",le=L.split("&");for(let _e=0;_e<le.length;_e++){var Qe=le[_e].split("=");if(Qe.length>1){const et=Qe[0];Qe=Qe[1];const pn=et.split("_");Q=pn.length>=2&&pn[1]=="type"?Q+(et+"="+Qe+"&"):Q+(et+"=redacted&")}}}else Q=null;else Q=L;return"XMLHTTP REQ ("+w+") [attempt "+D+"]: "+c+`
`+f+`
`+Q})}function P0(a,c,f,w,D,L,Q){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+D+"]: "+c+`
`+f+`
`+L+" "+Q})}function gs(a,c,f,w){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+x0(a,f)+(w?" "+w:"")})}function k0(a,c){a.info(function(){return"TIMEOUT: "+c})}xi.prototype.info=function(){};function x0(a,c){if(!a.g)return c;if(!c)return null;try{const L=JSON.parse(c);if(L){for(a=0;a<L.length;a++)if(Array.isArray(L[a])){var f=L[a];if(!(f.length<2)){var w=f[1];if(Array.isArray(w)&&!(w.length<1)){var D=w[0];if(D!="noop"&&D!="stop"&&D!="close")for(let Q=1;Q<w.length;Q++)w[Q]=""}}}}return Ju(L)}catch{return c}}var pa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gp;function Zu(){}m(Zu,up),Zu.prototype.g=function(){return new XMLHttpRequest},gp=new Zu;function bi(a){return encodeURIComponent(String(a))}function b0(a){var c=1;a=a.split(":");const f=[];for(;c>0&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function Hn(a,c,f,w){this.j=a,this.i=c,this.l=f,this.S=w||1,this.V=new Ni(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yp}function yp(){this.i=null,this.g="",this.h=!1}var vp={},ec={};function tc(a,c,f){a.M=1,a.A=ga(fn(c)),a.u=f,a.R=!0,_p(a,null)}function _p(a,c){a.F=Date.now(),ma(a),a.B=fn(a.A);var f=a.B,w=a.S;Array.isArray(w)||(w=[String(w)]),bp(f.i,"t",w),a.C=0,f=a.j.L,a.h=new yp,a.g=Jp(a.j,f?c:null,!a.u),a.P>0&&(a.O=new A0(h(a.Y,a,a.g),a.P)),c=a.V,f=a.g,w=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(ap[0]=D.toString()),D=ap);for(let L=0;L<D.length;L++){const Q=qt(f,D[L],w||c.handleEvent,!1,c.h||c);if(!Q)break;c.g[Q.key]=Q}c=a.J?H(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),Pi(),R0(a.i,a.v,a.B,a.l,a.S,a.u)}Hn.prototype.ba=function(a){a=a.target;const c=this.O;c&&Kn(a)==3?c.j():this.Y(a)},Hn.prototype.Y=function(a){try{if(a==this.g)e:{const le=Kn(this.g),Qe=this.g.ya(),_e=this.g.ca();if(!(le<3)&&(le!=3||this.g&&(this.h.h||this.g.la()||Fp(this.g)))){this.K||le!=4||Qe==7||(Qe==8||_e<=0?Pi(3):Pi(2)),nc(this);var c=this.g.ca();this.X=c;var f=D0(this);if(this.o=c==200,P0(this.i,this.v,this.B,this.l,this.S,le,c),this.o){if(this.U&&!this.L){t:{if(this.g){var w,D=this.g;if((w=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(w)){var L=w;break t}}L=null}if(a=L)gs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rc(this,a);else{this.o=!1,this.m=3,_t(12),Mr(this),Di(this);break e}}if(this.R){a=!0;let et;for(;!this.K&&this.C<f.length;)if(et=V0(this,f),et==ec){le==4&&(this.m=4,_t(14),a=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(et==vp){this.m=4,_t(15),gs(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else gs(this.i,this.l,et,null),rc(this,et);if(Ep(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||f.length!=0||this.h.h||(this.m=1,_t(16),a=!1),this.o=this.o&&a,!a)gs(this.i,this.l,f,"[Invalid Chunked Response]"),Mr(this),Di(this);else if(f.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),hc(Q),Q.P=!0,_t(11))}}else gs(this.i,this.l,f,null),rc(this,f);le==4&&Mr(this),this.o&&!this.K&&(le==4?Wp(this.j,this):(this.o=!1,ma(this)))}else K0(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),Mr(this),Di(this)}}}catch{}finally{}};function D0(a){if(!Ep(a))return a.g.la();const c=Fp(a.g);if(c==="")return"";let f="";const w=c.length,D=Kn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Mr(a),Di(a),"";a.h.i=new o.TextDecoder}for(let L=0;L<w;L++)a.h.h=!0,f+=a.h.i.decode(c[L],{stream:!(D&&L==w-1)});return c.length=0,a.h.g+=f,a.C=0,a.h.g}function Ep(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function V0(a,c){var f=a.C,w=c.indexOf(`
`,f);return w==-1?ec:(f=Number(c.substring(f,w)),isNaN(f)?vp:(w+=1,w+f>c.length?ec:(c=c.slice(w,w+f),a.C=w+f,c)))}Hn.prototype.cancel=function(){this.K=!0,Mr(this)};function ma(a){a.T=Date.now()+a.H,wp(a,a.H)}function wp(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ki(h(a.aa,a),c)}function nc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Hn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(k0(this.i,this.B),this.M!=2&&(Pi(),_t(17)),Mr(this),this.m=2,Di(this)):wp(this,this.T-a)};function Di(a){a.j.I==0||a.K||Wp(a.j,a)}function Mr(a){nc(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,lp(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function rc(a,c){try{var f=a.j;if(f.I!=0&&(f.g==a||sc(f.h,a))){if(!a.L&&sc(f.h,a)&&f.I==3){try{var w=f.Ba.g.parse(c)}catch{w=null}if(Array.isArray(w)&&w.length==3){var D=w;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)wa(f),_a(f);else break e;cc(f),_t(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ki(h(f.Va,f),6e3));Sp(f.h)<=1&&f.ta&&(f.ta=void 0)}else Ur(f,11)}else if((a.L||f.g==a)&&wa(f),!I(c))for(D=f.Ba.g.parse(c),c=0;c<D.length;c++){let _e=D[c];const et=_e[0];if(!(et<=f.K))if(f.K=et,_e=_e[1],f.I==2)if(_e[0]=="c"){f.M=_e[1],f.ba=_e[2];const pn=_e[3];pn!=null&&(f.ka=pn,f.j.info("VER="+f.ka));const zr=_e[4];zr!=null&&(f.za=zr,f.j.info("SVER="+f.za));const Qn=_e[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(w=1.5*Qn,f.O=w,f.j.info("backChannelRequestTimeoutMs_="+w)),w=f;const Jn=a.g;if(Jn){const Ia=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var L=w.h;L.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ic(L,L.h),L.h=null))}if(w.G){const dc=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;dc&&(w.wa=dc,Se(w.J,w.G,dc))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),w=f;var Q=a;if(w.na=Qp(w,w.L?w.ba:null,w.W),Q.L){Ap(w.h,Q);var le=Q,Qe=w.O;Qe&&(le.H=Qe),le.D&&(nc(le),ma(le)),w.g=Q}else $p(w);f.i.length>0&&Ea(f)}else _e[0]!="stop"&&_e[0]!="close"||Ur(f,7);else f.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Ur(f,7):uc(f):_e[0]!="noop"&&f.l&&f.l.qa(_e),f.A=0)}}Pi(4)}catch{}}var j0=class{constructor(a,c){this.g=a,this.map=c}};function Tp(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ip(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Sp(a){return a.h?1:a.g?a.g.size:0}function sc(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function ic(a,c){a.g?a.g.add(c):a.h=c}function Ap(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Tp.prototype.cancel=function(){if(this.i=Cp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Cp(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.G);return c}return S(a.i)}var Np=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function L0(a,c){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const w=a[f].indexOf("=");let D,L=null;w>=0?(D=a[f].substring(0,w),L=a[f].substring(w+1)):D=a[f],c(D,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Wn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof Wn?(this.l=a.l,Vi(this,a.j),this.o=a.o,this.g=a.g,ji(this,a.u),this.h=a.h,oc(this,Dp(a.i)),this.m=a.m):a&&(c=String(a).match(Np))?(this.l=!1,Vi(this,c[1]||"",!0),this.o=Li(c[2]||""),this.g=Li(c[3]||"",!0),ji(this,c[4]),this.h=Li(c[5]||"",!0),oc(this,c[6]||"",!0),this.m=Li(c[7]||"")):(this.l=!1,this.i=new Mi(null,this.l))}Wn.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(Oi(c,Rp,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Oi(c,Rp,!0),"@"),a.push(bi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Oi(f,f.charAt(0)=="/"?F0:M0,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Oi(f,z0)),a.join("")},Wn.prototype.resolve=function(a){const c=fn(this);let f=!!a.j;f?Vi(c,a.j):f=!!a.o,f?c.o=a.o:f=!!a.g,f?c.g=a.g:f=a.u!=null;var w=a.h;if(f)ji(c,a.u);else if(f=!!a.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var D=c.h.lastIndexOf("/");D!=-1&&(w=c.h.slice(0,D+1)+w)}if(D=w,D==".."||D==".")w="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){w=D.lastIndexOf("/",0)==0,D=D.split("/");const L=[];for(let Q=0;Q<D.length;){const le=D[Q++];le=="."?w&&Q==D.length&&L.push(""):le==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),w&&Q==D.length&&L.push("")):(L.push(le),w=!0)}w=L.join("/")}else w=D}return f?c.h=w:f=a.i.toString()!=="",f?oc(c,Dp(a.i)):f=!!a.m,f&&(c.m=a.m),c};function fn(a){return new Wn(a)}function Vi(a,c,f){a.j=f?Li(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function ji(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function oc(a,c,f){c instanceof Mi?(a.i=c,q0(a.i,a.l)):(f||(c=Oi(c,U0)),a.i=new Mi(c,a.l))}function Se(a,c,f){a.i.set(c,f)}function ga(a){return Se(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Li(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Oi(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,O0),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function O0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Rp=/[#\/\?@]/g,M0=/[#\?:]/g,F0=/[#\?]/g,U0=/[#\?@]/g,z0=/#/g;function Mi(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function Fr(a){a.g||(a.g=new Map,a.h=0,a.i&&L0(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Mi.prototype,t.add=function(a,c){Fr(this),this.i=null,a=ys(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function Pp(a,c){Fr(a),c=ys(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function kp(a,c){return Fr(a),c=ys(a,c),a.g.has(c)}t.forEach=function(a,c){Fr(this),this.g.forEach(function(f,w){f.forEach(function(D){a.call(c,D,w,this)},this)},this)};function xp(a,c){Fr(a);let f=[];if(typeof c=="string")kp(a,c)&&(f=f.concat(a.g.get(ys(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)f=f.concat(a[c]);return f}t.set=function(a,c){return Fr(this),this.i=null,a=ys(this,a),kp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=xp(this,a),a.length>0?String(a[0]):c):c};function bp(a,c,f){Pp(a,c),f.length>0&&(a.i=null,a.g.set(ys(a,c),S(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let w=0;w<c.length;w++){var f=c[w];const D=bi(f);f=xp(this,f);for(let L=0;L<f.length;L++){let Q=D;f[L]!==""&&(Q+="="+bi(f[L])),a.push(Q)}}return this.i=a.join("&")};function Dp(a){const c=new Mi;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function ys(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function q0(a,c){c&&!a.j&&(Fr(a),a.i=null,a.g.forEach(function(f,w){const D=w.toLowerCase();w!=D&&(Pp(this,w),bp(this,D,f))},a)),a.j=c}function B0(a,c){const f=new xi;if(o.Image){const w=new Image;w.onload=p(Gn,f,"TestLoadImage: loaded",!0,c,w),w.onerror=p(Gn,f,"TestLoadImage: error",!1,c,w),w.onabort=p(Gn,f,"TestLoadImage: abort",!1,c,w),w.ontimeout=p(Gn,f,"TestLoadImage: timeout",!1,c,w),o.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else c(!1)}function $0(a,c){const f=new xi,w=new AbortController,D=setTimeout(()=>{w.abort(),Gn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:w.signal}).then(L=>{clearTimeout(D),L.ok?Gn(f,"TestPingServer: ok",!0,c):Gn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),Gn(f,"TestPingServer: error",!1,c)})}function Gn(a,c,f,w,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),w(f)}catch{}}function H0(){this.g=new N0}function ac(a){this.i=a.Sb||null,this.h=a.ab||!1}m(ac,up),ac.prototype.g=function(){return new ya(this.i,this.h)};function ya(a,c){ee.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(ya,ee),t=ya.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,Ui(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vp(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vp(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Fi(this):Ui(this),this.readyState==3&&Vp(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Fi(this))},t.Na=function(a){this.g&&(this.response=a,Fi(this))},t.ga=function(){this.g&&Fi(this)};function Fi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Ui(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function Ui(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function jp(a){let c="";return K(a,function(f,w){c+=w,c+=":",c+=f,c+=`\r
`}),c}function lc(a,c,f){e:{for(w in f){var w=!1;break e}w=!0}w||(f=jp(f),typeof a=="string"?f!=null&&bi(f):Se(a,c,f))}function Le(a){ee.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Le,ee);var W0=/^https?$/i,G0=["POST","PUT"];t=Le.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,f,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gp.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(L){Lp(this,L);return}if(a=f||"",f=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var D in w)f.set(D,w[D]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const L of w.keys())f.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(f.keys()).find(L=>L.toLowerCase()=="content-type"),D=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(G0,c,void 0)>=0)||w||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,Q]of f)this.g.setRequestHeader(L,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(L){Lp(this,L)}};function Lp(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,Op(a),va(a)}function Op(a){a.A||(a.A=!0,ce(a,"complete"),ce(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ce(this,"complete"),ce(this,"abort"),va(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),va(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Mp(this):this.Xa())},t.Xa=function(){Mp(this)};function Mp(a){if(a.h&&typeof i<"u"){if(a.v&&Kn(a)==4)setTimeout(a.Ca.bind(a),0);else if(ce(a,"readystatechange"),Kn(a)==4){a.h=!1;try{const L=a.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var w;if(w=L===0){let Q=String(a.D).match(Np)[1]||null;!Q&&o.self&&o.self.location&&(Q=o.self.location.protocol.slice(0,-1)),w=!W0.test(Q?Q.toLowerCase():"")}f=w}if(f)ce(a,"complete"),ce(a,"success");else{a.o=6;try{var D=Kn(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",Op(a)}}finally{va(a)}}}}function va(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,c||ce(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Kn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Kn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),C0(c)}};function Fp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function K0(a){const c={};a=(a.g&&Kn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(I(a[w]))continue;var f=b0(a[w]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const L=c[D]||[];c[D]=L,L.push(f)}R(c,function(w){return w.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zi(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function Up(a){this.za=0,this.i=[],this.j=new xi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zi("baseRetryDelayMs",5e3,a),this.Za=zi("retryDelaySeedMs",1e4,a),this.Ta=zi("forwardChannelMaxRetries",2,a),this.va=zi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Tp(a&&a.concurrentRequestLimit),this.Ba=new H0,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Up.prototype,t.ka=8,t.I=1,t.connect=function(a,c,f,w){_t(0),this.W=a,this.H=c||{},f&&w!==void 0&&(this.H.OSID=f,this.H.OAID=w),this.F=this.X,this.J=Qp(this,null,this.W),Ea(this)};function uc(a){if(zp(a),a.I==3){var c=a.V++,f=fn(a.J);if(Se(f,"SID",a.M),Se(f,"RID",c),Se(f,"TYPE","terminate"),qi(a,f),c=new Hn(a,a.j,c),c.M=2,c.A=ga(fn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=c.A,f=!0),f||(c.g=Jp(c.j,null),c.g.ea(c.A)),c.F=Date.now(),ma(c)}Kp(a)}function _a(a){a.g&&(hc(a),a.g.cancel(),a.g=null)}function zp(a){_a(a),a.v&&(o.clearTimeout(a.v),a.v=null),wa(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ea(a){if(!Ip(a.h)&&!a.m){a.m=!0;var c=a.Ea;U||y(),V||(U(),V=!0),_.add(c,a),a.D=0}}function Q0(a,c){return Sp(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ki(h(a.Ea,a,c),Gp(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const D=new Hn(this,this.j,a);let L=this.o;if(this.U&&(L?(L=H(L),ie(L,this.U)):L=this.U),this.u!==null||this.R||(D.J=L,L=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var w=this.i[f];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(c+=w,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Bp(this,D,c),f=fn(this.J),Se(f,"RID",a),Se(f,"CVER",22),this.G&&Se(f,"X-HTTP-Session-Id",this.G),qi(this,f),L&&(this.R?c="headers="+bi(jp(L))+"&"+c:this.u&&lc(f,this.u,L)),ic(this.h,D),this.Ra&&Se(f,"TYPE","init"),this.S?(Se(f,"$req",c),Se(f,"SID","null"),D.U=!0,tc(D,f,null)):tc(D,f,c),this.I=2}}else this.I==3&&(a?qp(this,a):this.i.length==0||Ip(this.h)||qp(this))};function qp(a,c){var f;c?f=c.l:f=a.V++;const w=fn(a.J);Se(w,"SID",a.M),Se(w,"RID",f),Se(w,"AID",a.K),qi(a,w),a.u&&a.o&&lc(w,a.u,a.o),f=new Hn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),c&&(a.i=c.G.concat(a.i)),c=Bp(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),ic(a.h,f),tc(f,w,c)}function qi(a,c){a.H&&K(a.H,function(f,w){Se(c,w,f)}),a.l&&K({},function(f,w){Se(c,w,f)})}function Bp(a,c,f){f=Math.min(a.i.length,f);const w=a.l?h(a.l.Ka,a.l,a):null;e:{var D=a.i;let le=-1;for(;;){const Qe=["count="+f];le==-1?f>0?(le=D[0].g,Qe.push("ofs="+le)):le=0:Qe.push("ofs="+le);let _e=!0;for(let et=0;et<f;et++){var L=D[et].g;const pn=D[et].map;if(L-=le,L<0)le=Math.max(0,D[et].g-100),_e=!1;else try{L="req"+L+"_"||"";try{var Q=pn instanceof Map?pn:Object.entries(pn);for(const[zr,Qn]of Q){let Jn=Qn;l(Qn)&&(Jn=Ju(Qn)),Qe.push(L+zr+"="+encodeURIComponent(Jn))}}catch(zr){throw Qe.push(L+"type="+encodeURIComponent("_badmap")),zr}}catch{w&&w(pn)}}if(_e){Q=Qe.join("&");break e}}Q=void 0}return a=a.i.splice(0,f),c.G=a,Q}function $p(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;U||y(),V||(U(),V=!0),_.add(c,a),a.A=0}}function cc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ki(h(a.Da,a),Gp(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Hp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ki(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),_a(this),Hp(this))};function hc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Hp(a){a.g=new Hn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=fn(a.na);Se(c,"RID","rpc"),Se(c,"SID",a.M),Se(c,"AID",a.K),Se(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&Se(c,"TO",a.ia),Se(c,"TYPE","xmlhttp"),qi(a,c),a.u&&a.o&&lc(c,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=ga(fn(c)),f.u=null,f.R=!0,_p(f,a)}t.Va=function(){this.C!=null&&(this.C=null,_a(this),cc(this),_t(19))};function wa(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Wp(a,c){var f=null;if(a.g==c){wa(a),hc(a),a.g=null;var w=2}else if(sc(a.h,c))f=c.G,Ap(a.h,c),w=1;else return;if(a.I!=0){if(c.o)if(w==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var D=a.D;w=fa(),ce(w,new pp(w,f)),Ea(a)}else $p(a);else if(D=c.m,D==3||D==0&&c.X>0||!(w==1&&Q0(a,c)||w==2&&cc(a)))switch(f&&f.length>0&&(c=a.h,c.i=c.i.concat(f)),D){case 1:Ur(a,5);break;case 4:Ur(a,10);break;case 3:Ur(a,6);break;default:Ur(a,2)}}}function Gp(a,c){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*c}function Ur(a,c){if(a.j.info("Error code "+c),c==2){var f=h(a.bb,a),w=a.Ua;const D=!w;w=new Wn(w||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Vi(w,"https"),ga(w),D?B0(w.toString(),f):$0(w.toString(),f)}else _t(2);a.I=0,a.l&&a.l.pa(c),Kp(a),zp(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Kp(a){if(a.I=0,a.ja=[],a.l){const c=Cp(a.h);(c.length!=0||a.i.length!=0)&&(k(a.ja,c),k(a.ja,a.i),a.h.i.length=0,S(a.i),a.i.length=0),a.l.oa()}}function Qp(a,c,f){var w=f instanceof Wn?fn(f):new Wn(f);if(w.g!="")c&&(w.g=c+"."+w.g),ji(w,w.u);else{var D=o.location;w=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;const L=new Wn(null);w&&Vi(L,w),c&&(L.g=c),D&&ji(L,D),f&&(L.h=f),w=L}return f=a.G,c=a.wa,f&&c&&Se(w,f,c),Se(w,"VER",a.ka),qi(a,w),w}function Jp(a,c,f){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new Le(new ac({ab:f})):new Le(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yp(){}t=Yp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ta(){}Ta.prototype.g=function(a,c){return new Dt(a,c)};function Dt(a,c){ee.call(this),this.g=new Up(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!I(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!I(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new vs(this)}m(Dt,ee),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){uc(this.g)},Dt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=Ju(a),a=f);c.i.push(new j0(c.Ya++,a)),c.I==3&&Ea(c)},Dt.prototype.N=function(){this.g.l=null,delete this.j,uc(this.g),delete this.g,Dt.Z.N.call(this)};function Xp(a){Yu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}m(Xp,Yu);function Zp(){Xu.call(this),this.status=1}m(Zp,Xu);function vs(a){this.g=a}m(vs,Yp),vs.prototype.ra=function(){ce(this.g,"a")},vs.prototype.qa=function(a){ce(this.g,new Xp(a))},vs.prototype.pa=function(a){ce(this.g,new Zp)},vs.prototype.oa=function(){ce(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,QE=function(){return new Ta},KE=function(){return fa()},GE=Or,ed={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pa.NO_ERROR=0,pa.TIMEOUT=8,pa.HTTP_ERROR=6,dl=pa,mp.COMPLETE="complete",WE=mp,cp.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",ee.prototype.listen=ee.prototype.J,ro=cp,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,HE=Le}).apply(typeof qa<"u"?qa:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i="12.10.0";function cN(t){_i=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new df("@firebase/firestore");function ws(){return as.logLevel}function X(t,...e){if(as.logLevel<=de.DEBUG){const n=e.map(Af);as.debug(`Firestore (${_i}): ${t}`,...n)}}function zn(t,...e){if(as.logLevel<=de.ERROR){const n=e.map(Af);as.error(`Firestore (${_i}): ${t}`,...n)}}function ls(t,...e){if(as.logLevel<=de.WARN){const n=e.map(Af);as.warn(`Firestore (${_i}): ${t}`,...n)}}function Af(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,JE(t,r,n)}function JE(t,e,n){let r=`FIRESTORE (${_i}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw zn(r),new Error(r)}function ye(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||JE(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends $n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class dN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fN{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new YE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new pt(e)}}class pN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class mN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new pN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Mg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=yN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function td(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Wc(s)===Wc(i)?fe(s,i):Wc(s)?1:-1}return fe(t.length,e.length)}const vN=55296,_N=57343;function Wc(t){const e=t.charCodeAt(0);return e>=vN&&e<=_N}function oi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="__name__";class yn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=yn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return fe(e.length,n.length)}static compareSegments(e,n){const r=yn.isNumericId(e),s=yn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?yn.extractNumericId(e).compare(yn.extractNumericId(n)):td(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class Te extends yn{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const EN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends yn{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return EN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fg}static keyField(){return new ot([Fg])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Y(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Te.fromString(e))}static fromName(e){return new te(Te.fromString(e).popFirst(5))}static empty(){return new te(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t,e,n){if(!n)throw new Y(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wN(t,e,n,r){if(e===!0&&r===!0)throw new Y(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ug(t){if(!te.isDocumentKey(t))throw new Y(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zg(t){if(te.isDocumentKey(t))throw new Y(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ZE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function bu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function us(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bu(t);throw new Y(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e){const n={typeString:t};return e&&(n.value=e),n}function sa(t,e){if(!ZE(t))throw new Y(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=-62135596800,Bg=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Bg);return new Ce(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qg)throw new Y(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bg}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sa(e,Ce._jsonSchema))return new Ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:We("string",Ce._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new Ce(0,0))}static max(){return new se(new Ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=-1;function TN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new Cr(s,te.empty(),e)}function IN(t){return new Cr(t.readTime,t.key,qo)}class Cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cr(se.min(),te.empty(),qo)}static max(){return new Cr(se.max(),te.empty(),qo)}}function SN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==AN)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function NN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Du.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=-1;function Vu(t){return t==null}function Jl(t){return t===0&&1/t==-1/0}function RN(t){return typeof t=="number"&&Number.isInteger(t)&&!Jl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="";function PN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$g(e)),e=kN(t.get(n),e);return $g(e)}function kN(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ew:n+="";break;default:n+=i}}return n}function $g(t){return t+ew+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ba(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ba(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ba(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ba(this.root,e,this.comparator,!0)}}class Ba{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??it.RED,this.left=s??it.EMPTY,this.right=i??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new it(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return it.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Wg(this.data.getIterator())}getIteratorFrom(e){return new Wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class Wg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Lt([])}unionWith(e){let n=new Ze(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nw("Invalid base64 string: "+i):i}}(e);return new ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const xN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=xN.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rr(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="server_timestamp",sw="__type__",iw="__previous_value__",ow="__local_write_time__";function Rf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sw])==null?void 0:r.stringValue)===rw}function ju(t){const e=t.mapValue.fields[iw];return Rf(e)?ju(e):e}function Bo(t){const e=Nr(t.mapValue.fields[ow].timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n,r,s,i,o,l,u,h,p,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p,this.apiKey=m}}const Yl="(default)";class $o{constructor(e,n){this.projectId=e,this.database=n||Yl}static empty(){return new $o("","")}get isDefaultDatabase(){return this.database===Yl}isEqual(e){return e instanceof $o&&e.projectId===this.projectId&&e.database===this.database}}function DN(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Y(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $o(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="__type__",VN="__max__",$a={mapValue:{}},lw="__vector__",Xl="value";function Pr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rf(t)?4:LN(t)?9007199254740991:jN(t)?10:11:ne(28295,{value:t})}function Cn(t,e){if(t===e)return!0;const n=Pr(t);if(n!==Pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bo(t).isEqual(Bo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Nr(s.timestampValue),l=Nr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Rr(s.bytesValue).isEqual(Rr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Me(s.doubleValue),l=Me(i.doubleValue);return o===l?Jl(o)===Jl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return oi(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Hg(o)!==Hg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Cn(o[u],l[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Ho(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function ai(t,e){if(t===e)return 0;const n=Pr(t),r=Pr(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Me(i.integerValue||i.doubleValue),u=Me(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Gg(t.timestampValue,e.timestampValue);case 4:return Gg(Bo(t),Bo(e));case 5:return td(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Rr(i),u=Rr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=fe(l[h],u[h]);if(p!==0)return p}return fe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=fe(Me(i.latitude),Me(o.latitude));return l!==0?l:fe(Me(i.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Kg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,S,k,b;const l=i.fields||{},u=o.fields||{},h=(g=l[Xl])==null?void 0:g.arrayValue,p=(S=u[Xl])==null?void 0:S.arrayValue,m=fe(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((b=p==null?void 0:p.values)==null?void 0:b.length)||0);return m!==0?m:Kg(h,p)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$a.mapValue&&o===$a.mapValue)return 0;if(i===$a.mapValue)return 1;if(o===$a.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=td(u[m],p[m]);if(g!==0)return g;const S=ai(l[u[m]],h[p[m]]);if(S!==0)return S}return fe(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function Gg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=Nr(t),r=Nr(e),s=fe(n.seconds,r.seconds);return s!==0?s:fe(n.nanos,r.nanos)}function Kg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ai(n[s],r[s]);if(i)return i}return fe(n.length,r.length)}function li(t){return nd(t)}function nd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Rr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=nd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${nd(n.fields[o])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function fl(t){switch(Pr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ju(t);return e?16+fl(e):16;case 5:return 2*t.stringValue.length;case 6:return Rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+fl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return jr(r.fields,(i,o)=>{s+=i.length+fl(o)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function Qg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rd(t){return!!t&&"integerValue"in t}function Pf(t){return!!t&&"arrayValue"in t}function Jg(t){return!!t&&"nullValue"in t}function Yg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pl(t){return!!t&&"mapValue"in t}function jN(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[aw])==null?void 0:r.stringValue)===lw}function vo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vo(t.arrayValue.values[n]);return e}return{...t}}function LN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===VN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vo(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=vo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){jr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rt(vo(this.value))}}function uw(t){const e=[];return jr(t.fields,(n,r)=>{const s=new ot([n]);if(pl(r)){const i=uw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Lt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new gt(e,0,se.min(),se.min(),se.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,s){return new gt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new gt(e,2,n,se.min(),se.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,se.min(),se.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.position=e,this.inclusive=n}}function Xg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=ai(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function ON(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{}class He extends cw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FN(e,n,r):n==="array-contains"?new qN(e,r):n==="in"?new BN(e,r):n==="not-in"?new $N(e,r):n==="array-contains-any"?new HN(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UN(e,r):new zN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ai(n,this.value)):n!==null&&Pr(this.value)===Pr(n)&&this.matchesComparison(ai(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends cw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new dn(e,n)}matches(e){return hw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hw(t){return t.op==="and"}function dw(t){return MN(t)&&hw(t)}function MN(t){for(const e of t.filters)if(e instanceof dn)return!1;return!0}function sd(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+li(t.value);if(dw(t))return t.filters.map(e=>sd(e)).join(",");{const e=t.filters.map(n=>sd(n)).join(",");return`${t.op}(${e})`}}function fw(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&Cn(r.value,s.value)}(t,e):t instanceof dn?function(r,s){return s instanceof dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&fw(o,s.filters[l]),!0):!1}(t,e):void ne(19439)}function pw(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${li(n.value)}`}(t):t instanceof dn?function(n){return n.op.toString()+" {"+n.getFilters().map(pw).join(" ,")+"}"}(t):"Filter"}class FN extends He{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class UN extends He{constructor(e,n){super(e,"in",n),this.keys=mw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zN extends He{constructor(e,n){super(e,"not-in",n),this.keys=mw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class qN extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pf(n)&&Ho(n.arrayValue,this.value)}}class BN extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ho(this.value.arrayValue,n)}}class $N extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ho(this.value.arrayValue,n)}}class HN extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ho(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function ey(t,e=null,n=[],r=[],s=null,i=null,o=null){return new WN(t,e,n,r,s,i,o)}function kf(t){const e=oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>li(r)).join(",")),e.Te=n}return e.Te}function xf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ON(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zg(t.startAt,e.startAt)&&Zg(t.endAt,e.endAt)}function id(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function GN(t,e,n,r,s,i,o,l){return new ia(t,e,n,r,s,i,o,l)}function gw(t){return new ia(t)}function ty(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KN(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function yw(t){return t.collectionGroup!==null}function _o(t){const e=oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ze(ot.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new eu(i,r))}),n.has(ot.keyField().canonicalString())||e.Ie.push(new eu(ot.keyField(),r))}return e.Ie}function Tn(t){const e=oe(t);return e.Ee||(e.Ee=QN(e,_o(t))),e.Ee}function QN(t,e){if(t.limitType==="F")return ey(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new eu(s.field,i)});const n=t.endAt?new Zl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zl(t.startAt.position,t.startAt.inclusive):null;return ey(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function od(t,e){const n=t.filters.concat([e]);return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tu(t,e,n){return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lu(t,e){return xf(Tn(t),Tn(e))&&t.limitType===e.limitType}function vw(t){return`${kf(Tn(t))}|lt:${t.limitType}`}function Ts(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>pw(s)).join(", ")}]`),Vu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>li(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>li(s)).join(",")),`Target(${r})`}(Tn(t))}; limitType=${t.limitType})`}function Ou(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of _o(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Xg(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,_o(r),s)||r.endAt&&!function(o,l,u){const h=Xg(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,_o(r),s))}(t,e)}function JN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _w(t){return(e,n)=>{let r=!1;for(const s of _o(t)){const i=YN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function YN(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?ai(u,h):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return tw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new De(te.comparator);function qn(){return XN}const Ew=new De(te.comparator);function so(...t){let e=Ew;for(const n of t)e=e.insert(n.key,n);return e}function ww(t){let e=Ew;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qr(){return Eo()}function Tw(){return Eo()}function Eo(){return new fs(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZN=new De(te.comparator),eR=new Ze(te.comparator);function pe(...t){let e=eR;for(const n of t)e=e.add(n);return e}const tR=new Ze(fe);function nR(){return tR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(e)?"-0":e}}function Iw(t){return{integerValue:""+t}}function rR(t,e){return RN(e)?Iw(e):bf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(){this._=void 0}}function sR(t,e,n){return t instanceof nu?function(s,i){const o={fields:{[sw]:{stringValue:rw},[ow]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rf(i)&&(i=ju(i)),i&&(o.fields[iw]=i),{mapValue:o}}(n,e):t instanceof Wo?Aw(t,e):t instanceof Go?Cw(t,e):function(s,i){const o=Sw(s,i),l=ny(o)+ny(s.Ae);return rd(o)&&rd(s.Ae)?Iw(l):bf(s.serializer,l)}(t,e)}function iR(t,e,n){return t instanceof Wo?Aw(t,e):t instanceof Go?Cw(t,e):n}function Sw(t,e){return t instanceof ru?function(r){return rd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class nu extends Mu{}class Wo extends Mu{constructor(e){super(),this.elements=e}}function Aw(t,e){const n=Nw(e);for(const r of t.elements)n.some(s=>Cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Go extends Mu{constructor(e){super(),this.elements=e}}function Cw(t,e){let n=Nw(e);for(const r of t.elements)n=n.filter(s=>!Cn(s,r));return{arrayValue:{values:n}}}class ru extends Mu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ny(t){return Me(t.integerValue||t.doubleValue)}function Nw(t){return Pf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wo&&s instanceof Wo||r instanceof Go&&s instanceof Go?oi(r.elements,s.elements,Cn):r instanceof ru&&s instanceof ru?Cn(r.Ae,s.Ae):r instanceof nu&&s instanceof nu}(t.transform,e.transform)}class aR{constructor(e,n){this.version=e,this.transformResults=n}}class un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ml(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fu{}function Rw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Df(t.key,un.none()):new oa(t.key,t.data,un.none());{const n=t.data,r=Rt.empty();let s=new Ze(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Lr(t.key,r,new Lt(s.toArray()),un.none())}}function lR(t,e,n){t instanceof oa?function(s,i,o){const l=s.value.clone(),u=sy(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Lr?function(s,i,o){if(!ml(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=sy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Pw(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wo(t,e,n,r){return t instanceof oa?function(i,o,l,u){if(!ml(i.precondition,o))return l;const h=i.value.clone(),p=iy(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lr?function(i,o,l,u){if(!ml(i.precondition,o))return l;const h=iy(i.fieldTransforms,u,o),p=o.data;return p.setAll(Pw(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return ml(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function uR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Sw(r.transform,s||null);i!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,i))}return n||null}function ry(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oi(r,s,(i,o)=>oR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oa extends Fu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Lr extends Fu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Pw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sy(t,e,n){const r=new Map;ye(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,iR(o,l,n[s]))}return r}function iy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,sR(i,o,e))}return r}class Df extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cR extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&lR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Tw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Rw(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&oi(this.mutations,e.mutations,(n,r)=>ry(n,r))&&oi(this.baseMutations,e.baseMutations,(n,r)=>ry(n,r))}}class Vf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return ZN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Vf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,me;function pR(t){switch(t){case q.OK:return ne(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function kw(t){if(t===void 0)return zn("GRPC error has no .code"),q.UNKNOWN;switch(t){case qe.OK:return q.OK;case qe.CANCELLED:return q.CANCELLED;case qe.UNKNOWN:return q.UNKNOWN;case qe.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case qe.INTERNAL:return q.INTERNAL;case qe.UNAVAILABLE:return q.UNAVAILABLE;case qe.UNAUTHENTICATED:return q.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case qe.NOT_FOUND:return q.NOT_FOUND;case qe.ALREADY_EXISTS:return q.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return q.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case qe.ABORTED:return q.ABORTED;case qe.OUT_OF_RANGE:return q.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return q.UNIMPLEMENTED;case qe.DATA_LOSS:return q.DATA_LOSS;default:return ne(39323,{code:t})}}(me=qe||(qe={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new wr([4294967295,4294967295],0);function oy(t){const e=mR().encode(t),n=new $E;return n.update(e),new Uint8Array(n.digest())}function ay(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wr([n,r],0),new wr([s,i],0)]}class jf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new io(`Invalid padding: ${n}`);if(r<0)throw new io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new io(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(wr.fromNumber(r)));return s.compare(gR)===1&&(s=new wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=oy(e),[r,s]=ay(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new jf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=oy(e),[r,s]=ay(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,aa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uu(se.min(),s,new De(fe),qn(),pe())}}class aa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new aa(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class xw{constructor(e,n){this.targetId=e,this.Ce=n}}class bw{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ly{constructor(){this.ve=0,this.Fe=uy(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pe(),n=pe(),r=pe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new aa(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=uy()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class yR{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.He=Ha(),this.Je=Ha(),this.Ze=new De(fe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(id(i))if(r===0){const o=new te(i.path);this.et(n,o,gt.newNoDocument(o,se.min()))}else ye(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Rr(r).toUint8Array()}catch(u){if(u instanceof nw)return ls("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new jf(o,s,i)}catch(u){return ls(u instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&id(l.target)){const u=new te(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,gt.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=pe();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Uu(e,n,this.Ze,this.je,r);return this.je=qn(),this.He=Ha(),this.Je=Ha(),this.Ze=new De(fe),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new ly,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ze(fe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ze(fe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ly),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ha(){return new De(te.comparator)}function uy(){return new De(te.comparator)}const vR={asc:"ASCENDING",desc:"DESCENDING"},_R={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ER={and:"AND",or:"OR"};class wR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ad(t,e){return t.useProto3Json||Vu(e)?e:{value:e}}function su(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TR(t,e){return su(t,e.toTimestamp())}function In(t){return ye(!!t,49232),se.fromTimestamp(function(n){const r=Nr(n);return new Ce(r.seconds,r.nanos)}(t))}function Lf(t,e){return ld(t,e).canonicalString()}function ld(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Vw(t){const e=Te.fromString(t);return ye(Fw(e),10190,{key:e.toString()}),e}function ud(t,e){return Lf(t.databaseId,e.path)}function Gc(t,e){const n=Vw(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(Lw(n))}function jw(t,e){return Lf(t.databaseId,e)}function IR(t){const e=Vw(t);return e.length===4?Te.emptyPath():Lw(e)}function cd(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Lw(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cy(t,e,n){return{name:ud(t,e),fields:n.value.mapValue.fields}}function SR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ne(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(ye(p===void 0||typeof p=="string",58123),ct.fromBase64String(p||"")):(ye(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ct.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?q.UNKNOWN:kw(h.code);return new Y(p,h.message||"")}(o);n=new bw(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gc(t,r.document.name),i=In(r.document.updateTime),o=r.document.createTime?In(r.document.createTime):se.min(),l=new Rt({mapValue:{fields:r.document.fields}}),u=gt.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new gl(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gc(t,r.document),i=r.readTime?In(r.readTime):se.min(),o=gt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new gl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gc(t,r.document),i=r.removedTargetIds||[];n=new gl([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new fR(s,i),l=r.targetId;n=new xw(l,o)}}return n}function AR(t,e){let n;if(e instanceof oa)n={update:cy(t,e.key,e.value)};else if(e instanceof Df)n={delete:ud(t,e.key)};else if(e instanceof Lr)n={update:cy(t,e.key,e.data),updateMask:VR(e.fieldMask)};else{if(!(e instanceof cR))return ne(16599,{dt:e.type});n={verify:ud(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof nu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Go)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ru)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:TR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function CR(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?In(s.updateTime):In(i);return o.isEqual(se.min())&&(o=In(i)),new aR(o,s.transformResults||[])}(n,e))):[]}function NR(t,e){return{documents:[jw(t,e.path)]}}function RR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jw(t,s);const i=function(h){if(h.length!==0)return Mw(dn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:Is(g.field),direction:xR(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ad(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function PR(t){let e=IR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=Ow(m);return g instanceof dn&&dw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(k){return new eu(Ss(k.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Vu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,S=m.values||[];return new Zl(S,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,S=m.values||[];return new Zl(S,g)}(n.endAt)),GN(e,s,o,i,l,"F",u,h)}function kR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ow(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ss(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ss(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ss(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return He.create(Ss(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dn.create(n.compositeFilter.filters.map(r=>Ow(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function xR(t){return vR[t]}function bR(t){return _R[t]}function DR(t){return ER[t]}function Is(t){return{fieldPath:t.canonicalString()}}function Ss(t){return ot.fromServerFormat(t.fieldPath)}function Mw(t){return t instanceof He?function(n){if(n.op==="=="){if(Yg(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NAN"}};if(Jg(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Yg(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NAN"}};if(Jg(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(n.field),op:bR(n.op),value:n.value}}}(t):t instanceof dn?function(n){const r=n.getFilters().map(s=>Mw(s));return r.length===1?r[0]:{compositeFilter:{op:DR(n.op),filters:r}}}(t):ne(54877,{filter:t})}function VR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Uw(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,r,s,i=se.min(),o=se.min(),l=ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.yt=e}}function LR(t){const e=PR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.Sn=new MR}addToCollectionParentIndex(e,n){return this.Sn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Cr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class MR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zw=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(zw,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ui(0)}static ar(){return new ui(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="LruGarbageCollector",FR=1048576;function fy([t,e],[n,r]){const s=fe(t,n);return s===0?fe(e,r):s}class UR{constructor(e){this.Pr=e,this.buffer=new Ze(fy),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();fy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){X(dy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wi(n)?X(dy,"Ignoring IndexedDB error during garbage collection: ",n):await Ei(n)}await this.Ar(3e5)})}}class qR{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Du.ce);const r=new UR(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(hy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hy):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),ws()<=de.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function BR(t,e){return new qR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.changes=new fs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wo(r.mutation,s,Lt.empty(),Ce.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=Qr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=so();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=qn();const o=Eo(),l=function(){return Eo()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Lr)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),wo(p.mutation,h,p.mutation.getFieldMask(),Ce.now())):o.set(h.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>l.set(h,new HR(p,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Eo();let s=new De((o,l)=>o-l),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Lt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(s.get(l.batchId)||pe()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=Tw();p.forEach(g=>{if(!i.has(g)){const S=Rw(n.get(g),r.get(g));S!==null&&m.set(g,S),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return KN(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Qr());let l=qo,u=i;return o.next(h=>B.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?B.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,pe())).next(p=>({batchId:l,changes:ww(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=so();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=so();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,u=>{const h=function(m,g){return new ia(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,gt.newInvalidDocument(p)))});let l=so();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&wo(p.mutation,h,Lt.empty(),Ce.now()),Ou(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return B.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:In(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:LR(s.bundledQuery),readTime:In(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this.overlays=new De(te.comparator),this.Lr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qr();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Qr(),i=n.length+1,o=new te(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Qr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Qr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return B.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dR(n,r));let i=this.Lr.get(n);i===void 0&&(i=pe(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.kr=new Ze(tt.Kr),this.qr=new Ze(tt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new tt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new tt(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new te(new Te([])),r=new tt(n,e),s=new tt(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new te(new Te([])),r=new tt(n,e),s=new tt(n,e+1);let i=pe();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new tt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return te.comparator(e.key,n.key)||fe(e.Hr,n.Hr)}static Ur(e,n){return fe(e.Hr,n.Hr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ze(tt.Kr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new tt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Nf:this.Yn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tt(n,0),s=new tt(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(fe);return n.forEach(s=>{const i=new tt(s,0),o=new tt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),B.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new tt(new te(i),0);let l=new Ze(fe);return this.Jr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Hr)),!0)},o),B.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return B.forEach(n.mutations,s=>{const i=new tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new tt(n,0),s=this.Jr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.ti=e,this.docs=function(){return new De(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():gt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=qn();const o=n.path,l=new te(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||SN(IN(p),r)<=0||(s.has(p.key)||Ou(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ni(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new XR(this)}getSize(e){return B.resolve(this.size)}}class XR extends $R{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.persistence=e,this.ri=new fs(n=>kf(n),xf),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.ii=0,this.si=new Of,this.targetCount=0,this.oi=ui._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),B.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ui(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.lr(n),B.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this._i={},this.overlays={},this.ai=new Du(0),this.ui=!1,this.ui=!0,this.ci=new QR,this.referenceDelegate=e(this),this.li=new ZR(this),this.indexManager=new OR,this.remoteDocumentCache=function(s){return new YR(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new jR(n),this.Pi=new GR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new JR(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new eP(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return B.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class eP extends CN{constructor(e){super(),this.currentSequenceNumber=e}}class Mf{constructor(e){this.persistence=e,this.Ri=new Of,this.Ai=null}static Vi(e){return new Mf(e)}get di(){if(this.Ai)return this.Ai;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,r=>{const s=te.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class iu{constructor(e,n){this.persistence=e,this.fi=new fs(r=>PN(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=BR(this,n)}static Vi(e,n){return new iu(e,n)}Ti(){}Ii(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return B.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,se.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),B.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fl(e.data.value)),n}wr(e,n,r){return B.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ff(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return BS()?8:NN(vt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new tP;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(ws()<=de.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(ws()<=de.DEBUG&&X("QueryEngine","Query:",Ts(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(ws()<=de.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):B.resolve())}gs(e,n){if(ty(n))return B.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tu(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,l);return this.Ss(n,h,o,u.readTime)?this.gs(e,tu(n,null,"F")):this.Ds(e,h,n,u)}))})))}ps(e,n,r,s){return ty(n)||s.isEqual(se.min())?B.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?B.resolve(null):(ws()<=de.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ts(n)),this.Ds(e,o,n,TN(s,qo)).next(l=>l))})}bs(e,n){let r=new Ze(_w(e));return n.forEach((s,i)=>{Ou(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return ws()<=de.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Ts(n)),this.fs.getDocumentsMatchingQuery(e,n,Cr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="LocalStore",rP=3e8;class sP{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new De(fe),this.Fs=new fs(i=>kf(i),xf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function iP(t,e,n,r){return new sP(t,e,n,r)}async function Bw(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=pe();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ns:h,removedBatchIds:o,addedBatchIds:l}))})})}function oP(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const m=h.batch,g=m.keys();let S=B.resolve();return g.forEach(k=>{S=S.next(()=>p.getEntry(u,k)).next(b=>{const O=h.docVersions.get(k);ye(O!==null,48541),b.version.compareTo(O)<0&&(m.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),p.addEntry(b)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=pe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function $w(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function aP(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.li.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.li.addMatchingKeys(i,p.addedDocuments,m)));let S=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(ct.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(m,S),function(b,O,T){return b.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=rP?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,S,p)&&l.push(n.li.updateTargetData(i,S))});let u=qn(),h=pe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(lP(i,o,e.documentUpdates).next(p=>{u=p.Bs,h=p.Ls})),!r.isEqual(se.min())){const p=n.li.getLastRemoteSnapshotVersion(i).next(m=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return B.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.vs=s,i))}function lP(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=qn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):X(Uf,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Bs:o,Ls:s}})}function uP(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Nf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cP(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new ur(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function hd(t,e,n){const r=oe(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!wi(o))throw o;X(Uf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function py(t,e,n){const r=oe(t);let s=se.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=oe(u),g=m.Fs.get(p);return g!==void 0?B.resolve(m.vs.get(g)):m.li.getTargetData(h,p)}(r,o,Tn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:se.min(),n?i:pe())).next(l=>(hP(r,JN(e),l),{documents:l,ks:i})))}function hP(t,e,n){let r=t.Ms.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class my{constructor(){this.activeTargetIds=nR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dP{constructor(){this.vo=new my,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new my,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="ConnectivityMonitor";class yy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){X(gy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){X(gy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa=null;function dd(){return Wa===null?Wa=function(){return 268435456+Math.round(2147483648*Math.random())}():Wa++,"0x"+Wa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc="RestConnection",pP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class mP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Yl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=dd(),l=this.Qo(e,n.toUriEncodedString());X(Kc,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:h}=new URL(l),p=gi(h);return this.zo(e,l,u,r,p).then(m=>(X(Kc,`Received RPC '${e}' ${o}: `,m),m),m=>{throw ls(Kc,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_i}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=pP[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection",Yi=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class Ws extends mP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ws.c_){const e=KE();Yi(e,GE.STAT_EVENT,n=>{n.stat===ed.PROXY?X(ft,"STAT_EVENT: detected buffering proxy"):n.stat===ed.NOPROXY&&X(ft,"STAT_EVENT: detected no buffering proxy")}),Ws.c_=!0}}zo(e,n,r,s,i){const o=dd();return new Promise((l,u)=>{const h=new HE;h.setWithCredentials(!0),h.listenOnce(WE.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case dl.NO_ERROR:const m=h.getResponseJson();X(ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case dl.TIMEOUT:X(ft,`RPC '${e}' ${o} timed out`),u(new Y(q.DEADLINE_EXCEEDED,"Request time out"));break;case dl.HTTP_ERROR:const g=h.getStatus();if(X(ft,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const k=S==null?void 0:S.error;if(k&&k.status&&k.message){const b=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(v)>=0?v:q.UNKNOWN}(k.status);u(new Y(b,k.message))}else u(new Y(q.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Y(q.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{X(ft,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);X(ft,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",p,r,15)})}T_(e,n,r){const s=dd(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");X(ft,`Creating RPC '${e}' stream ${s}: ${h}`,l);const p=o.createWebChannel(h,l);this.I_(p);let m=!1,g=!1;const S=new gP({Ho:k=>{g?X(ft,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(m||(X(ft,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),X(ft,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},Jo:()=>p.close()});return Yi(p,ro.EventType.OPEN,()=>{g||(X(ft,`RPC '${e}' stream ${s} transport opened.`),S.i_())}),Yi(p,ro.EventType.CLOSE,()=>{g||(g=!0,X(ft,`RPC '${e}' stream ${s} transport closed`),S.o_(),this.E_(p))}),Yi(p,ro.EventType.ERROR,k=>{g||(g=!0,ls(ft,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),S.o_(new Y(q.UNAVAILABLE,"The operation could not be completed")))}),Yi(p,ro.EventType.MESSAGE,k=>{var b;if(!g){const O=k.data[0];ye(!!O,16349);const T=O,v=(T==null?void 0:T.error)||((b=T[0])==null?void 0:b.error);if(v){X(ft,`RPC '${e}' stream ${s} received error:`,v);const C=v.status;let x=function(_){const y=qe[_];if(y!==void 0)return kw(y)}(C),U=v.message;C==="NOT_FOUND"&&U.includes("database")&&U.includes("does not exist")&&U.includes(this.databaseId.database)&&ls(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),x===void 0&&(x=q.INTERNAL,U="Unknown error status: "+C+" with message "+v.message),g=!0,S.o_(new Y(x,U)),p.close()}else X(ft,`RPC '${e}' stream ${s} received:`,O),S.__(O)}}),Ws.u_(),setTimeout(()=>{S.s_()},0),S}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return QE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){return new Ws(t)}function Qc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){return new wR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws.c_=!1;class Hw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="PersistentStream";class Ww{constructor(e,n,r,s,i,o,l,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Y(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(vy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(X(vy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vP extends Ww{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=SR(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?In(o.readTime):se.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=cd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=id(u)?{documents:NR(i,u)}:{query:RR(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Dw(i,o.resumeToken);const h=ad(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(se.min())>0){l.readTime=su(i,o.snapshotVersion.toTimestamp());const h=ad(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=kR(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=cd(this.serializer),n.removeTarget=e,this.K_(n)}}class _P extends Ww{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=CR(e.writeResults,e.commitTime),r=In(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=cd(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>AR(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{}class wP extends EP{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,ld(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(q.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,ld(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function TP(t,e,n,r){return new wP(t,e,n,r)}class IP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zn(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="RemoteStore";class SP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{ps(this)&&(X(cs,"Restarting streams for network reachability change."),await async function(u){const h=oe(u);h.Ea.add(4),await la(h),h.Va.set("Unknown"),h.Ea.delete(4),await qu(h)}(this))})}),this.Va=new IP(r,s)}}async function qu(t){if(ps(t))for(const e of t.Ra)await e(!0)}async function la(t){for(const e of t.Ra)await e(!1)}function Gw(t,e){const n=oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$f(n)?Bf(n):Ti(n).O_()&&qf(n,e))}function zf(t,e){const n=oe(t),r=Ti(n);n.Ia.delete(e),r.O_()&&Kw(n,e),n.Ia.size===0&&(r.O_()?r.L_():ps(n)&&n.Va.set("Unknown"))}function qf(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ti(t).Z_(e)}function Kw(t,e){t.da.$e(e),Ti(t).X_(e)}function Bf(t){t.da=new yR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ti(t).start(),t.Va.ua()}function $f(t){return ps(t)&&!Ti(t).x_()&&t.Ia.size>0}function ps(t){return oe(t).Ea.size===0}function Qw(t){t.da=void 0}async function AP(t){t.Va.set("Online")}async function CP(t){t.Ia.forEach((e,n)=>{qf(t,e)})}async function NP(t,e){Qw(t),$f(t)?(t.Va.ha(e),Bf(t)):t.Va.set("Unknown")}async function RP(t,e,n){if(t.Va.set("Online"),e instanceof bw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){X(cs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ou(t,r)}else if(e instanceof gl?t.da.Xe(e):e instanceof xw?t.da.st(e):t.da.tt(e),!n.isEqual(se.min()))try{const r=await $w(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ia.get(h);p&&i.Ia.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=i.Ia.get(u);if(!p)return;i.Ia.set(u,p.withResumeToken(ct.EMPTY_BYTE_STRING,p.snapshotVersion)),Kw(i,u);const m=new ur(p.target,u,h,p.sequenceNumber);qf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X(cs,"Failed to raise snapshot:",r),await ou(t,r)}}async function ou(t,e,n){if(!wi(e))throw e;t.Ea.add(1),await la(t),t.Va.set("Offline"),n||(n=()=>$w(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(cs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qu(t)})}function Jw(t,e){return e().catch(n=>ou(t,n,e))}async function Bu(t){const e=oe(t),n=kr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Nf;for(;PP(e);)try{const s=await uP(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,kP(e,s)}catch(s){await ou(e,s)}Yw(e)&&Xw(e)}function PP(t){return ps(t)&&t.Ta.length<10}function kP(t,e){t.Ta.push(e);const n=kr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function Yw(t){return ps(t)&&!kr(t).x_()&&t.Ta.length>0}function Xw(t){kr(t).start()}async function xP(t){kr(t).ra()}async function bP(t){const e=kr(t);for(const n of t.Ta)e.ea(n.mutations)}async function DP(t,e,n){const r=t.Ta.shift(),s=Vf.from(r,e,n);await Jw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bu(t)}async function VP(t,e){e&&kr(t).Y_&&await async function(r,s){if(function(o){return pR(o)&&o!==q.ABORTED}(s.code)){const i=r.Ta.shift();kr(r).B_(),await Jw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bu(r)}}(t,e),Yw(t)&&Xw(t)}async function _y(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),X(cs,"RemoteStore received new credentials");const r=ps(n);n.Ea.add(3),await la(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qu(n)}async function jP(t,e){const n=oe(t);e?(n.Ea.delete(2),await qu(n)):e||(n.Ea.add(2),await la(n),n.Va.set("Unknown"))}function Ti(t){return t.ma||(t.ma=function(n,r,s){const i=oe(n);return i.sa(),new vP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:AP.bind(null,t),Yo:CP.bind(null,t),t_:NP.bind(null,t),J_:RP.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),$f(t)?Bf(t):t.Va.set("Unknown")):(await t.ma.stop(),Qw(t))})),t.ma}function kr(t){return t.fa||(t.fa=function(n,r,s){const i=oe(n);return i.sa(),new _P(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:xP.bind(null,t),t_:VP.bind(null,t),ta:bP.bind(null,t),na:DP.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Bu(t)):(await t.fa.stop(),t.Ta.length>0&&(X(cs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Hf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wf(t,e){if(zn("AsyncQueue",`${e}: ${t}`),wi(t))return new Y(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{static emptySet(e){return new Gs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=so(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this.ga=new De(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ci{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ci(e,n,Gs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class OP{constructor(){this.queries=wy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=wy(),i.forEach((o,l)=>{for(const u of l.ba)u.onError(r)})})(this,new Y(q.ABORTED,"Firestore shutting down"))}}function wy(){return new fs(t=>vw(t),Lu)}async function MP(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new LP,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Wf(o,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Gf(n)}async function FP(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function UP(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&Gf(n)}function zP(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Gf(t){t.Ca.forEach(e=>{e.next()})}var fd,Ty;(Ty=fd||(fd={})).Ma="default",Ty.Cache="cache";class qP{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ci(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.key=e}}class e0{constructor(e){this.key=e}}class BP{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pe(),this.mutatedKeys=pe(),this.eu=_w(e),this.tu=new Gs(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Ey,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),S=Ou(this.query,m)?m:null,k=!!g&&this.mutatedKeys.has(g.key),b=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let O=!1;g&&S?g.data.isEqual(S.data)?k!==b&&(r.track({type:3,doc:S}),O=!0):this.su(g,S)||(r.track({type:2,doc:S}),O=!0,(u&&this.eu(S,u)>0||h&&this.eu(S,h)<0)&&(l=!0)):!g&&S?(r.track({type:0,doc:S}),O=!0):g&&!S&&(r.track({type:1,doc:g}),O=!0,(u||h)&&(l=!0)),O&&(S?(o=o.add(S),i=b?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(S,k){const b=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:O})}};return b(S)-b(k)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,h=u!==this.Xa;return this.Xa=u,o.length!==0||h?{snapshot:new ci(this.query,e.tu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ey,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new e0(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Zw(r))}),n}cu(e){this.Za=e.ks,this.Ya=pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ci.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Kf="SyncEngine";class $P{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HP{constructor(e){this.key=e,this.hu=!1}}class WP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new fs(l=>vw(l),Lu),this.Iu=new Map,this.Eu=new Set,this.Ru=new De(te.comparator),this.Au=new Map,this.Vu=new Of,this.du={},this.mu=new Map,this.fu=ui.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GP(t,e,n=!0){const r=o0(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await t0(r,e,n,!0),s}async function KP(t,e){const n=o0(t);await t0(n,e,!0,!1)}async function t0(t,e,n,r){const s=await cP(t.localStore,Tn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await QP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Gw(t.remoteStore,s),l}async function QP(t,e,n,r,s){t.pu=(m,g,S)=>async function(b,O,T,v){let C=O.view.ru(T);C.Ss&&(C=await py(b.localStore,O.query,!1).then(({documents:_})=>O.view.ru(_,C)));const x=v&&v.targetChanges.get(O.targetId),U=v&&v.targetMismatches.get(O.targetId)!=null,V=O.view.applyChanges(C,b.isPrimaryClient,x,U);return Sy(b,O.targetId,V.au),V.snapshot}(t,m,g,S);const i=await py(t.localStore,e,!0),o=new BP(e,i.ks),l=o.ru(i.documents),u=aa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);Sy(t,n,h.au);const p=new $P(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function JP(t,e,n){const r=oe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Lu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await hd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&zf(r.remoteStore,s.targetId),pd(r,s.targetId)}).catch(Ei)):(pd(r,s.targetId),await hd(r.localStore,s.targetId,!0))}async function YP(t,e){const n=oe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zf(n.remoteStore,r.targetId))}async function XP(t,e,n){const r=ik(t);try{const s=await function(o,l){const u=oe(o),h=Ce.now(),p=l.reduce((S,k)=>S.add(k.key),pe());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let k=qn(),b=pe();return u.xs.getEntries(S,p).next(O=>{k=O,k.forEach((T,v)=>{v.isValidDocument()||(b=b.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,k)).next(O=>{m=O;const T=[];for(const v of l){const C=uR(v,m.get(v.key).overlayedDocument);C!=null&&T.push(new Lr(v.key,C,uw(C.value.mapValue),un.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,T,l)}).next(O=>{g=O;const T=O.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(S,O.batchId,T)})}).then(()=>({batchId:g.batchId,changes:ww(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.du[o.currentUser.toKey()];h||(h=new De(fe)),h=h.insert(l,u),o.du[o.currentUser.toKey()]=h}(r,s.batchId,n),await ua(r,s.changes),await Bu(r.remoteStore)}catch(s){const i=Wf(s,"Failed to persist write");n.reject(i)}}async function n0(t,e){const n=oe(t);try{const r=await aP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ye(o.hu,14607):s.removedDocuments.size>0&&(ye(o.hu,42227),o.hu=!1))}),await ua(n,r,e)}catch(r){await Ei(r)}}function Iy(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=oe(o);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const g of m.ba)g.va(l)&&(h=!0)}),h&&Gf(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZP(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new De(te.comparator);o=o.insert(i,gt.newNoDocument(i,se.min()));const l=pe().add(i),u=new Uu(se.min(),new Map,new De(fe),o,l);await n0(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),Qf(r)}else await hd(r.localStore,e,!1).then(()=>pd(r,e,n)).catch(Ei)}async function ek(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await oP(n.localStore,e);s0(n,r,null),r0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ua(n,s)}catch(s){await Ei(s)}}async function tk(t,e,n){const r=oe(t);try{const s=await function(o,l){const u=oe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(ye(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);s0(r,e,n),r0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ua(r,s)}catch(s){await Ei(s)}}function r0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function s0(t,e,n){const r=oe(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function pd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||i0(t,r)})}function i0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(zf(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Qf(t))}function Sy(t,e,n){for(const r of n)r instanceof Zw?(t.Vu.addReference(r.key,e),nk(t,r)):r instanceof e0?(X(Kf,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||i0(t,r.key)):ne(19791,{wu:r})}function nk(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(X(Kf,"New document in limbo: "+n),t.Eu.add(r),Qf(t))}function Qf(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(Te.fromString(e)),r=t.fu.next();t.Au.set(r,new HP(n)),t.Ru=t.Ru.insert(n,r),Gw(t.remoteStore,new ur(Tn(gw(n.path)),r,"TargetPurposeLimboResolution",Du.ce))}}async function ua(t,e,n){const r=oe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Ff.Es(u.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(u,h){const p=oe(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(h,g=>B.forEach(g.Ts,S=>p.persistence.referenceDelegate.addReference(m,g.targetId,S)).next(()=>B.forEach(g.Is,S=>p.persistence.referenceDelegate.removeReference(m,g.targetId,S)))))}catch(m){if(!wi(m))throw m;X(Uf,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const S=p.vs.get(g),k=S.snapshotVersion,b=S.withLastLimboFreeSnapshotVersion(k);p.vs=p.vs.insert(g,b)}}}(r.localStore,i))}async function rk(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){X(Kf,"User change. New user:",e.toKey());const r=await Bw(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new Y(q.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ua(n,r.Ns)}}function sk(t,e){const n=oe(t),r=n.Au.get(e);if(r&&r.hu)return pe().add(r.key);{let s=pe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function o0(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=n0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZP.bind(null,e),e.Pu.J_=UP.bind(null,e.eventManager),e.Pu.yu=zP.bind(null,e.eventManager),e}function ik(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ek.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tk.bind(null,e),e}class au{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iP(this.persistence,new nP,e.initialUser,this.serializer)}Cu(e){return new qw(Mf.Vi,this.serializer)}Du(e){return new dP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}au.provider={build:()=>new au};class ok extends au{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ye(this.persistence.referenceDelegate instanceof iu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new qw(r=>iu.Vi(r,n),this.serializer)}}class md{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Iy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rk.bind(null,this.syncEngine),await jP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OP}()}createDatastore(e){const n=zu(e.databaseInfo.databaseId),r=yP(e.databaseInfo);return TP(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new SP(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Iy(this.syncEngine,n,0),function(){return yy.v()?new yy:new fP}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,p){const m=new WP(s,i,o,l,u,h);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);X(cs,"RemoteStore shutting down."),i.Ea.add(5),await la(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}md.provider={build:()=>new md};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="FirestoreClient";class lk{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=Cf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X(xr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(xr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jc(t,e){t.asyncQueue.verifyOperationInProgress(),X(xr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Bw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ay(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uk(t);X(xr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_y(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>_y(e.remoteStore,s)),t._onlineComponents=e}async function uk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(xr,"Using user provided OfflineComponentProvider");try{await Jc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ls("Error using user provided cache. Falling back to memory cache: "+n),await Jc(t,new au)}}else X(xr,"Using default OfflineComponentProvider"),await Jc(t,new ok(void 0));return t._offlineComponents}async function a0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(xr,"Using user provided OnlineComponentProvider"),await Ay(t,t._uninitializedComponentsProvider._online)):(X(xr,"Using default OnlineComponentProvider"),await Ay(t,new md))),t._onlineComponents}function ck(t){return a0(t).then(e=>e.syncEngine)}async function hk(t){const e=await a0(t),n=e.eventManager;return n.onListen=GP.bind(null,e.syncEngine),n.onUnlisten=JP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YP.bind(null,e.syncEngine),n}function dk(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const p=new ak({next:g=>{p.Nu(),o.enqueueAndForget(()=>FP(i,m)),g.fromCache&&u.source==="server"?h.reject(new Y(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new qP(l,p,{includeMetadataChanges:!0,Ka:!0});return MP(i,m)}(await hk(t),t.asyncQueue,e,n,r)),r.promise}function fk(t,e){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>XP(await ck(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="ComponentProvider",Cy=new Map;function mk(t,e,n,r,s){return new bN(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,l0(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="firestore.googleapis.com",Ny=!0;class Ry{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=u0,this.ssl=Ny}else this.host=e.host,this.ssl=e.ssl??Ny;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FR)throw new Y(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $u{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ry({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ry(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hN;switch(r.type){case"firstParty":return new mN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Cy.get(n);r&&(X(pk,"Removing Datastore"),Cy.delete(n),r.terminate())}(this),Promise.resolve()}}function gk(t,e,n,r={}){var h;t=us(t,$u);const s=gi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(oE(`https://${l}`),aE("Firestore",!0)),i.host!==u0&&i.host!==l&&ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!ss(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=pt.MOCK_USER;else{p=VS(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Y(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new pt(g)}t._authCredentials=new dN(new YE(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ms(this.firestore,e,this._query)}}class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sa(n,Xe._jsonSchema))return new Xe(e,r||null,new te(Te.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:We("string",Xe._jsonSchemaVersion),referencePath:We("string")};class Ir extends ms{constructor(e,n,r){super(e,n,gw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new te(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function ca(t,e,...n){if(t=ut(t),XE("collection","path",e),t instanceof $u){const r=Te.fromString(e,...n);return zg(r),new Ir(t,null,r)}{if(!(t instanceof Xe||t instanceof Ir))throw new Y(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return zg(r),new Ir(t.firestore,null,r)}}function Ii(t,e,...n){if(t=ut(t),arguments.length===1&&(e=Cf.newId()),XE("doc","path",e),t instanceof $u){const r=Te.fromString(e,...n);return Ug(r),new Xe(t,null,new te(r))}{if(!(t instanceof Xe||t instanceof Ir))throw new Y(q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Ug(r),new Xe(t.firestore,t instanceof Ir?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="AsyncQueue";class ky{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hw(this,"async_queue_retry"),this._c=()=>{const r=Qc();r&&X(Py,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Qc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!wi(e))throw e;X(Py,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,zn("INTERNAL UNHANDLED ERROR: ",xy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Hf.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:xy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function xy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ha extends $u{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ky,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ky(e),this._firestoreClient=void 0,await e}}}function yk(t,e){const n=typeof t=="object"?t:hE(),r=typeof t=="string"?t:Yl,s=pf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=bS("firestore");i&&gk(s,...i)}return s}function c0(t){if(t._terminated)throw new Y(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vk(t),t._firestoreClient}function vk(t){var r,s,i,o;const e=t._freezeSettings(),n=mk(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new lk(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gt(ct.fromBase64String(e))}catch(n){throw new Y(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gt(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sa(e,Gt._jsonSchema))return Gt.fromBase64String(e.bytes)}}Gt._jsonSchemaVersion="firestore/bytes/1.0",Gt._jsonSchema={type:We("string",Gt._jsonSchemaVersion),bytes:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sn._jsonSchemaVersion}}static fromJSON(e){if(sa(e,Sn._jsonSchema))return new Sn(e.latitude,e.longitude)}}Sn._jsonSchemaVersion="firestore/geoPoint/1.0",Sn._jsonSchema={type:We("string",Sn._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sa(e,cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new cn(e.vectorValues);throw new Y(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cn._jsonSchemaVersion="firestore/vectorValue/1.0",cn._jsonSchema={type:We("string",cn._jsonSchemaVersion),vectorValues:We("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=/^__.*__$/;class Ek{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new oa(e,this.data,n,this.fieldTransforms)}}class h0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function d0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{dataSource:t})}}class Xf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Xf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return lu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(d0(this.dataSource)&&_k.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class wk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zu(e)}createContext(e,n,r,s=!1){return new Xf({dataSource:e,methodName:n,targetDoc:r,path:ot.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zf(t){const e=t._freezeSettings(),n=zu(t._databaseId);return new wk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tk(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);ep("Data must be an object, but it was:",o,r);const l=f0(r,o);let u,h;if(i.merge)u=new Lt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=hi(e,m,n);if(!o.contains(g))throw new Y(q.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);g0(p,g)||p.push(g)}u=new Lt(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new Ek(new Rt(l),u,h)}class Hu extends Yf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hu}}function Ik(t,e,n,r){const s=t.createContext(1,e,n);ep("Data must be an object, but it was:",s,r);const i=[],o=Rt.empty();jr(r,(u,h)=>{const p=m0(e,u,n);h=ut(h);const m=s.childContextForFieldPath(p);if(h instanceof Hu)i.push(p);else{const g=da(h,m);g!=null&&(i.push(p),o.set(p,g))}});const l=new Lt(i);return new h0(o,l,s.fieldTransforms)}function Sk(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[hi(e,r,n)],u=[s];if(i.length%2!=0)throw new Y(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(hi(e,i[g])),u.push(i[g+1]);const h=[],p=Rt.empty();for(let g=l.length-1;g>=0;--g)if(!g0(h,l[g])){const S=l[g];let k=u[g];k=ut(k);const b=o.childContextForFieldPath(S);if(k instanceof Hu)h.push(S);else{const O=da(k,b);O!=null&&(h.push(S),p.set(S,O))}}const m=new Lt(h);return new h0(p,m,o.fieldTransforms)}function Ak(t,e,n,r=!1){return da(n,t.createContext(r?4:3,e))}function da(t,e){if(p0(t=ut(t)))return ep("Unsupported field value:",e,t),f0(t,e);if(t instanceof Yf)return function(r,s){if(!d0(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=da(l,s.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ce.fromDate(r);return{timestampValue:su(s.serializer,i)}}if(r instanceof Ce){const i=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:su(s.serializer,i)}}if(r instanceof Sn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gt)return{bytesValue:Dw(s.serializer,r._byteString)};if(r instanceof Xe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof cn)return function(o,l){const u=o instanceof cn?o.toArray():o;return{mapValue:{fields:{[aw]:{stringValue:lw},[Xl]:{arrayValue:{values:u.map(p=>{if(typeof p!="number")throw l.createError("VectorValues must only contain numeric values.");return bf(l.serializer,p)})}}}}}}(r,s);if(Uw(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${bu(r)}`)}(t,e)}function f0(t,e){const n={};return tw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(t,(r,s)=>{const i=da(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function p0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof Sn||t instanceof Gt||t instanceof Xe||t instanceof Yf||t instanceof cn||Uw(t))}function ep(t,e,n){if(!p0(n)||!ZE(n)){const r=bu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function hi(t,e,n){if((e=ut(e))instanceof Jf)return e._internalPath;if(typeof e=="string")return m0(t,e);throw lu("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ck=new RegExp("[~\\*/\\[\\]]");function m0(t,e,n){if(e.search(Ck)>=0)throw lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jf(...e.split("."))._internalPath}catch{throw lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Y(q.INVALID_ARGUMENT,l+t+u)}function g0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{convertValue(e,n="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return jr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Xl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Me(o.doubleValue));return new cn(n)}convertGeoPoint(e){return new Sn(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ju(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bo(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);ye(Fw(r),9688,{name:e});const s=new $o(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||zn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk extends Nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}const by="@firebase/firestore",Dy="4.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Pk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(hi("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Pk extends y0{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tp{}class v0 extends tp{}function xk(t,e,...n){let r=[];e instanceof tp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof np).length,l=i.filter(u=>u instanceof Wu).length;if(o>1||o>0&&l>0)throw new Y(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wu extends v0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wu(e,n,r)}_apply(e){const n=this._parse(e);return _0(e._query,n),new ms(e.firestore,e.converter,od(e._query,n))}_parse(e){const n=Zf(e.firestore);return function(i,o,l,u,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Y(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){jy(m,p);const k=[];for(const b of m)k.push(Vy(u,i,b));g={arrayValue:{values:k}}}else g=Vy(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||jy(m,p),g=Ak(l,o,m,p==="in"||p==="not-in");return He.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bk(t,e,n){const r=e,s=hi("where",t);return Wu._create(s,r,n)}class np extends tp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new np(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:dn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)_0(o,u),o=od(o,u)}(e._query,n),new ms(e.firestore,e.converter,od(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rp extends v0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new rp(e,n,r)}_apply(e){return new ms(e.firestore,e.converter,tu(e._query,this._limit,this._limitType))}}function Dk(t){return rp._create("limit",t,"F")}function Vy(t,e,n){if(typeof(n=ut(n))=="string"){if(n==="")throw new Y(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yw(e)&&n.indexOf("/")!==-1)throw new Y(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!te.isDocumentKey(r))throw new Y(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qg(t,new te(r))}if(n instanceof Xe)return Qg(t,n._key);throw new Y(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bu(n)}.`)}function jy(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _0(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Vk(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ga{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ks extends y0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hi("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ks._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ks._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ks._jsonSchema={type:We("string",Ks._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class yl extends Ks{data(e={}){return super.data(e)}}class Qs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ga(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yl(this._firestore,this._userDataWriter,r.key,r,new Ga(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new yl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ga(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new yl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ga(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:jk(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qs._jsonSchemaVersion="firestore/querySnapshot/1.0",Qs._jsonSchema={type:We("string",Qs._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};function sp(t){t=us(t,ms);const e=us(t.firestore,ha),n=c0(e),r=new Rk(e);return kk(t._query),dk(n,t._query).then(s=>new Qs(e,r,t,s))}function Gu(t,e,n,...r){t=us(t,Xe);const s=us(t.firestore,ha),i=Zf(s);let o;return o=typeof(e=ut(e))=="string"||e instanceof Jf?Sk(i,"updateDoc",t._key,e,n,r):Ik(i,"updateDoc",t._key,e),ip(s,[o.toMutation(t._key,un.exists(!0))])}function Lk(t){return ip(us(t.firestore,ha),[new Df(t._key,un.none())])}function E0(t,e){const n=us(t.firestore,ha),r=Ii(t),s=Vk(t.converter,e),i=Zf(t.firestore);return ip(n,[Tk(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,un.exists(!1))]).then(()=>r)}function ip(t,e){const n=c0(t);return fk(n,e)}(function(e,n=!0){cN(yi),si(new is("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ha(new fN(r.getProvider("auth-internal")),new gN(o,r.getProvider("app-check-internal")),DN(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Er(by,Dy,e),Er(by,Dy,"esm2020")})();const To={apiKey:"AIzaSyCHQjpZqaJZmhWERHnk1LD1CrlU31eQeDI",authDomain:"bondiolafc-3951d.firebaseapp.com",projectId:"bondiolafc-3951d",storageBucket:"bondiolafc-3951d.firebasestorage.app",messagingSenderId:"11725352130",appId:"1:11725352130:web:8cee15666d7a632e761f5b"},Ly=!!(To.apiKey&&To.projectId);let di=null;try{To.apiKey&&To.projectId&&(di=cE(To))}catch{di=null}const Es=di?oN(di):null,Ge=di?yk(di):null,Ok=new Pn,Xi="bondiola-fc-auth",w0=z.createContext(null);function Mk({children:t}){const[e,n]=z.useState(null),[r,s]=z.useState(!0);z.useEffect(()=>{if(!Es){const p=localStorage.getItem(Xi);n(p==="guest"?{type:"guest"}:null),s(!1);return}const h=K1(Es,p=>{if(p)localStorage.removeItem(Xi),n({type:"google",...p});else{const m=localStorage.getItem(Xi);n(m==="guest"?{type:"guest"}:null)}s(!1)});return()=>h()},[]);const u={user:e,loading:r,signInWithGoogle:async()=>{if(!Es)throw new Error('Google no est configurado. Us "Entrar como invitado".');try{await mC(Es,Ok)}catch(h){throw console.error("Error al iniciar sesin con Google:",h),h}},signInAsGuest:()=>{n({type:"guest"}),localStorage.setItem(Xi,"guest")},signOut:async()=>{if((e==null?void 0:e.type)==="guest"){n(null),localStorage.removeItem(Xi);return}Es&&await Q1(Es),n(null)},isAuthenticated:!!e};return d.jsx(w0.Provider,{value:u,children:t})}function T0(){const t=z.useContext(w0);if(!t)throw new Error("useAuth debe usarse dentro de AuthProvider");return t}const Si="jugadores",Ku="partidos";function Ka(t){return t==null||t===""?"":String(t).trim().toLowerCase().normalize("NFD").replace(new RegExp("\\p{Mark}","gu"),"")}function Fk(t){if(!t||typeof t!="string")return null;const e=new Date,n=new Date(t);if(Number.isNaN(n.getTime()))return null;let r=e.getFullYear()-n.getFullYear();const s=e.getMonth()-n.getMonth();return(s<0||s===0&&e.getDate()<n.getDate())&&r--,r>=0?r:null}async function Ot(){return Ge?(await sp(ca(Ge,Si))).docs.map(e=>{const n=e.data(),r=Fk(n.fechaNacimiento),{aos:s,...i}=n,o=typeof n.elo=="number"&&Number.isFinite(n.elo)?n.elo:900;return{id:e.id,...i,elo:o,admin:n.admin===!0,aos:r??0}}):[]}async function Yc(t){if(!Ge||!t)return null;const e=xk(ca(Ge,Si),bk("mail","==",t),Dk(1)),n=await sp(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}}const Be="__general__";function uu(t,e){const n=(t||"").trim();if(!n)return{};const r=Ka(n);for(const s of e){const i=Ka(s.apodo),o=Ka(s.nombre),l=Ka((s.nombre||"").split(/\s/)[0]);if(r===i||r===o||r===l)return{id:s.id}}return{nombre:n}}function Qu(t,e){if(!t||!e||e.length===0)return t;const n=o=>Array.isArray(o)?o.map(l=>{if(l==null)return{};if(typeof l=="string"){const u=uu(l,e);return u.id?{id:u.id}:{nombre:l}}return typeof l=="object"&&(l.id||l.nombre)?{id:l.id,nombre:l.nombre}:{}}):[],r=o=>{if(!Array.isArray(o))return[];const l=u=>{if(u==null||u===""||u==="Anotador general")return Be;if(typeof u=="string"&&u.startsWith("guest:")||typeof u=="string"&&u.length>0&&u!==Be)return u;const h=uu(String(u),e);return h.id||(h.nombre?`guest:${h.nombre}`:Be)};return o.map(l)},s=t.equipoLocal?{...t.equipoLocal,jugadores:n(t.equipoLocal.jugadores??[]),golesAnotadores:r(t.equipoLocal.golesAnotadores??[])}:t.equipoLocal,i=t.equipoVisitante?{...t.equipoVisitante,jugadores:n(t.equipoVisitante.jugadores??[]),golesAnotadores:r(t.equipoVisitante.golesAnotadores??[])}:t.equipoVisitante;return{...t,equipoLocal:s,equipoVisitante:i}}function I0(t,e){return!t||!e?t||[]:t.map(n=>Qu(n,e))}async function Js(){return Ge?(await sp(ca(Ge,Ku))).docs.map(n=>({id:n.id,...n.data()})).sort((n,r)=>{const s=new Date((n.fecha||"")+" "+(n.hora||""));return new Date((r.fecha||"")+" "+(r.hora||""))-s}):[]}async function Uk(t){if(!Ge)throw new Error("Firestore no est configurado");const{id:e,aos:n,...r}=t;return(await E0(ca(Ge,Si),{...r,admin:r.admin===!0})).id}async function zk(t){if(!Ge)throw new Error("Firestore no est configurado");const{id:e,...n}=t;return(await E0(ca(Ge,Ku),n)).id}function gd(t){if(t===void 0||t===null)return null;if(Array.isArray(t))return t.map(e=>{const n=gd(e);return n===void 0?null:n});if(typeof t=="object"&&t.constructor===Object){const e={};for(const[n,r]of Object.entries(t)){if(r===void 0)continue;const s=gd(r);s!==void 0&&(e[n]=s)}return e}return t}async function op(t,e){if(!Ge)throw new Error("Firestore no est configurado");const n=Ii(Ge,Ku,t),r=gd(e);r&&Object.keys(r).length>0&&await Gu(n,r)}async function qk(t){if(!Ge)throw new Error("Firestore no est configurado");const e=Ii(Ge,Ku,t);await Lk(e)}async function Bk(t,e){var b,O,T,v,C,x,U,V;if(!t||t.estadisticasAplicadas!==!0)return;const n=new Map(e.map(_=>[_.id,_])),r=((b=t.equipoLocal)==null?void 0:b.nombre)||"Rojo";(O=t.equipoVisitante)!=null&&O.nombre;const s=t.ganador,i=s==="Empate",o=!i&&s===r,l=_=>{const y=new Map;return(_||[]).forEach(E=>{E&&E!==Be&&!String(E).startsWith("guest:")&&y.set(E,(y.get(E)||0)+1)}),y},u=l((T=t.equipoLocal)==null?void 0:T.golesAnotadores),h=l((v=t.equipoVisitante)==null?void 0:v.golesAnotadores),p=((C=t.equipoLocal)==null?void 0:C.jugadores)??[],m=((x=t.equipoVisitante)==null?void 0:x.jugadores)??[],g=((U=t.equipoLocal)==null?void 0:U.eloDeltas)??[],S=((V=t.equipoVisitante)==null?void 0:V.eloDeltas)??[],k=[];p.forEach((_,y)=>{if(!(_!=null&&_.id))return;const E=n.get(_.id);if(!E)return;const N=g[y],A=u.get(_.id)||0,P=Math.max(0,(E.partidos??0)-1),I=Math.max(0,(E.victorias??0)-(i?0:o?1:0)),W=Math.max(0,(E.partidosEmpatados??0)-(i?1:0)),M=Math.max(0,(E.partidosPerdidos??0)-(i||o?0:1)),F=Math.max(0,(E.goles??0)-A),$=typeof N=="number",j=$?(E.elo??900)-N:E.elo??900,K=$&&Array.isArray(E.eloHistorial)&&E.eloHistorial.length>0?E.eloHistorial.slice(0,-1):E.eloHistorial??[];k.push({id:_.id,partidos:P,victorias:I,partidosEmpatados:W,partidosPerdidos:M,goles:F,elo:Math.max(0,Math.round(j)),eloHistorial:K})}),m.forEach((_,y)=>{if(!(_!=null&&_.id))return;const E=n.get(_.id);if(!E)return;const N=S[y],A=h.get(_.id)||0,P=Math.max(0,(E.partidos??0)-1),I=Math.max(0,(E.victorias??0)-(i||o?0:1)),W=Math.max(0,(E.partidosEmpatados??0)-(i?1:0)),M=Math.max(0,(E.partidosPerdidos??0)-(i?0:o?1:0)),F=Math.max(0,(E.goles??0)-A),$=typeof N=="number",j=$?(E.elo??900)-N:E.elo??900,K=$&&Array.isArray(E.eloHistorial)&&E.eloHistorial.length>0?E.eloHistorial.slice(0,-1):E.eloHistorial??[];k.push({id:_.id,partidos:P,victorias:I,partidosEmpatados:W,partidosPerdidos:M,goles:F,elo:Math.max(0,Math.round(j)),eloHistorial:K})}),await Promise.all(k.map(_=>cu(_.id,{elo:_.elo,eloHistorial:_.eloHistorial,partidos:_.partidos,victorias:_.victorias,partidosEmpatados:_.partidosEmpatados,partidosPerdidos:_.partidosPerdidos,goles:_.goles})))}async function $k(t,e){if(!(t!=null&&t.id))throw new Error("Partido invlido");t.estadisticasAplicadas===!0&&await Bk(t,e),await qk(t.id)}async function Hk(t,e){var S,k,b,O,T,v,C,x;if(!(t!=null&&t.id))throw new Error("Partido invlido");const n=await Ot(),s=Qu(t,n),i=((S=s.equipoLocal)==null?void 0:S.goles)??0,o=((k=s.equipoVisitante)==null?void 0:k.goles)??0,l=((b=s.equipoLocal)==null?void 0:b.nombre)||"Rojo",u=((O=s.equipoVisitante)==null?void 0:O.nombre)||"Azul",h=i>o?l:o>i?u:"Empate",p={...s.equipoLocal,nombre:l,jugadores:((T=s.equipoLocal)==null?void 0:T.jugadores)??[],goles:i,golesAnotadores:((v=s.equipoLocal)==null?void 0:v.golesAnotadores)??[]},m={...s.equipoVisitante,nombre:u,jugadores:((C=s.equipoVisitante)==null?void 0:C.jugadores)??[],goles:o,golesAnotadores:((x=s.equipoVisitante)==null?void 0:x.golesAnotadores)??[]},g=s.estadisticasAplicadas!==!0;if(g){const{updates:U,eloDeltasLocal:V,eloDeltasVisitante:_}=S0({...s,equipoLocal:p,equipoVisitante:m},h,n);p.eloDeltas=V,m.eloDeltas=_;const y=W=>{const M=new Map;return(W||[]).forEach(F=>{F&&F!==Be&&!String(F).startsWith("guest:")&&M.set(F,(M.get(F)||0)+1)}),M},E=y(p.golesAnotadores),N=y(m.golesAnotadores),A=new Map(n.map(W=>[W.id,W])),P=new Set((p.jugadores??[]).map(W=>W==null?void 0:W.id).filter(Boolean));new Set((m.jugadores??[]).map(W=>W==null?void 0:W.id).filter(Boolean));const I=(W,M)=>W&&M.get(W.id)||0;await Promise.all(U.map(W=>{const M=A.get(W.id),$=M&&P.has(M.id)?I(M,E):I(M,N),j=((M==null?void 0:M.goles)??0)+$;return cu(W.id,{elo:W.newElo,eloHistorial:W.eloHistorial,partidos:W.partidos,victorias:W.victorias,partidosEmpatados:W.partidosEmpatados,partidosPerdidos:W.partidosPerdidos,goles:j})}))}await op(s.id,{concluido:!0,equipoLocal:p,equipoVisitante:m,ganador:h,...g?{estadisticasAplicadas:!0}:{}})}async function Wk(t,{mail:e,registrado:n}){if(!Ge)throw new Error("Firestore no est configurado");const r=Ii(Ge,Si,t);await Gu(r,{mail:e||"",registrado:!0})}async function cu(t,e){if(!Ge)throw new Error("Firestore no est configurado");const n=Ii(Ge,Si,t),r=Math.max(0,Math.round(Number(e.elo)||0)),s=Array.isArray(e.eloHistorial)?e.eloHistorial:[],i=Math.max(0,Math.round(Number(e.partidos)||0)),o=Math.max(0,Math.round(Number(e.victorias)||0)),l=Math.max(0,Math.round(Number(e.partidosEmpatados)||0)),u=Math.max(0,Math.round(Number(e.partidosPerdidos)||0)),h=Math.max(0,Math.round(Number(e.goles)||0));await Gu(n,{elo:r,eloHistorial:s,partidos:i,victorias:o,partidosEmpatados:l,partidosPerdidos:u,goles:h})}function Zn(t,e){const n=t.elo??900;return[...Array.isArray(t.eloHistorial)&&t.eloHistorial.length>0?t.eloHistorial:[n],Math.round(e)]}function S0(t,e,n){var y,E,N,A;const r=new Map(n.map(P=>[P.id,P])),s=P=>P&&P.id?r.get(P.id):null,i=P=>{const I=s(P);return I!=null&&typeof I.elo=="number"?I.elo:900},o=((y=t.equipoLocal)==null?void 0:y.jugadores)??[],l=((E=t.equipoVisitante)==null?void 0:E.jugadores)??[],u=o.map(i).filter(P=>Number.isFinite(P)),h=l.map(i).filter(P=>Number.isFinite(P)),p=u.length?Math.round(u.reduce((P,I)=>P+I,0)/u.length):0,m=h.length?Math.round(h.reduce((P,I)=>P+I,0)/h.length):0,g=Math.abs(p-m),S=[],k=[],b=[],O=((N=t.equipoLocal)==null?void 0:N.nombre)||"Rojo";(A=t.equipoVisitante)!=null&&A.nombre;const T=e===O;if(e==="Empate"){if(g===0)return o.forEach(M=>{const F=s(M);if(k.push(0),!F)return;const $=F.elo??900;S.push({id:F.id,newElo:$,partidos:(F.partidos??0)+1,victorias:F.victorias??0,partidosEmpatados:(F.partidosEmpatados??0)+1,partidosPerdidos:F.partidosPerdidos??0,eloHistorial:Zn(F,$)})}),l.forEach(M=>{const F=s(M);if(b.push(0),!F)return;const $=F.elo??900;S.push({id:F.id,newElo:$,partidos:(F.partidos??0)+1,victorias:F.victorias??0,partidosEmpatados:(F.partidosEmpatados??0)+1,partidosPerdidos:F.partidosPerdidos??0,eloHistorial:Zn(F,$)})}),{updates:S,eloDeltasLocal:k,eloDeltasVisitante:b};const P=g/2,I=Math.round(p<=m?P:-P),W=Math.round(m<=p?P:-P);return o.forEach(M=>{const F=s(M);if(k.push(F?I:0),!F)return;const $=Math.max(0,(F.elo??900)+I),j=Math.round($);S.push({id:F.id,newElo:j,partidos:(F.partidos??0)+1,victorias:F.victorias??0,partidosEmpatados:(F.partidosEmpatados??0)+1,partidosPerdidos:F.partidosPerdidos??0,eloHistorial:Zn(F,$)})}),l.forEach(M=>{const F=s(M);if(b.push(F?W:0),!F)return;const $=Math.max(0,(F.elo??900)+W),j=Math.round($);S.push({id:F.id,newElo:j,partidos:(F.partidos??0)+1,victorias:F.victorias??0,partidosEmpatados:(F.partidosEmpatados??0)+1,partidosPerdidos:F.partidosPerdidos??0,eloHistorial:Zn(F,$)})}),{updates:S,eloDeltasLocal:k,eloDeltasVisitante:b}}const v=20;if(g===0){const P=T?v:-v,I=T?-v:v;return o.forEach(W=>{const M=s(W);if(k.push(M?P:0),!M)return;const F=Math.max(0,(M.elo??900)+P),$=Math.round(F),j=T;S.push({id:M.id,newElo:$,partidos:(M.partidos??0)+1,victorias:(M.victorias??0)+(j?1:0),partidosEmpatados:M.partidosEmpatados??0,partidosPerdidos:(M.partidosPerdidos??0)+(j?0:1),eloHistorial:Zn(M,F)})}),l.forEach(W=>{const M=s(W);if(b.push(M?I:0),!M)return;const F=Math.max(0,(M.elo??900)+I),$=Math.round(F),j=!T;S.push({id:M.id,newElo:$,partidos:(M.partidos??0)+1,victorias:(M.victorias??0)+(j?1:0),partidosEmpatados:M.partidosEmpatados??0,partidosPerdidos:(M.partidosPerdidos??0)+(j?0:1),eloHistorial:Zn(M,F)})}),{updates:S,eloDeltasLocal:k,eloDeltasVisitante:b}}const C=T?p>=m?.25:.75:m>=p?.25:.75,x=g*C,U=-g*C,V=Math.round(T?x:U),_=Math.round(T?U:x);return o.forEach(P=>{const I=s(P);if(k.push(I?V:0),!I)return;const W=Math.max(0,(I.elo??900)+V),M=Math.round(W),F=T;S.push({id:I.id,newElo:M,partidos:(I.partidos??0)+1,victorias:(I.victorias??0)+(F?1:0),partidosEmpatados:I.partidosEmpatados??0,partidosPerdidos:(I.partidosPerdidos??0)+(F?0:1),eloHistorial:Zn(I,W)})}),l.forEach(P=>{const I=s(P);if(b.push(I?_:0),!I)return;const W=Math.max(0,(I.elo??900)+_),M=Math.round(W),F=!T;S.push({id:I.id,newElo:M,partidos:(I.partidos??0)+1,victorias:(I.victorias??0)+(F?1:0),partidosEmpatados:I.partidosEmpatados??0,partidosPerdidos:(I.partidosPerdidos??0)+(F?0:1),eloHistorial:Zn(I,W)})}),{updates:S,eloDeltasLocal:k,eloDeltasVisitante:b}}async function Gk(t,e){if(!Ge)throw new Error("Firestore no est configurado");const n=Ii(Ge,Si,t),r=["apodo","descripcion","posicion","fechaNacimiento","equipoFavorito"],s={};r.forEach(i=>{Object.prototype.hasOwnProperty.call(e,i)&&(i==="fechaNacimiento"?s[i]=e[i]||"":i==="equipoFavorito"?s[i]=e[i]==="azul"?"azul":"rojo":s[i]=e[i]??"")}),Object.keys(s).length&&await Gu(n,s)}function Kk(){const{signInWithGoogle:t,signInAsGuest:e}=T0(),[n,r]=z.useState(""),[s,i]=z.useState(!1),o=async()=>{r(""),i(!0);try{await t()}catch(l){r(l.message||"No se pudo iniciar sesin con Google.")}finally{i(!1)}};return d.jsx("div",{className:"login-page",children:d.jsxs("div",{className:"login-card",children:[d.jsx("h1",{className:"login-title",children:" Bondiola FC"}),d.jsx("p",{className:"login-subtitle",children:"Ftbol en dos cmodas cuotas"}),d.jsx("p",{className:"login-text",children:"Ingres para ver jugadores y partidos."}),Ly&&d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",className:"login-btn login-btn-google",onClick:o,disabled:s,children:s?d.jsx("span",{children:"Entrando"}):d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"login-btn-icon",children:"G"}),"Continuar con Google"]})}),d.jsx("div",{className:"login-divider",children:d.jsx("span",{children:"o"})})]}),!Ly&&d.jsx("p",{className:"login-hint",children:"Configur Firebase (archivo .env) para habilitar inicio con Google."}),d.jsx("button",{type:"button",className:"login-btn login-btn-guest",onClick:e,disabled:s,children:"Entrar como invitado"}),n&&d.jsx("p",{className:"login-error",children:n})]})})}const Qk=["Delantero","Defensor","Mediocampista","Arquero"];function Oy({onClose:t,onSaved:e}){const[n,r]=z.useState(""),[s,i]=z.useState(""),[o,l]=z.useState(""),[u,h]=z.useState(""),[p,m]=z.useState(""),[g,S]=z.useState("rojo"),[k,b]=z.useState(!1),[O,T]=z.useState(""),v=async C=>{C.preventDefault();const x=n.trim(),U=s.trim();if(!x||!U){T("Nombre y apodo son obligatorios");return}if(!o){T("Eleg una posicin");return}T(""),b(!0);try{await Uk({nombre:x,apodo:U,posicion:o,descripcion:u.trim(),fechaNacimiento:p||"",equipoFavorito:g,partidos:0,victorias:0,partidosEmpatados:0,partidosPerdidos:0,goles:0,elo:900,eloHistorial:[],mail:"",registrado:!1,admin:!1}),e==null||e(),t==null||t()}catch(V){T(V.message||"Error al guardar el jugador")}finally{b(!1)}};return d.jsx("div",{className:"nuevo-jugador-overlay",onClick:t,children:d.jsxs("div",{className:"nuevo-jugador-modal",onClick:C=>C.stopPropagation(),children:[d.jsxs("div",{className:"nuevo-jugador-header",children:[d.jsx("h3",{children:"Nuevo jugador"}),d.jsx("button",{type:"button",className:"nuevo-jugador-close",onClick:t,"aria-label":"Cerrar",children:""})]}),d.jsxs("form",{onSubmit:v,className:"nuevo-jugador-form",children:[d.jsxs("label",{className:"nuevo-jugador-label",children:["Nombre completo",d.jsx("input",{type:"text",value:n,onChange:C=>r(C.target.value),className:"nuevo-jugador-input",placeholder:"Ej. Hernn Zaniratto"})]}),d.jsxs("label",{className:"nuevo-jugador-label",children:["Apodo",d.jsx("input",{type:"text",value:s,onChange:C=>i(C.target.value),className:"nuevo-jugador-input",placeholder:"Ej. Herni"})]}),d.jsxs("label",{className:"nuevo-jugador-label",children:["Posicin",d.jsxs("select",{value:o,onChange:C=>l(C.target.value),className:"nuevo-jugador-select",children:[d.jsx("option",{value:"",children:"Seleccionar"}),Qk.map(C=>d.jsx("option",{value:C,children:C},C))]})]}),d.jsxs("label",{className:"nuevo-jugador-label",children:["Fecha de nacimiento",d.jsx("input",{type:"date",value:p,onChange:C=>m(C.target.value),className:"nuevo-jugador-input"})]}),d.jsxs("div",{className:"nuevo-jugador-label",children:[d.jsx("span",{className:"nuevo-jugador-label-text",children:"Equipo favorito"}),d.jsxs("div",{className:"nuevo-jugador-equipo-btns",role:"group","aria-label":"Equipo favorito",children:[d.jsx("button",{type:"button",className:`nuevo-jugador-equipo-btn nuevo-jugador-equipo-btn--azul ${g==="azul"?"nuevo-jugador-equipo-btn--selected":""}`,onClick:()=>S("azul"),"aria-pressed":g==="azul",children:"Azul"}),d.jsx("button",{type:"button",className:`nuevo-jugador-equipo-btn nuevo-jugador-equipo-btn--rojo ${g==="rojo"?"nuevo-jugador-equipo-btn--selected":""}`,onClick:()=>S("rojo"),"aria-pressed":g==="rojo",children:"Rojo"})]})]}),d.jsxs("label",{className:"nuevo-jugador-label",children:["Descripcin",d.jsx("textarea",{value:u,onChange:C=>h(C.target.value),className:"nuevo-jugador-textarea",placeholder:"Opcional",rows:3})]}),O&&d.jsx("p",{className:"nuevo-jugador-error",children:O}),d.jsxs("div",{className:"nuevo-jugador-actions",children:[d.jsx("button",{type:"button",className:"nuevo-jugador-btn nuevo-jugador-btn-sec",onClick:t,children:"Cancelar"}),d.jsx("button",{type:"submit",className:"nuevo-jugador-btn nuevo-jugador-btn-primary",disabled:k,children:k?"Guardando":"Dar de alta"})]})]})]})})}const Jk=["Delantero","Defensor","Mediocampista","Arquero"];function Yk({isAdmin:t}){const[e,n]=z.useState([]),[r,s]=z.useState([]),[i,o]=z.useState(!0),[l,u]=z.useState(null),[h,p]=z.useState(""),[m,g]=z.useState("presentes"),[S,k]=z.useState(null),[b,O]=z.useState(!1);z.useEffect(()=>{let x=!1;return o(!0),u(null),Promise.all([Ot(),Js()]).then(([U,V])=>{x||(n(U),s(V))}).catch(U=>{x||u(U.message||"Error al cargar jugadores")}).finally(()=>{x||o(!1)}),()=>{x=!0}},[]);const T=z.useMemo(()=>I0(r,e),[r,e]),v=z.useMemo(()=>{var U,V;let x=[...e];if(h&&(x=x.filter(_=>_.posicion===h)),m==="partidos")x.sort((_,y)=>y.partidos-_.partidos);else if(m==="goles")x.sort((_,y)=>y.goles-_.goles);else if(m==="ranking")x.sort((_,y)=>(y.elo??900)-(_.elo??900));else if(m==="presentes"&&T.length>0){const _=T[0],y=new Set([...(((U=_.equipoLocal)==null?void 0:U.jugadores)??[]).map(E=>E==null?void 0:E.id).filter(Boolean),...(((V=_.equipoVisitante)==null?void 0:V.jugadores)??[]).map(E=>E==null?void 0:E.id).filter(Boolean)]);x.sort((E,N)=>{const A=y.has(E.id),P=y.has(N.id);return A&&!P?-1:!A&&P?1:N.partidos-E.partidos})}return x},[e,T,h,m]);if(i)return d.jsxs("div",{className:"jugadores-container",children:[d.jsxs("div",{className:"jugadores-header",children:[d.jsx("h2",{className:"section-title",children:"Jugadores"}),t&&d.jsx("button",{type:"button",className:"jugadores-btn-nuevo",disabled:!0,children:"Nuevo jugador"})]}),d.jsx("p",{className:"empty-state",children:"Cargando jugadores"})]});if(l)return d.jsxs("div",{className:"jugadores-container",children:[d.jsxs("div",{className:"jugadores-header",children:[d.jsx("h2",{className:"section-title",children:"Jugadores"}),t&&d.jsx("button",{type:"button",className:"jugadores-btn-nuevo",onClick:()=>O(!0),children:"Nuevo jugador"})]}),d.jsx("p",{className:"empty-state jugadores-error",children:l}),b&&d.jsx(Oy,{onClose:()=>O(!1),onSaved:()=>{O(!1),Ot().then(n).catch(()=>{})}})]});const C=()=>{Ot().then(n).catch(()=>{})};return d.jsxs("div",{className:"jugadores-container",children:[d.jsxs("div",{className:"jugadores-header",children:[d.jsx("h2",{className:"section-title",children:"Jugadores"}),t&&d.jsx("button",{type:"button",className:"jugadores-btn-nuevo",onClick:()=>O(!0),children:"Nuevo jugador"})]}),b&&d.jsx(Oy,{onClose:()=>O(!1),onSaved:C}),e.length>0&&d.jsxs("div",{className:"jugadores-controles",children:[d.jsxs("div",{className:"jugadores-filtro",children:[d.jsx("label",{htmlFor:"filtro-posicion",className:"controles-label",children:"Posicin"}),d.jsxs("select",{id:"filtro-posicion",value:h,onChange:x=>p(x.target.value),className:"controles-select",children:[d.jsx("option",{value:"",children:"Todas"}),Jk.map(x=>d.jsx("option",{value:x,children:x},x))]})]}),d.jsxs("div",{className:"jugadores-orden",children:[d.jsx("span",{className:"controles-label controles-label-buttons",children:"Ordenar por"}),d.jsxs("div",{className:"controles-orden-buttons",children:[d.jsx("button",{type:"button",className:`controles-btn ${m==="partidos"?"active":""}`,onClick:()=>g(m==="partidos"?null:"partidos"),children:"Ms partidos"}),d.jsx("button",{type:"button",className:`controles-btn ${m==="goles"?"active":""}`,onClick:()=>g(m==="goles"?null:"goles"),children:"Ms goles"}),d.jsx("button",{type:"button",className:`controles-btn ${m==="ranking"?"active":""}`,onClick:()=>g(m==="ranking"?null:"ranking"),children:"Ranking"}),d.jsx("button",{type:"button",className:`controles-btn ${m==="presentes"?"active":""}`,onClick:()=>g(m==="presentes"?null:"presentes"),children:"ltimos partidos"})]}),d.jsx("label",{htmlFor:"filtro-orden",className:"controles-label controles-label-select",children:"Ordenar por"}),d.jsxs("select",{id:"filtro-orden",value:m||"",onChange:x=>g(x.target.value||null),className:"controles-select controles-orden-select",children:[d.jsx("option",{value:"",children:""}),d.jsx("option",{value:"partidos",children:"Ms partidos"}),d.jsx("option",{value:"goles",children:"Ms goles"}),d.jsx("option",{value:"ranking",children:"Ranking"}),d.jsx("option",{value:"presentes",children:"ltimos partidos"})]})]})]}),e.length===0?d.jsx("p",{className:"empty-state",children:"No hay jugadores registrados"}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"jugadores-grid",children:v.map(x=>d.jsxs("div",{className:"jugador-card",children:[d.jsxs("div",{className:"jugador-header",children:[d.jsxs("div",{className:"jugador-titulo",children:[d.jsx("h3",{className:"jugador-apodo",children:x.apodo||x.nombre}),x.apodo&&d.jsx("span",{className:"jugador-nombre",children:x.nombre})]}),d.jsx("span",{className:"jugador-posicion",children:x.posicion})]}),d.jsxs("div",{className:"jugador-stats",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Partidos:"}),d.jsx("span",{className:"stat-value",children:x.partidos})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Victorias:"}),d.jsx("span",{className:"stat-value stat-success",children:x.victorias})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Goles:"}),d.jsx("span",{className:"stat-value stat-goals",children:x.goles})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Elo:"}),d.jsx("span",{className:"stat-value",children:x.elo??900})]})]}),typeof x.aos=="number"&&x.aos>0||x.descripcion?d.jsxs("div",{className:"jugador-descripcion",children:[typeof x.aos=="number"&&x.aos>0&&d.jsxs("p",{className:"jugador-edad",children:["Edad: ",x.aos]}),x.descripcion&&d.jsx("p",{children:x.descripcion})]}):null]},x.id))}),d.jsx("div",{className:"jugadores-list-mobile",children:v.map(x=>d.jsxs("div",{className:`jugador-list-item ${S===x.id?"expandido":""}`,children:[d.jsxs("button",{type:"button",className:"jugador-list-item-header",onClick:()=>k(U=>U===x.id?null:x.id),"aria-expanded":S===x.id,children:[d.jsx("span",{className:"jugador-list-apodo",children:x.apodo||x.nombre}),d.jsxs("span",{className:"jugador-list-partidos",children:[x.partidos," partidos"]}),d.jsx("span",{className:"jugador-list-chevron","aria-hidden":!0,children:""})]}),S===x.id&&d.jsxs("div",{className:"jugador-list-item-detail",children:[x.apodo&&d.jsx("p",{className:"jugador-list-nombre",children:x.nombre}),d.jsx("span",{className:"jugador-posicion",children:x.posicion}),d.jsxs("div",{className:"jugador-list-stats",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Partidos:"})," ",x.partidos]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Victorias:"})," ",x.victorias]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Goles:"})," ",x.goles]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Elo:"})," ",x.elo??900]})]}),typeof x.aos=="number"&&x.aos>0||x.descripcion?d.jsxs("div",{className:"jugador-descripcion",children:[typeof x.aos=="number"&&x.aos>0&&d.jsxs("p",{className:"jugador-edad",children:["Edad: ",x.aos]}),x.descripcion&&d.jsx("p",{children:x.descripcion})]}):null]})]},x.id))})]}),e.length>0&&v.length===0&&d.jsx("p",{className:"empty-state",children:"Ningn jugador en esa posicin"})]})}function Xc(t){return t==null||t===""?"":String(t).trim().toLowerCase().normalize("NFD").replace(new RegExp("\\p{Mark}","gu"),"")}function hu({parsedName:t,value:e,jugadores:n=[],onChange:r,id:s}){const[i,o]=z.useState(!1),[l,u]=z.useState(""),h=z.useRef(null),p=(e==null?void 0:e.tipo)==="invitado",m=(e==null?void 0:e.tipo)==="jugador"&&(e!=null&&e.id)?n.find(T=>T.id===e.id):null,g=p?`Invitado (${(e==null?void 0:e.nombre)??t})`:m?`${m.apodo||m.nombre}  ${m.nombre}`:"Elegir",S=Xc(l),k=S?n.filter(T=>Xc(T.apodo).includes(S)||Xc(T.nombre).includes(S)):n;z.useEffect(()=>{if(!i)return;const T=v=>{h.current&&!h.current.contains(v.target)&&o(!1)};return document.addEventListener("click",T),()=>document.removeEventListener("click",T)},[i]);const b=()=>{r({tipo:"invitado",nombre:t}),o(!1),u("")},O=T=>{r({tipo:"jugador",id:T.id}),o(!1),u("")};return d.jsxs("div",{className:"selector-jugador",ref:h,children:[d.jsxs("button",{type:"button",id:s,className:"selector-jugador-trigger",onClick:()=>o(T=>!T),"aria-haspopup":"listbox","aria-expanded":i,children:[g,d.jsx("span",{className:"selector-jugador-chevron","aria-hidden":!0,children:""})]}),i&&d.jsxs("div",{className:"selector-jugador-dropdown",role:"listbox",children:[d.jsxs("div",{className:"selector-jugador-opt selector-jugador-opt-invitado",onClick:b,role:"option",children:["Invitado (",t,")"]}),d.jsx("input",{type:"text",className:"selector-jugador-filter",placeholder:"Buscar por apodo o nombre",value:l,onChange:T=>u(T.target.value),onKeyDown:T=>T.stopPropagation(),autoFocus:!0}),d.jsx("div",{className:"selector-jugador-list",children:k.length===0?d.jsx("div",{className:"selector-jugador-empty",children:"Ningn jugador coincide"}):k.map(T=>d.jsxs("div",{className:"selector-jugador-opt",onClick:()=>O(T),role:"option",children:[T.apodo||T.nombre,"  ",T.nombre]},T.id))})]})]})}const My=["domingo","lunes","martes","mircoles","jueves","viernes","sbado"];function Xk(t,e,n=0){const r=new Date;let s=new Date(r.getFullYear(),r.getMonth(),r.getDate(),e,n),i=s.getDay(),o=t-i;return o<0&&(o+=7),o===0&&s<=r&&(o=7),s.setDate(s.getDate()+o),s}function Zk(t){const e=(t||"").trim();if(!e)return{error:"El mensaje est vaco"};const n=e.split(/\r?\n/).map(V=>V.trim());let r="",s="",i="21";const o=[],l=[],h=(n[0]||"").split(/\s*[\\|]\s*/).map(V=>V.trim()).filter(Boolean);if(h.length>=1&&(r=h[0]),h.length>=2){const _=h[1].match(/(\w+)\s+(\d{1,2})\s*(?:hs)?/i);_&&(s=_[1],i=_[2].padStart(2,"0"))}let p=null;for(let V=0;V<n.length;V++){const _=n[V];if(/\s*Azul:?/i.test(_)||/^Azul:?\s*$/i.test(_)){p="azul";continue}if(/^\s*Vs\s*$/i.test(_)){p=null;continue}if(/\s*Rojo:?/i.test(_)||/^Rojo:?\s*$/i.test(_)){p="rojo";continue}const y=_.match(/^\d+\.\s*(.+)$/);if(y&&p){const E=y[1].trim();p==="azul"?o.push(E):p==="rojo"&&l.push(E)}}const m=s?My.findIndex(V=>s.toLowerCase().startsWith(V.substring(0,3))):-1;if(m===-1&&s)return{error:"No se pudo reconocer el da de la semana"};const g=parseInt(i,10)||21,S=m>=0?Xk(m,g,0):new Date,k=S.getFullYear(),b=String(S.getMonth()+1).padStart(2,"0"),O=S.getDate(),T=String(O).padStart(2,"0"),v=`${k}-${b}-${T}`,C=`${String(g).padStart(2,"0")}:00`,U=`prximo ${My[S.getDay()]} a las ${C} horas`;return{lugar:r,fechaLabel:U,fecha:v,hora:C,jugadoresAzul:o,jugadoresRojo:l}}function ex({onClose:t,onPartidoCreado:e}){const[n,r]=z.useState("ingreso"),[s,i]=z.useState(""),[o,l]=z.useState(""),[u,h]=z.useState(null),[p,m]=z.useState([]),[g,S]=z.useState([]),[k,b]=z.useState([]),[O,T]=z.useState(""),[v,C]=z.useState(""),[x,U]=z.useState(!1),[V,_]=z.useState(""),[y,E]=z.useState(!1),N=async()=>{l("");const M=Zk(s);if(M.error){l(M.error);return}E(!0);try{const F=await Ot(),$=(M.jugadoresRojo||[]).map(K=>{const R=uu(K,F);return R.id?{tipo:"jugador",id:R.id}:{tipo:"invitado",nombre:R.nombre||K}}),j=(M.jugadoresAzul||[]).map(K=>{const R=uu(K,F);return R.id?{tipo:"jugador",id:R.id}:{tipo:"invitado",nombre:R.nombre||K}});h(M),m(F),S($),b(j),T(M.fecha||""),C(M.hora||"21:00"),r("confirmacion")}catch(F){l(F.message||"Error al cargar jugadores")}finally{E(!1)}},A=()=>{r("ingreso"),l(""),h(null),m([]),S([]),b([]),T(""),C("")},P=(M,F)=>{S($=>{const j=[...$];return j[M]=F,j})},I=(M,F)=>{b($=>{const j=[...$];return j[M]=F,j})},W=async()=>{if(u){_(""),U(!0);try{const M=g.map($=>$.tipo==="jugador"?{id:$.id}:{nombre:$.nombre}),F=k.map($=>$.tipo==="jugador"?{id:$.id}:{nombre:$.nombre});await zk({fecha:O||u.fecha,hora:v||u.hora,lugar:u.lugar||"Por definir",concluido:!1,equipoLocal:{nombre:"Rojo",jugadores:M,goles:0},equipoVisitante:{nombre:"Azul",jugadores:F,goles:0},ganador:"Empate"}),e==null||e(),t==null||t()}catch(M){_(M.message||"Error al crear el partido")}finally{U(!1)}}};return d.jsx("div",{className:"nuevo-partido-overlay",onClick:t,children:d.jsxs("div",{className:"nuevo-partido-modal",onClick:M=>M.stopPropagation(),children:[d.jsxs("div",{className:"nuevo-partido-header",children:[d.jsx("h3",{children:"Nuevo partido"}),d.jsx("button",{type:"button",className:"nuevo-partido-close",onClick:t,"aria-label":"Cerrar",children:""})]}),n==="ingreso"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"nuevo-partido-hint",children:"Peg el mensaje del partido (lugar, fecha/hora, jugadores Azul y Rojo)."}),d.jsx("textarea",{className:"nuevo-partido-textarea",value:s,onChange:M=>i(M.target.value),placeholder:`Ejemplo:
Village \\ Lunes 21 hs

 Azul:
1. Jony
2. Hernn
...

Vs

 Rojo:
1. Chino
...`,rows:12}),o&&d.jsx("p",{className:"nuevo-partido-error",children:o}),d.jsxs("div",{className:"nuevo-partido-actions",children:[d.jsx("button",{type:"button",className:"nuevo-partido-btn secundario",onClick:t,children:"Cancelar"}),d.jsx("button",{type:"button",className:"nuevo-partido-btn",onClick:N,disabled:y,children:y?"Procesando":"Procesar"})]})]}),n==="confirmacion"&&u&&d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"nuevo-partido-pregunta",children:"La informacin es correcta? Pods corregir fecha, hora y cada jugador."}),d.jsxs("div",{className:"nuevo-partido-resumen",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Lugar:"})," ",u.lugar||""]}),d.jsxs("div",{className:"nuevo-partido-fecha-hora",children:[d.jsxs("p",{className:"nuevo-partido-fecha-label",children:[d.jsx("strong",{children:"Fecha y hora del partido"}),u.fechaLabel&&d.jsxs("span",{className:"nuevo-partido-fecha-sugerido",children:[" (sugerido: ",u.fechaLabel,")"]})]}),d.jsxs("div",{className:"nuevo-partido-fecha-inputs",children:[d.jsxs("label",{className:"nuevo-partido-date-label",children:["Fecha",d.jsx("input",{type:"date",value:O,onChange:M=>T(M.target.value),className:"nuevo-partido-input-date"})]}),d.jsxs("label",{className:"nuevo-partido-date-label",children:["Hora",d.jsx("input",{type:"time",value:v,onChange:M=>C(M.target.value),className:"nuevo-partido-input-time"})]})]})]}),d.jsx("p",{children:d.jsx("strong",{children:"Jugadores de Azul:"})}),d.jsx("ul",{className:"nuevo-partido-jugadores-edit",children:k.map((M,F)=>d.jsxs("li",{className:"nuevo-partido-jugador-row",children:[d.jsxs("span",{className:"nuevo-partido-parsed-name",children:["",u.jugadoresAzul[F]," es invitado o jugador?"]}),d.jsx(hu,{id:`nuevo-azul-${F}`,parsedName:u.jugadoresAzul[F],value:k[F],jugadores:p,onChange:$=>I(F,$)})]},F))}),d.jsx("p",{children:d.jsx("strong",{children:"Jugadores de Rojo:"})}),d.jsx("ul",{className:"nuevo-partido-jugadores-edit",children:g.map((M,F)=>d.jsxs("li",{className:"nuevo-partido-jugador-row",children:[d.jsxs("span",{className:"nuevo-partido-parsed-name",children:["",u.jugadoresRojo[F]," es invitado o jugador?"]}),d.jsx(hu,{id:`nuevo-rojo-${F}`,parsedName:u.jugadoresRojo[F],value:g[F],jugadores:p,onChange:$=>P(F,$)})]},F))})]}),V&&d.jsx("p",{className:"nuevo-partido-error",children:V}),d.jsxs("div",{className:"nuevo-partido-actions",children:[d.jsx("button",{type:"button",className:"nuevo-partido-btn secundario",onClick:A,disabled:x,children:"Corregir"}),d.jsx("button",{type:"button",className:"nuevo-partido-btn",onClick:W,disabled:x,children:x?"Guardando":"Dar de alta"})]})]})]})})}const Fy="Anotador general";function tx(t,e){if(!t)return"";const[n,r,s]=t.split("-").map(Number);if(!n||!r||!s)return t;const i=new Date(n,r-1,s),o={weekday:"long",day:"numeric",month:"long",year:"numeric"},l=i.toLocaleDateString("es-ES",o);return e?`${l} ${e}`:l}function nx({partido:t,jugadores:e=[],onClose:n,onSaved:r}){var y,E,N,A,P,I;const[s,i]=z.useState(null),[o,l]=z.useState(0),[u,h]=z.useState(0),[p,m]=z.useState([]),[g,S]=z.useState([]),[k,b]=z.useState(!1),[O,T]=z.useState(""),v=s??t;z.useEffect(()=>{if(!(t!=null&&t.id)||!(e!=null&&e.length)){i(null);return}let W=!1;return Js().then(M=>{if(W)return;const F=M.find($=>$.id===t.id);F&&i(Qu(F,e))}).catch(()=>i(null)),()=>{W=!0}},[t==null?void 0:t.id,e]);const C=z.useMemo(()=>new Map((e||[]).map(W=>[W.id,W])),[e]),x=z.useMemo(()=>{var j,K;const W=((j=v==null?void 0:v.equipoLocal)==null?void 0:j.jugadores)??[],M=new Set,F=[{value:Be,label:Fy}];return W.forEach(R=>{var ie,ue;const H=(R==null?void 0:R.id)||(R!=null&&R.nombre?`guest:${R.nombre}`:"");if(!H||M.has(H))return;M.add(H);const J=R.id?((ie=C.get(R.id))==null?void 0:ie.apodo)||((ue=C.get(R.id))==null?void 0:ue.nombre)||R.nombre:R.nombre||"";F.push({value:H,label:J||H})}),(((K=v==null?void 0:v.equipoLocal)==null?void 0:K.golesAnotadores)??[]).forEach(R=>{const H=R!=null?String(R):"";if(!H||H===Be||H.startsWith("guest:")||M.has(H))return;M.add(H);const J=C.get(H);F.push({value:H,label:(J==null?void 0:J.apodo)||(J==null?void 0:J.nombre)||H})}),F},[(y=v==null?void 0:v.equipoLocal)==null?void 0:y.jugadores,(E=v==null?void 0:v.equipoLocal)==null?void 0:E.golesAnotadores,C]),U=z.useMemo(()=>{var j,K;const W=((j=v==null?void 0:v.equipoVisitante)==null?void 0:j.jugadores)??[],M=new Set,F=[{value:Be,label:Fy}];return W.forEach(R=>{var ie,ue;const H=(R==null?void 0:R.id)||(R!=null&&R.nombre?`guest:${R.nombre}`:"");if(!H||M.has(H))return;M.add(H);const J=R.id?((ie=C.get(R.id))==null?void 0:ie.apodo)||((ue=C.get(R.id))==null?void 0:ue.nombre)||R.nombre:R.nombre||"";F.push({value:H,label:J||H})}),(((K=v==null?void 0:v.equipoVisitante)==null?void 0:K.golesAnotadores)??[]).forEach(R=>{const H=R!=null?String(R):"";if(!H||H===Be||H.startsWith("guest:")||M.has(H))return;M.add(H);const J=C.get(H);F.push({value:H,label:(J==null?void 0:J.apodo)||(J==null?void 0:J.nombre)||H})}),F},[(N=v==null?void 0:v.equipoVisitante)==null?void 0:N.jugadores,(A=v==null?void 0:v.equipoVisitante)==null?void 0:A.golesAnotadores,C]);z.useEffect(()=>{var W,M,F,$;if(v){const j=Number((W=v.equipoLocal)==null?void 0:W.goles)||0,K=Number((M=v.equipoVisitante)==null?void 0:M.goles)||0;l(j),h(K);const R=((F=v.equipoLocal)==null?void 0:F.golesAnotadores)??[],H=(($=v.equipoVisitante)==null?void 0:$.golesAnotadores)??[],J=ie=>ie!=null&&String(ie).trim()!==""?String(ie):Be;m(Array.isArray(R)&&R.length>=j?R.slice(0,j).map(J):Array(j).fill(Be)),S(Array.isArray(H)&&H.length>=K?H.slice(0,K).map(J):Array(K).fill(Be))}},[v]),z.useEffect(()=>{const W=Number(o)||0;m(M=>M.length===W?M:M.length>W?M.slice(0,W):[...M,...Array(W-M.length).fill(Be)])},[o]),z.useEffect(()=>{const W=Number(u)||0;S(M=>M.length===W?M:M.length>W?M.slice(0,W):[...M,...Array(W-M.length).fill(Be)])},[u]);const V=o>u?((P=t==null?void 0:t.equipoLocal)==null?void 0:P.nombre)||"Rojo":u>o?((I=t==null?void 0:t.equipoVisitante)==null?void 0:I.nombre)||"Azul":"Empate",_=async W=>{var M,F,$,j,K,R,H,J;if(W.preventDefault(),!!t){T(""),b(!0);try{const ie={...t.equipoLocal,nombre:((M=t.equipoLocal)==null?void 0:M.nombre)||"Rojo",jugadores:((F=t.equipoLocal)==null?void 0:F.jugadores)??[],goles:Number(o)||0,golesAnotadores:p.slice(0,Number(o)||0)},ue={...t.equipoVisitante,nombre:(($=t.equipoVisitante)==null?void 0:$.nombre)||"Azul",jugadores:((j=t.equipoVisitante)==null?void 0:j.jugadores)??[],goles:Number(u)||0,golesAnotadores:g.slice(0,Number(u)||0)},Re={...t,equipoLocal:ie,equipoVisitante:ue,ganador:V},Ve=t.estadisticasAplicadas!==!0;if(Ve){const je=await Ot(),{updates:St,eloDeltasLocal:qt,eloDeltasVisitante:Xt}=S0(Re,V,je);ie.eloDeltas=qt,ue.eloDeltas=Xt;const Bt=ae=>{const ee=new Map;return(ae||[]).forEach(ce=>{ce&&ce!==Be&&!String(ce).startsWith("guest:")&&ee.set(ce,(ee.get(ce)||0)+1)}),ee},$t=Bt(ie.golesAnotadores),At=Bt(ue.golesAnotadores),Ue=new Map(je.map(ae=>[ae.id,ae])),Ke=new Set((((K=Re.equipoLocal)==null?void 0:K.jugadores)??[]).map(ae=>ae==null?void 0:ae.id).filter(Boolean)),Ee=new Set((((R=Re.equipoVisitante)==null?void 0:R.jugadores)??[]).map(ae=>ae==null?void 0:ae.id).filter(Boolean)),we=(ae,ee)=>ae&&ee.get(ae.id)||0;await Promise.all(St.map(ae=>{const ee=Ue.get(ae.id),ze=ee&&Ke.has(ee.id)?we(ee,$t):we(ee,At),Ai=((ee==null?void 0:ee.goles)??0)+ze;return cu(ae.id,{elo:ae.newElo,eloHistorial:ae.eloHistorial,partidos:ae.partidos,victorias:ae.victorias,partidosEmpatados:ae.partidosEmpatados,partidosPerdidos:ae.partidosPerdidos,goles:Ai})}))}else{const je=ee=>{const ce=new Map;return(ee||[]).forEach(ze=>{ze&&ze!==Be&&!String(ze).startsWith("guest:")&&ce.set(ze,(ce.get(ze)||0)+1)}),ce},St=(ee,ce)=>{const ze=new Map(ee);return ce.forEach((Ai,Ci)=>ze.set(Ci,(ze.get(Ci)||0)+Ai)),ze},qt=je((H=t.equipoLocal)==null?void 0:H.golesAnotadores),Xt=je((J=t.equipoVisitante)==null?void 0:J.golesAnotadores),Bt=je(ie.golesAnotadores),$t=je(ue.golesAnotadores),At=St(qt,Xt),Ue=St(Bt,$t),Ke=new Set([...At.keys(),...Ue.keys()]),Ee=await Ot(),we=new Map(Ee.map(ee=>[ee.id,ee])),ae=[];Ke.forEach(ee=>{const ce=(Ue.get(ee)||0)-(At.get(ee)||0);if(ce===0)return;const ze=we.get(ee);ze&&ae.push({jugador:ze,newGoles:Math.max(0,(ze.goles??0)+ce)})}),await Promise.all(ae.map(({jugador:ee,newGoles:ce})=>cu(ee.id,{elo:ee.elo??900,eloHistorial:ee.eloHistorial??[],partidos:ee.partidos??0,victorias:ee.victorias??0,partidosEmpatados:ee.partidosEmpatados??0,partidosPerdidos:ee.partidosPerdidos??0,goles:ce})))}await op(t.id,{concluido:!0,equipoLocal:ie,equipoVisitante:ue,ganador:V,...Ve?{estadisticasAplicadas:!0}:{}}),r==null||r(),n==null||n()}catch(ie){T(ie.message||"Error al guardar")}finally{b(!1)}}};return t?d.jsx("div",{className:"editar-partido-overlay",onClick:n,children:d.jsxs("div",{className:"editar-partido-modal",onClick:W=>W.stopPropagation(),children:[d.jsxs("div",{className:"editar-partido-header",children:[d.jsx("h3",{children:"Editar partido"}),d.jsx("button",{type:"button",className:"editar-partido-close",onClick:n,"aria-label":"Cerrar",children:""})]}),d.jsxs("p",{className:"editar-partido-meta",children:[tx(v==null?void 0:v.fecha,v==null?void 0:v.hora),"  ",(v==null?void 0:v.lugar)??(t==null?void 0:t.lugar)]}),d.jsxs("form",{onSubmit:_,className:"editar-partido-form",children:[d.jsxs("div",{className:"editar-partido-resultado",children:[d.jsxs("div",{className:"editar-partido-equipo",children:[d.jsx("label",{htmlFor:"goles-rojo",children:"Rojo"}),d.jsx("input",{id:"goles-rojo",type:"number",min:0,max:99,value:o,onChange:W=>l(Number(W.target.value)||0),className:"editar-partido-input"})]}),d.jsx("span",{className:"editar-partido-vs",children:""}),d.jsxs("div",{className:"editar-partido-equipo",children:[d.jsx("label",{htmlFor:"goles-azul",children:"Azul"}),d.jsx("input",{id:"goles-azul",type:"number",min:0,max:99,value:u,onChange:W=>h(Number(W.target.value)||0),className:"editar-partido-input"})]})]}),d.jsxs("p",{className:"editar-partido-ganador",children:["Resultado: ",d.jsx("strong",{children:V})]}),o>0&&d.jsxs("div",{className:"editar-partido-anotadores",children:[d.jsxs("label",{className:"editar-partido-anotadores-label",children:["Anotadores Rojo (",o,")"]}),d.jsx("div",{className:"editar-partido-anotadores-list",children:p.slice(0,o).map((W,M)=>d.jsx("select",{value:W,onChange:F=>{const $=F.target.value;m(j=>{const K=[...j];return K[M]=$,K})},className:"editar-partido-select-anotador",children:x.map(F=>d.jsx("option",{value:F.value,children:F.label},F.value))},`rojo-${M}`))})]}),u>0&&d.jsxs("div",{className:"editar-partido-anotadores",children:[d.jsxs("label",{className:"editar-partido-anotadores-label",children:["Anotadores Azul (",u,")"]}),d.jsx("div",{className:"editar-partido-anotadores-list",children:g.slice(0,u).map((W,M)=>d.jsx("select",{value:W,onChange:F=>{const $=F.target.value;S(j=>{const K=[...j];return K[M]=$,K})},className:"editar-partido-select-anotador",children:U.map(F=>d.jsx("option",{value:F.value,children:F.label},F.value))},`azul-${M}`))})]}),O&&d.jsx("p",{className:"editar-partido-error",children:O}),d.jsxs("div",{className:"editar-partido-actions",children:[d.jsx("button",{type:"button",className:"editar-partido-btn secundario",onClick:n,disabled:k,children:"Cancelar"}),d.jsx("button",{type:"submit",className:"editar-partido-btn",disabled:k,children:k?"Guardando":"Guardar"})]})]})]})}):null}function rx(t,e){if(!t)return"";const[n,r,s]=t.split("-").map(Number);if(!n||!r||!s)return t;const i=new Date(n,r-1,s),o={weekday:"long",day:"numeric",month:"long",year:"numeric"},l=i.toLocaleDateString("es-ES",o);return e?`${l} ${e}`:l}function Qa(t=[]){return t.map(e=>e!=null&&e.id?{tipo:"jugador",id:e.id}:{tipo:"invitado",nombre:(e==null?void 0:e.nombre)||"Invitado"})}function Uy(t){return(t||[]).map(e=>(e==null?void 0:e.tipo)==="jugador"&&(e!=null&&e.id)?{id:e.id}:{nombre:(e==null?void 0:e.nombre)||"Invitado"})}function sx({partido:t,jugadores:e=[],onClose:n,onSaved:r}){const[s,i]=z.useState(null),[o,l]=z.useState([]),[u,h]=z.useState([]),[p,m]=z.useState(!1),[g,S]=z.useState(""),k=s??t;z.useEffect(()=>{var _,y;if(!(t!=null&&t.id)||!(e!=null&&e.length)){i(null),l([]),h([]);return}l(Qa((_=t.equipoLocal)==null?void 0:_.jugadores)),h(Qa((y=t.equipoVisitante)==null?void 0:y.jugadores));let V=!1;return Js().then(E=>{var A,P;if(V)return;const N=E.find(I=>I.id===t.id);if(N){const I=Qu(N,e);i(I),l(Qa((A=I.equipoLocal)==null?void 0:A.jugadores)),h(Qa((P=I.equipoVisitante)==null?void 0:P.jugadores))}}).catch(()=>i(null)),()=>{V=!0}},[t==null?void 0:t.id,e]);const b=(V,_)=>{l(y=>{const E=[...y];return E[V]=_,E})},O=(V,_)=>{h(y=>{const E=[...y];return E[V]=_,E})},T=()=>l(V=>[...V,{tipo:"invitado",nombre:"Invitado"}]),v=()=>h(V=>[...V,{tipo:"invitado",nombre:"Invitado"}]),C=V=>l(_=>_.filter((y,E)=>E!==V)),x=V=>h(_=>_.filter((y,E)=>E!==V)),U=async V=>{if(V.preventDefault(),!(!(t!=null&&t.id)||!k)){S(""),m(!0);try{const _=Uy(o),y=Uy(u);await op(t.id,{equipoLocal:{...k.equipoLocal,jugadores:_},equipoVisitante:{...k.equipoVisitante,jugadores:y}}),r==null||r(),n==null||n()}catch(_){S(_.message||"Error al guardar")}finally{m(!1)}}};return t?d.jsx("div",{className:"editar-equipos-overlay",onClick:n,children:d.jsxs("div",{className:"editar-equipos-modal",onClick:V=>V.stopPropagation(),children:[d.jsxs("div",{className:"editar-equipos-header",children:[d.jsx("h3",{children:"Editar equipos del partido"}),d.jsx("button",{type:"button",className:"editar-equipos-close",onClick:n,"aria-label":"Cerrar",children:""})]}),d.jsxs("p",{className:"editar-equipos-meta",children:[rx(k==null?void 0:k.fecha,k==null?void 0:k.hora),"  ",(k==null?void 0:k.lugar)??(t==null?void 0:t.lugar)]}),d.jsx("p",{className:"editar-equipos-hint",children:"Correg los jugadores de cada equipo. Pods agregar, quitar o cambiar entre jugador registrado e invitado."}),d.jsxs("form",{onSubmit:U,className:"editar-equipos-form",children:[d.jsxs("div",{className:"editar-equipos-block",children:[d.jsx("h4",{className:"editar-equipos-titulo",children:"Rojo"}),d.jsx("ul",{className:"editar-equipos-lista",children:o.map((V,_)=>d.jsxs("li",{className:"editar-equipos-fila",children:[d.jsx(hu,{id:`editar-rojo-${_}`,parsedName:(V==null?void 0:V.tipo)==="invitado"?V.nombre:"Invitado",value:V,jugadores:e,onChange:y=>b(_,y)}),d.jsx("button",{type:"button",className:"editar-equipos-quitar",onClick:()=>C(_),"aria-label":"Quitar jugador",children:""})]},_))}),d.jsx("button",{type:"button",className:"editar-equipos-agregar",onClick:T,children:"+ Agregar jugador a Rojo"})]}),d.jsxs("div",{className:"editar-equipos-block",children:[d.jsx("h4",{className:"editar-equipos-titulo",children:"Azul"}),d.jsx("ul",{className:"editar-equipos-lista",children:u.map((V,_)=>d.jsxs("li",{className:"editar-equipos-fila",children:[d.jsx(hu,{id:`editar-azul-${_}`,parsedName:(V==null?void 0:V.tipo)==="invitado"?V.nombre:"Invitado",value:V,jugadores:e,onChange:y=>O(_,y)}),d.jsx("button",{type:"button",className:"editar-equipos-quitar",onClick:()=>x(_),"aria-label":"Quitar jugador",children:""})]},_))}),d.jsx("button",{type:"button",className:"editar-equipos-agregar",onClick:v,children:"+ Agregar jugador a Azul"})]}),g&&d.jsx("p",{className:"editar-equipos-error",children:g}),d.jsxs("div",{className:"editar-equipos-actions",children:[d.jsx("button",{type:"button",className:"editar-equipos-btn secundario",onClick:n,disabled:p,children:"Cancelar"}),d.jsx("button",{type:"submit",className:"editar-equipos-btn",disabled:p,children:p?"Guardando":"Guardar"})]})]})]})}):null}function ix(t){const e=Math.floor(t/60),n=t%60;return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}`}function ox({partido:t,jugadores:e=[],onTerminar:n,onVolver:r}){var M,F;const[s,i]=z.useState(0),[o,l]=z.useState(0),[u,h]=z.useState([]),[p,m]=z.useState([]),[g,S]=z.useState([]),[k]=z.useState(()=>Date.now()),[b,O]=z.useState(0),[T,v]=z.useState(!1),[C,x]=z.useState("");z.useEffect(()=>{const $=setInterval(()=>{O(Math.floor((Date.now()-k)/1e3))},1e3);return()=>clearInterval($)},[k]);const U=new Map((e||[]).map($=>[$.id,$])),V=$=>{if(!$)return"Invitado";if($.id){const j=U.get($.id);return j&&(j.apodo||j.nombre)||$.nombre||"Invitado"}return $.nombre?`Invitado (${$.nombre})`:"Invitado"},_=($,j)=>(j||[]).filter(K=>K===$).length,y=($,j,K)=>{const R=_(j,K);return R===0?$:R===1?` ${$}`:` ${R} ${$}`},E=$=>{i(j=>j+1),h(j=>[...j,$]),S(j=>[...j,"rojo"])},N=$=>{l(j=>j+1),m(j=>[...j,$]),S(j=>[...j,"azul"])},A=()=>{if(g.length===0)return;const $=g[g.length-1];S(j=>j.slice(0,-1)),$==="rojo"?(i(j=>Math.max(0,j-1)),h(j=>j.slice(0,-1))):(l(j=>Math.max(0,j-1)),m(j=>j.slice(0,-1)))},P=async()=>{var $,j,K,R;if(window.confirm("Terminar el partido y guardar el resultado? Esta accin no se puede deshacer.")){x(""),v(!0);try{const H={...t,equipoLocal:{...t.equipoLocal,nombre:(($=t.equipoLocal)==null?void 0:$.nombre)||"Rojo",jugadores:((j=t.equipoLocal)==null?void 0:j.jugadores)??[],goles:s,golesAnotadores:u},equipoVisitante:{...t.equipoVisitante,nombre:((K=t.equipoVisitante)==null?void 0:K.nombre)||"Azul",jugadores:((R=t.equipoVisitante)==null?void 0:R.jugadores)??[],goles:o,golesAnotadores:p}};await Hk(H,e),n==null||n()}catch(H){x(H.message||"Error al terminar el partido")}finally{v(!1)}}};if(!t)return null;const I=((M=t.equipoLocal)==null?void 0:M.jugadores)??[],W=((F=t.equipoVisitante)==null?void 0:F.jugadores)??[];return d.jsxs("div",{className:"partido-en-vivo",children:[d.jsxs("div",{className:"partido-en-vivo-header",children:[d.jsx("button",{type:"button",className:"partido-en-vivo-volver",onClick:r,children:" Volver"}),d.jsx("h2",{className:"partido-en-vivo-titulo",children:"Partido en vivo"})]}),d.jsxs("p",{className:"partido-en-vivo-meta",children:[t.lugar||"","  ",t.fecha," ",t.hora]}),d.jsxs("div",{className:"partido-en-vivo-cuerpo",children:[d.jsxs("div",{className:"partido-en-vivo-centro",children:[d.jsxs("div",{className:"partido-en-vivo-marcador",children:[d.jsxs("div",{className:"partido-en-vivo-equipo partido-en-vivo-rojo",children:[d.jsx("span",{className:"partido-en-vivo-equipo-nombre",children:"Rojo"}),d.jsx("span",{className:"partido-en-vivo-goles",children:s})]}),d.jsx("span",{className:"partido-en-vivo-vs",children:""}),d.jsxs("div",{className:"partido-en-vivo-equipo partido-en-vivo-azul",children:[d.jsx("span",{className:"partido-en-vivo-equipo-nombre",children:"Azul"}),d.jsx("span",{className:"partido-en-vivo-goles",children:o})]})]}),d.jsxs("div",{className:"partido-en-vivo-cronometro",children:[d.jsx("span",{className:"partido-en-vivo-cronometro-label",children:"Tiempo"}),d.jsx("span",{className:"partido-en-vivo-cronometro-valor",children:ix(b)})]}),d.jsxs("div",{className:"partido-en-vivo-actions",children:[d.jsx("button",{type:"button",className:"partido-en-vivo-btn-revertir",onClick:A,disabled:g.length===0||T,title:"Deshacer el ltimo gol anotado",children:"Revertir ltima accin"}),d.jsx("button",{type:"button",className:"partido-en-vivo-btn-terminar",onClick:P,disabled:T,children:T?"Guardando":"Terminar partido"})]}),C&&d.jsx("p",{className:"partido-en-vivo-error",children:C})]}),d.jsx("p",{className:"partido-en-vivo-hint",children:"Toc un jugador o Gol general para anotar un gol."}),d.jsxs("div",{className:"partido-en-vivo-columna partido-en-vivo-columna-rojo",children:[d.jsx("h3",{className:"partido-en-vivo-columna-titulo",children:"Rojo"}),d.jsxs("div",{className:"partido-en-vivo-jugadores",children:[I.map(($,j)=>{const K=($==null?void 0:$.id)||`guest:${($==null?void 0:$.nombre)||"Invitado"}`;return d.jsx("button",{type:"button",className:"partido-en-vivo-jugador-btn",onClick:()=>E(K),children:y(V($),K,u)},j)}),d.jsx("button",{type:"button",className:"partido-en-vivo-jugador-btn partido-en-vivo-gol-general",onClick:()=>E(Be),children:y("Gol general",Be,u)})]})]}),d.jsxs("div",{className:"partido-en-vivo-columna partido-en-vivo-columna-azul",children:[d.jsx("h3",{className:"partido-en-vivo-columna-titulo",children:"Azul"}),d.jsxs("div",{className:"partido-en-vivo-jugadores",children:[W.map(($,j)=>{const K=($==null?void 0:$.id)||`guest:${($==null?void 0:$.nombre)||"Invitado"}`;return d.jsx("button",{type:"button",className:"partido-en-vivo-jugador-btn",onClick:()=>N(K),children:y(V($),K,p)},j)}),d.jsx("button",{type:"button",className:"partido-en-vivo-jugador-btn partido-en-vivo-gol-general",onClick:()=>N(Be),children:y("Gol general",Be,p)})]})]})]}),d.jsx("p",{className:"partido-en-vivo-hint",children:'Toc un jugador o "Gol general" para anotar un gol.'})]})}function ax({isAdmin:t,isAuthenticated:e}){const[n,r]=z.useState([]),[s,i]=z.useState([]),[o,l]=z.useState(!0),[u,h]=z.useState(null),[p,m]=z.useState(null),[g,S]=z.useState(!1),[k,b]=z.useState(null),[O,T]=z.useState(null),[v,C]=z.useState(null),[x,U]=z.useState(null),V=z.useMemo(()=>I0(n,s),[n,s]),_=z.useMemo(()=>new Map(s.map(R=>[R.id,R])),[s]),y=R=>{if(!R)return 900;if(R.id){const H=_.get(R.id);return H!=null&&typeof H.elo=="number"?H.elo:900}return 900},E=R=>{if(!R||R.length===0)return 0;const H=R.reduce((J,ie)=>J+y(ie),0);return Math.round(H/R.length)},N=R=>{if(!R)return"invitado";if(R.id){const H=_.get(R.id);return H&&(H.apodo||H.nombre)||R.nombre||"invitado"}return R.nombre?`invitado (${R.nombre})`:"invitado"},A=(R,H,J)=>{var ue;const ie=((ue=R==null?void 0:R[H])==null?void 0:ue.golesAnotadores)??[];return J?J.id?ie.filter(Re=>Re===J.id).length:J.nombre?ie.filter(Re=>Re===`guest:${J.nombre}`).length:0:0},P=({count:R})=>!R||R<1?null:d.jsx("span",{className:"partido-jugador-goles",title:`${R} gol${R>1?"es":""}`,"aria-hidden":!0,children:Array.from({length:R},(H,J)=>d.jsx("span",{className:"partido-gol-icon","aria-hidden":!0,children:""},J))}),I=()=>{Js().then(r).catch(()=>{})},W=async R=>{if(window.confirm("Dar de baja este partido? Se eliminar y se restarn partido, victoria/empate/derrota, goles y Elo a los jugadores que participaron.")){C(R.id);try{const J=await Ot();await $k(R,J),await Js().then(r),await Ot().then(i)}catch(J){console.error(J),alert(J.message||"Error al dar de baja el partido")}finally{C(null)}}};z.useEffect(()=>{let R=!1;return l(!0),h(null),Promise.all([Js(),Ot()]).then(([H,J])=>{R||(r(H),i(J))}).catch(H=>{R||h(H.message||"Error al cargar partidos")}).finally(()=>{R||l(!1)}),()=>{R=!0}},[]);const M=(R,H="00:00")=>{if(!R)return null;const[J,ie,ue]=R.split("-").map(Number);if(!J||!ie||!ue)return null;const[Re=0,Ve=0]=(H||"00:00").toString().split(":").map(Number);return new Date(J,ie-1,ue,Re,Ve)},F=R=>{const H=M(R);return!H||Number.isNaN(H.getTime())?R:H.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},$=R=>{const H=M(R);return!H||Number.isNaN(H.getTime())?R:H.toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short"})},j=R=>{var ie,ue;const H=((ie=R.equipoLocal)==null?void 0:ie.goles)??0,J=((ue=R.equipoVisitante)==null?void 0:ue.goles)??0;return`Rojo ${H} - ${J} Azul`},K=(R,H)=>{const J=new Date,ie=M(R,H);return ie?ie>J:!1};return o?d.jsxs("div",{className:"partidos-container",children:[d.jsxs("div",{className:"partidos-header",children:[d.jsx("h2",{className:"section-title",children:"Partidos"}),t&&d.jsx("button",{type:"button",className:"partidos-btn-nuevo",onClick:()=>S(!0),disabled:!0,children:"Nuevo partido"})]}),d.jsx("p",{className:"empty-state",children:"Cargando partidos"})]}):u?d.jsxs("div",{className:"partidos-container",children:[d.jsxs("div",{className:"partidos-header",children:[d.jsx("h2",{className:"section-title",children:"Partidos"}),t&&d.jsx("button",{type:"button",className:"partidos-btn-nuevo",onClick:()=>S(!0),disabled:!0,children:"Nuevo partido"})]}),d.jsx("p",{className:"empty-state partidos-error",children:u})]}):d.jsxs("div",{className:"partidos-container",children:[d.jsxs("div",{className:"partidos-header",children:[d.jsx("h2",{className:"section-title",children:"Partidos"}),t&&d.jsx("button",{type:"button",className:"partidos-btn-nuevo",onClick:()=>S(!0),children:"Nuevo partido"})]}),g&&d.jsx(ex,{onClose:()=>S(!1),onPartidoCreado:I}),k&&d.jsx(nx,{partido:k,jugadores:s,onClose:()=>b(null),onSaved:I}),O&&d.jsx(sx,{partido:O,jugadores:s,onClose:()=>T(null),onSaved:I}),x?d.jsx(ox,{partido:x,jugadores:s,onTerminar:()=>{U(null),I(),Ot().then(i).catch(()=>{})},onVolver:()=>U(null)}):V.length===0?d.jsx("p",{className:"empty-state",children:"No hay partidos registrados"}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"partidos-list partidos-list-desktop",children:V.map(R=>{var Re,Ve,je,St,qt,Xt,Bt,$t,At,Ue;const H=K(R.fecha,R.hora),ie=!(R.concluido===!0)&&(R.concluido===!1||H),ue=R.ganador==="Empate";return d.jsxs("div",{className:`partido-card ${H?"futuro":""}`,children:[d.jsxs("div",{className:"partido-header",children:[d.jsxs("div",{className:"partido-fecha",children:[d.jsx("span",{className:"fecha-texto",children:F(R.fecha)}),d.jsx("span",{className:"hora-texto",children:R.hora})]}),d.jsxs("div",{className:"partido-lugar",children:[d.jsx("span",{className:"lugar-icon",children:""}),d.jsx("span",{children:R.lugar})]}),H&&d.jsx("span",{className:"badge-futuro",children:"Prximo"})]}),ie?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"partido-resultado partido-resultado-futuro",children:[d.jsx("span",{className:"partido-aun-no",children:"An no ocurri"}),d.jsxs("div",{className:"partido-elo-promedio-futuro",children:[d.jsxs("span",{children:["Elo prom. Rojo: ",E((Re=R.equipoLocal)==null?void 0:Re.jugadores)]}),d.jsxs("span",{children:["Elo prom. Azul: ",E((Ve=R.equipoVisitante)==null?void 0:Ve.jugadores)]})]})]}),d.jsxs("div",{className:"partido-card-actions",children:[e&&d.jsx("button",{type:"button",className:"partido-btn-en-vivo",onClick:()=>U(R),children:"Partido en vivo"}),t&&d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",className:"partido-btn-editar",onClick:()=>T(R),children:"Editar equipos"}),d.jsx("button",{type:"button",className:"partido-btn-editar",onClick:()=>b(R),children:"Editar resultado"}),d.jsx("button",{type:"button",className:"partido-btn-editar partido-btn-baja",onClick:()=>W(R),disabled:v===R.id,children:v===R.id?"Dando de baja":"Dar de baja"})]})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"partido-resultado",children:[d.jsxs("div",{className:"equipo-info",children:[d.jsxs("div",{className:"equipo-nombre equipo-local",children:["Rojo",!ue&&R.ganador===((je=R.equipoLocal)==null?void 0:je.nombre)&&d.jsx("span",{className:"badge-ganador",children:""})]}),d.jsx("div",{className:"equipo-goles",children:((St=R.equipoLocal)==null?void 0:St.goles)??0}),d.jsxs("div",{className:"equipo-elo-promedio",children:["Elo prom. ",E((qt=R.equipoLocal)==null?void 0:qt.jugadores)]})]}),d.jsx("div",{className:"vs-separator",children:"VS"}),d.jsxs("div",{className:"equipo-info",children:[d.jsxs("div",{className:"equipo-nombre equipo-visitante",children:["Azul",!ue&&R.ganador===((Xt=R.equipoVisitante)==null?void 0:Xt.nombre)&&d.jsx("span",{className:"badge-ganador",children:""})]}),d.jsx("div",{className:"equipo-goles",children:((Bt=R.equipoVisitante)==null?void 0:Bt.goles)??0}),d.jsxs("div",{className:"equipo-elo-promedio",children:["Elo prom. ",E(($t=R.equipoVisitante)==null?void 0:$t.jugadores)]})]})]}),ue&&d.jsx("div",{className:"resultado-empate",children:"Empate"})]}),d.jsxs("div",{className:"partido-jugadores",children:[d.jsxs("div",{className:"jugadores-equipo",children:[d.jsx("h4",{className:"jugadores-titulo",children:"Rojo"}),d.jsx("ul",{className:"jugadores-lista",children:(((At=R.equipoLocal)==null?void 0:At.jugadores)??[]).map((Ke,Ee)=>{var ee,ce;const we=(ce=(ee=R.equipoLocal)==null?void 0:ee.eloDeltas)==null?void 0:ce[Ee],ae=A(R,"equipoLocal",Ke);return d.jsxs("li",{children:[N(Ke),d.jsx(P,{count:ae}),d.jsxs("span",{className:"partido-jugador-elo-wrap",children:[d.jsx("span",{className:"partido-jugador-elo",children:y(Ke)}),we!=null&&we!==0&&d.jsx("span",{className:`partido-elo-delta ${we>0?"partido-elo-delta-positivo":"partido-elo-delta-negativo"}`,children:we>0?`+${we}`:we})]})]},Ee)})})]}),d.jsxs("div",{className:"jugadores-equipo",children:[d.jsx("h4",{className:"jugadores-titulo",children:"Azul"}),d.jsx("ul",{className:"jugadores-lista",children:(((Ue=R.equipoVisitante)==null?void 0:Ue.jugadores)??[]).map((Ke,Ee)=>{var ee,ce;const we=(ce=(ee=R.equipoVisitante)==null?void 0:ee.eloDeltas)==null?void 0:ce[Ee],ae=A(R,"equipoVisitante",Ke);return d.jsxs("li",{children:[N(Ke),d.jsx(P,{count:ae}),d.jsxs("span",{className:"partido-jugador-elo-wrap",children:[d.jsx("span",{className:"partido-jugador-elo",children:y(Ke)}),we!=null&&we!==0&&d.jsx("span",{className:`partido-elo-delta ${we>0?"partido-elo-delta-positivo":"partido-elo-delta-negativo"}`,children:we>0?`+${we}`:we})]})]},Ee)})})]})]}),t&&d.jsxs("div",{className:"partido-card-actions",children:[d.jsx("button",{type:"button",className:"partido-btn-editar",onClick:()=>T(R),children:"Editar equipos"}),d.jsx("button",{type:"button",className:"partido-btn-editar",onClick:()=>b(R),children:"Editar resultado"}),d.jsx("button",{type:"button",className:"partido-btn-editar partido-btn-baja",onClick:()=>W(R),disabled:v===R.id,children:v===R.id?"Dando de baja":"Dar de baja"})]})]},R.id)})}),d.jsx("div",{className:"partidos-list-mobile",children:V.map(R=>{var Ve,je,St,qt,Xt,Bt,$t,At;const H=K(R.fecha,R.hora),ie=!(R.concluido===!0)&&(R.concluido===!1||H),ue=R.ganador==="Empate",Re=p===R.id;return d.jsxs("div",{className:`partido-list-item ${Re?"expandido":""}`,children:[d.jsxs("button",{type:"button",className:"partido-list-item-header",onClick:()=>m(Ue=>Ue===R.id?null:R.id),"aria-expanded":Re,children:[d.jsx("span",{className:"partido-list-fecha",children:$(R.fecha)}),d.jsx("span",{className:"partido-list-resultado",children:ie?"An no ocurri":j(R)}),d.jsx("span",{className:"partido-list-chevron","aria-hidden":!0,children:""})]}),Re&&d.jsxs("div",{className:"partido-list-item-detail",children:[d.jsx("button",{type:"button",className:"partido-detail-cerrar",onClick:()=>m(null),"aria-label":"Cerrar",children:" Cerrar"}),d.jsxs("div",{className:"partido-detail-meta",children:[d.jsx("span",{className:"fecha-texto",children:F(R.fecha)}),d.jsx("span",{className:"hora-texto",children:R.hora}),d.jsxs("span",{className:"partido-lugar",children:[d.jsx("span",{className:"lugar-icon","aria-hidden":!0,children:""}),R.lugar]}),H&&d.jsx("span",{className:"badge-futuro",children:"Prximo"})]}),ie?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"partido-detail-resultado partido-resultado-futuro",children:[d.jsx("span",{className:"partido-aun-no",children:"An no ocurri"}),d.jsxs("div",{className:"partido-elo-promedio-futuro",children:[d.jsxs("span",{children:["Elo prom. Rojo: ",E((Ve=R.equipoLocal)==null?void 0:Ve.jugadores)]}),d.jsxs("span",{children:["Elo prom. Azul: ",E((je=R.equipoVisitante)==null?void 0:je.jugadores)]})]})]}),d.jsxs("div",{className:"partido-detail-actions",children:[e&&d.jsx("button",{type:"button",className:"partido-btn-en-vivo partido-btn-editar-mobile",onClick:()=>U(R),children:"Partido en vivo"}),t&&d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",className:"partido-btn-editar partido-btn-editar-mobile",onClick:()=>T(R),children:"Editar equipos"}),d.jsx("button",{type:"button",className:"partido-btn-editar partido-btn-editar-mobile",onClick:()=>b(R),children:"Editar resultado"}),d.jsx("button",{type:"button",className:"partido-btn-editar partido-btn-editar-mobile partido-btn-baja",onClick:()=>W(R),disabled:v===R.id,children:v===R.id?"Dando de baja":"Dar de baja"})]})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"partido-detail-resultado",children:[d.jsxs("div",{className:"partido-detail-equipo",children:[d.jsx("span",{className:"partido-detail-equipo-nombre",children:"Rojo"}),d.jsx("span",{className:"partido-detail-goles",children:((St=R.equipoLocal)==null?void 0:St.goles)??0}),d.jsxs("span",{className:"partido-detail-elo-prom",children:["Elo prom. ",E((qt=R.equipoLocal)==null?void 0:qt.jugadores)]})]}),d.jsx("div",{className:"partido-detail-vs",children:"VS"}),d.jsxs("div",{className:"partido-detail-equipo",children:[d.jsx("span",{className:"partido-detail-equipo-nombre",children:"Azul"}),d.jsx("span",{className:"partido-detail-goles",children:((Xt=R.equipoVisitante)==null?void 0:Xt.goles)??0}),d.jsxs("span",{className:"partido-detail-elo-prom",children:["Elo prom. ",E((Bt=R.equipoVisitante)==null?void 0:Bt.jugadores)]})]})]}),ue&&d.jsx("div",{className:"resultado-empate partido-detail-empate",children:"Empate"})]}),d.jsxs("div",{className:"partido-detail-jugadores",children:[d.jsx("ul",{className:"jugadores-lista",children:((($t=R.equipoLocal)==null?void 0:$t.jugadores)??[]).map((Ue,Ke)=>{var ae,ee;const Ee=(ee=(ae=R.equipoLocal)==null?void 0:ae.eloDeltas)==null?void 0:ee[Ke],we=A(R,"equipoLocal",Ue);return d.jsxs("li",{children:[N(Ue),d.jsx(P,{count:we}),d.jsxs("span",{className:"partido-jugador-elo-wrap",children:[d.jsx("span",{className:"partido-jugador-elo",children:y(Ue)}),Ee!=null&&Ee!==0&&d.jsx("span",{className:`partido-elo-delta ${Ee>0?"partido-elo-delta-positivo":"partido-elo-delta-negativo"}`,children:Ee>0?`+${Ee}`:Ee})]})]},Ke)})}),d.jsx("ul",{className:"jugadores-lista",children:(((At=R.equipoVisitante)==null?void 0:At.jugadores)??[]).map((Ue,Ke)=>{var ae,ee;const Ee=(ee=(ae=R.equipoVisitante)==null?void 0:ae.eloDeltas)==null?void 0:ee[Ke],we=A(R,"equipoVisitante",Ue);return d.jsxs("li",{children:[N(Ue),d.jsx(P,{count:we}),d.jsxs("span",{className:"partido-jugador-elo-wrap",children:[d.jsx("span",{className:"partido-jugador-elo",children:y(Ue)}),Ee!=null&&Ee!==0&&d.jsx("span",{className:`partido-elo-delta ${Ee>0?"partido-elo-delta-positivo":"partido-elo-delta-negativo"}`,children:Ee>0?`+${Ee}`:Ee})]})]},Ke)})})]}),t&&d.jsxs("div",{className:"partido-detail-actions",children:[d.jsx("button",{type:"button",className:"partido-btn-editar partido-btn-editar-mobile",onClick:()=>T(R),children:"Editar equipos"}),d.jsx("button",{type:"button",className:"partido-btn-editar partido-btn-editar-mobile",onClick:()=>b(R),children:"Editar resultado"}),d.jsx("button",{type:"button",className:"partido-btn-editar partido-btn-editar-mobile partido-btn-baja",onClick:()=>W(R),disabled:v===R.id,children:v===R.id?"Dando de baja":"Dar de baja"})]})]})]},R.id)})})]})]})}function lx({userEmail:t,userDisplayName:e,onClose:n,onRegistered:r}){const[s,i]=z.useState([]),[o,l]=z.useState(!0),[u,h]=z.useState(""),[p,m]=z.useState(!1),[g,S]=z.useState(""),k=s.find(T=>T.mail===t),b=s.filter(T=>!(T.registrado===!0||T.mail&&String(T.mail).trim()!==""));z.useEffect(()=>{Ot().then(i).catch(()=>S("Error al cargar jugadores")).finally(()=>l(!1))},[]),z.useEffect(()=>{if(s.length&&e&&!u){const T=s.find(v=>v.nombre&&v.nombre.trim().toLowerCase()===(e||"").trim().toLowerCase());T&&h(T.id)}},[s,e,u]);const O=async T=>{if(T.preventDefault(),!!u){S(""),m(!0);try{await Wk(u,{mail:t,registrado:!0}),r==null||r(),n==null||n()}catch(v){S(v.message||"Error al registrarse")}finally{m(!1)}}};return o?d.jsx("div",{className:"registro-overlay",onClick:n,children:d.jsx("div",{className:"registro-modal",onClick:T=>T.stopPropagation(),children:d.jsx("p",{children:"Cargando jugadores"})})}):d.jsx("div",{className:"registro-overlay",onClick:n,children:d.jsxs("div",{className:"registro-modal",onClick:T=>T.stopPropagation(),children:[d.jsxs("div",{className:"registro-header",children:[d.jsx("h3",{children:"Registrarme como jugador"}),d.jsx("button",{type:"button",className:"registro-close",onClick:n,"aria-label":"Cerrar",children:""})]}),k?d.jsxs("div",{className:"registro-ya",children:[d.jsxs("p",{children:["Ya ests registrado como ",d.jsx("strong",{children:k.apodo||k.nombre}),"."]}),d.jsx("button",{type:"button",className:"registro-btn",onClick:n,children:"Cerrar"})]}):d.jsxs("form",{onSubmit:O,className:"registro-form",children:[d.jsx("p",{className:"registro-desc",children:"Eleg tu ficha para vincular tu cuenta con un jugador del equipo."}),d.jsx("label",{htmlFor:"registro-select",className:"registro-label",children:"Jugador"}),d.jsxs("select",{id:"registro-select",value:u,onChange:T=>h(T.target.value),className:"registro-select",required:!0,children:[d.jsx("option",{value:"",children:"Seleccionar"}),b.map(T=>d.jsxs("option",{value:T.id,children:[T.apodo||T.nombre,"  ",T.nombre]},T.id))]}),g&&d.jsx("p",{className:"registro-error",children:g}),d.jsxs("div",{className:"registro-actions",children:[d.jsx("button",{type:"button",className:"registro-btn secundary",onClick:n,children:"Cancelar"}),d.jsx("button",{type:"submit",className:"registro-btn",disabled:!u||p,children:p?"Guardando":"Registrarme"})]})]})]})})}const ux=["Delantero","Defensor","Mediocampista","Arquero"];function cx({userEmail:t,onClose:e,onSaved:n,onCerrarSesion:r,onEquipoPreview:s}){const[i,o]=z.useState([]),[l,u]=z.useState(!0),[h,p]=z.useState(!1),[m,g]=z.useState(""),S=i.find(A=>A.mail===t),[k,b]=z.useState(""),[O,T]=z.useState(""),[v,C]=z.useState(""),[x,U]=z.useState(""),[V,_]=z.useState("rojo"),y=(S==null?void 0:S.equipoFavorito)==="azul"?"azul":"rojo",E=!!S&&(k!==(S.apodo??"")||O!==(S.descripcion??"")||v!==(S.posicion??"")||x!==(S.fechaNacimiento?S.fechaNacimiento.slice(0,10):"")||V!==y);z.useEffect(()=>{Ot().then(o).catch(()=>g("Error al cargar")).finally(()=>u(!1))},[]),z.useEffect(()=>{S&&(b(S.apodo??""),T(S.descripcion??""),C(S.posicion??""),U(S.fechaNacimiento?S.fechaNacimiento.slice(0,10):""),_(S.equipoFavorito==="azul"?"azul":"rojo"))},[S]);const N=async A=>{if(A.preventDefault(),!!S){g(""),p(!0);try{await Gk(S.id,{apodo:k.trim(),descripcion:O.trim(),posicion:v||"",fechaNacimiento:x||"",equipoFavorito:V}),n==null||n(V),e==null||e()}catch(P){g(P.message||"Error al guardar")}finally{p(!1)}}};return l?d.jsx("div",{className:"config-overlay",onClick:e,children:d.jsx("div",{className:"config-modal",onClick:A=>A.stopPropagation(),children:d.jsx("p",{children:"Cargando"})})}):S?d.jsx("div",{className:"config-overlay",onClick:e,children:d.jsxs("div",{className:"config-modal",onClick:A=>A.stopPropagation(),children:[d.jsxs("div",{className:"config-header",children:[d.jsx("h3",{children:"Configuracin de perfil"}),d.jsx("button",{type:"button",className:"config-close",onClick:e,"aria-label":"Cerrar",children:""})]}),d.jsxs("form",{onSubmit:N,className:"config-form",children:[d.jsxs("label",{className:"config-label",children:["Apodo",d.jsx("input",{type:"text",value:k,onChange:A=>b(A.target.value),className:"config-input",placeholder:"Tu apodo"})]}),d.jsxs("label",{className:"config-label",children:["Posicin",d.jsxs("select",{value:v,onChange:A=>C(A.target.value),className:"config-select",children:[d.jsx("option",{value:"",children:"Seleccionar"}),ux.map(A=>d.jsx("option",{value:A,children:A},A))]})]}),d.jsxs("label",{className:"config-label",children:["Fecha de nacimiento",d.jsx("input",{type:"date",value:x,onChange:A=>U(A.target.value),className:"config-input"})]}),d.jsxs("div",{className:"config-label",children:[d.jsx("span",{className:"config-label-text",children:"Equipo favorito"}),d.jsxs("div",{className:"config-equipo-btns",role:"group","aria-label":"Equipo favorito",children:[d.jsx("button",{type:"button",className:`config-equipo-btn config-equipo-btn--azul ${V==="azul"?"config-equipo-btn--selected":""}`,onClick:()=>{_("azul"),s==null||s("azul")},"aria-pressed":V==="azul",children:"Azul"}),d.jsx("button",{type:"button",className:`config-equipo-btn config-equipo-btn--rojo ${V==="rojo"?"config-equipo-btn--selected":""}`,onClick:()=>{_("rojo"),s==null||s("rojo")},"aria-pressed":V==="rojo",children:"Rojo"})]})]}),d.jsxs("label",{className:"config-label",children:["Descripcin",d.jsx("textarea",{value:O,onChange:A=>T(A.target.value),className:"config-textarea",placeholder:"Algo sobre vos...",rows:3})]}),m&&d.jsx("p",{className:"config-error",children:m}),d.jsxs("div",{className:"config-actions",children:[d.jsx("button",{type:"button",className:"config-btn config-btn-sec",onClick:e,children:"Cancelar"}),d.jsx("button",{type:"submit",className:`config-btn ${E?"config-btn-unsaved":""}`,disabled:h,children:h?"Guardando":"Guardar"})]}),r&&d.jsx("button",{type:"button",className:"config-btn config-btn-outline config-btn-full",onClick:r,children:"Cerrar sesin"})]})]})}):d.jsx("div",{className:"config-overlay",onClick:e,children:d.jsxs("div",{className:"config-modal",onClick:A=>A.stopPropagation(),children:[d.jsxs("div",{className:"config-header",children:[d.jsx("h3",{children:"Configuracin"}),d.jsx("button",{type:"button",className:"config-close",onClick:e,"aria-label":"Cerrar",children:""})]}),d.jsx("p",{className:"config-sin-registro",children:'Primero registrate como jugador en "Mi jugador" para poder configurar tu perfil.'}),d.jsxs("div",{className:"config-actions config-actions-single",children:[d.jsx("button",{type:"button",className:"config-btn",onClick:e,children:"Cerrar"}),r&&d.jsx("button",{type:"button",className:"config-btn config-btn-outline",onClick:r,children:"Cerrar sesin"})]})]})})}const zy="bondiola-fc-theme";function hx(){const{user:t,loading:e,signOut:n,isAuthenticated:r}=T0(),[s,i]=z.useState("jugadores"),[o,l]=z.useState(!1),[u,h]=z.useState(!1),[p,m]=z.useState(null),[g,S]=z.useState(null),[k,b]=z.useState(null),[O,T]=z.useState(()=>{const v=localStorage.getItem(zy);return v?v==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});return z.useEffect(()=>{const v=O?"dark":"light";document.documentElement.setAttribute("data-theme",v),localStorage.setItem(zy,v)},[O]),z.useEffect(()=>{if(!r||(t==null?void 0:t.type)!=="google"){document.documentElement.setAttribute("data-equipo","azul");return}const v=k??((g==null?void 0:g.equipoFavorito)==="rojo"?"rojo":"azul");document.documentElement.setAttribute("data-equipo",v)},[r,t==null?void 0:t.type,k,g==null?void 0:g.equipoFavorito]),z.useEffect(()=>{if(!r||(t==null?void 0:t.type)!=="google"||!(t!=null&&t.email))return;let v=!1;return Yc(t.email).then(C=>{v||(S(C||null),m(!!C))}).catch(()=>{v||(S(null),m(!1))}),()=>{v=!0}},[r,t==null?void 0:t.type,t==null?void 0:t.email]),z.useEffect(()=>{(!r||(t==null?void 0:t.type)!=="google")&&(m(null),S(null))},[r,t==null?void 0:t.type]),e?d.jsx("div",{className:"app app-loading",children:d.jsx("p",{children:"Cargando"})}):r?d.jsxs("div",{className:"app",children:[d.jsx("header",{className:"app-header",children:d.jsxs("div",{className:"app-header-content",children:[d.jsxs("div",{className:"app-header-title",children:[d.jsxs("h1",{children:[d.jsx("span",{className:"header-ball","aria-hidden":"true",children:""})," Bondiola FC"]}),d.jsx("p",{className:"subtitle",children:"Futbol en dos cmodas cuotas"})]}),d.jsxs("div",{className:"app-header-actions",children:[(t==null?void 0:t.type)==="google"&&d.jsxs(d.Fragment,{children:[p===!1&&d.jsx("button",{type:"button",className:"app-registro-btn",onClick:()=>l(!0),title:"Registrarme como jugador",children:"Mi jugador"}),d.jsx("button",{type:"button",className:"app-icon-btn",onClick:()=>h(!0),title:"Configuracin de perfil","aria-label":"Configuracin",children:""})]}),d.jsx("span",{className:"app-user-badge",title:(t==null?void 0:t.type)==="google"&&g?t==null?void 0:t.email:void 0,children:(t==null?void 0:t.type)==="guest"?"Invitado":(g==null?void 0:g.apodo)||(t==null?void 0:t.email)}),(t==null?void 0:t.type)==="guest"&&d.jsx("button",{type:"button",className:"app-registro-btn",onClick:n,title:"Iniciar sesin con Google",children:"Login"}),d.jsx("button",{type:"button",className:"theme-toggle",onClick:()=>T(!O),title:O?"Modo claro":"Modo oscuro","aria-label":O?"Cambiar a modo claro":"Cambiar a modo oscuro",children:O?"":""})]})]})}),d.jsxs("nav",{className:"app-nav",children:[d.jsx("button",{className:`nav-button ${s==="jugadores"?"active":""}`,onClick:()=>i("jugadores"),children:"Jugadores"}),d.jsx("button",{className:`nav-button ${s==="partidos"?"active":""}`,onClick:()=>i("partidos"),children:"Partidos"})]}),d.jsxs("main",{className:"app-main",children:[s==="jugadores"&&d.jsx(Yk,{isAdmin:(g==null?void 0:g.admin)===!0}),s==="partidos"&&d.jsx(ax,{isAdmin:(g==null?void 0:g.admin)===!0,isAuthenticated:r})]}),o&&(t==null?void 0:t.type)==="google"&&d.jsx(lx,{userEmail:t.email,userDisplayName:t.displayName||"",onClose:()=>l(!1),onRegistered:()=>{l(!1),m(!0),Yc(t.email).then(v=>S(v||null))}}),u&&(t==null?void 0:t.type)==="google"&&d.jsx(cx,{userEmail:t.email,onClose:()=>{b(null),h(!1)},onEquipoPreview:b,onSaved:()=>{b(null),h(!1),Yc(t.email).then(v=>S(v||null))},onCerrarSesion:()=>{b(null),h(!1),n()}})]}):d.jsx(Kk,{})}Zc.createRoot(document.getElementById("root")).render(d.jsx(dT.StrictMode,{children:d.jsx(Mk,{children:d.jsx(hx,{})})}));
